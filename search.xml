<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>virtualenv虚拟环境</title>
      <link href="/post/2018-10-22-virtualenv%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83.html"/>
      <url>/post/2018-10-22-virtualenv%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83.html</url>
      
        <content type="html"><![CDATA[<p>virtualenv就是用来为一个应用创建一套“隔离”的Python运行环境。</p><p>为不同的python版本创建不同的虚拟环境</p><a id="more"></a><p>首先，安装virtualenv:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install virtualenv</span><br></pre></td></tr></table></figure><p>现在，假设我们有一个jango的项目，需要一套独立的python环境</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir myproject</span><br><span class="line">cd myproject</span><br></pre></td></tr></table></figure><p>创建一个独立的python运行环境 djenv</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">virtualenv --no-site-packages -p C:\python36\python.exe djenv</span><br><span class="line">Running virtualenv with interpreter C:\python36\python.exe</span><br><span class="line">Using base prefix 'C:\\python36'</span><br><span class="line">New python executable in E:\env\djenv\Scripts\python.exe</span><br><span class="line">Installing setuptools, pip, wheel...done.</span><br></pre></td></tr></table></figure><p>命令<code>virtualenv</code>就可以创建一个独立的Python运行环境，我们还加上了参数<code>--no-site-packages</code>，这样，已经安装到系统Python环境中的所有第三方包都不会复制过来，这样，我们就得到了一个不带任何第三方包的“干净”的Python运行环境。<code>-p</code>指定python版本，假设你公司有两个版本的python版本代码交给你管理，那么你只有选择对应的.exe文件就可以建立不同python版本的虚拟环境</p><p>现在进入虚拟环境</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> linux中的命令</span></span><br><span class="line">source djenv\Scripts\activate</span><br><span class="line"><span class="meta">#</span><span class="bash"> windows中直接<span class="built_in">cd</span>进去就可以了</span></span><br><span class="line">cd djenv\Scripts\activate</span><br></pre></td></tr></table></figure><p>进入后能发现命令提示符变了，有个（<code>djenv</code>）前缀，表示当前环境是一个名为<code>djenv</code>的Python环境。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">(djenv) E:\env\djenv\Scripts&gt;</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看当前装的库以及版本</span></span><br><span class="line">(djenv) E:\env\djenv\Scripts&gt;pip list </span><br><span class="line">Package    Version</span><br><span class="line">---------- -------</span><br><span class="line">Django     1.11</span><br><span class="line">pip        18.1</span><br><span class="line">pytz       2018.5</span><br><span class="line">setuptools 40.4.3</span><br><span class="line">wheel      0.32.1</span><br><span class="line"><span class="meta">#</span><span class="bash"> 查看安装的第三方库的版本</span></span><br><span class="line">(djenv) E:\env\djenv\Scripts&gt;pip freeze</span><br><span class="line">Django==1.11</span><br><span class="line">pytz==2018.5</span><br></pre></td></tr></table></figure><p>退出虚拟环境</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">deactivate</span><br></pre></td></tr></table></figure><p>virtualenv是如何创建“独立”的Python运行环境的呢？原理很简单，就是把系统Python复制一份到virtualenv的环境，用命令<code>source djenv/bin/activate</code>进入一个virtualenv环境时，virtualenv会修改相关环境变量，让命令<code>python</code>和<code>pip</code>均指向当前的virtualenv环境。</p>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> virtualenv虚拟环境 </tag>
            
            <tag> django虚拟环境创建 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Django小结</title>
      <link href="/post/2018-10-22-Django%E5%B0%8F%E7%BB%93.html"/>
      <url>/post/2018-10-22-Django%E5%B0%8F%E7%BB%93.html</url>
      
        <content type="html"><![CDATA[<p>Django是一个用Python编写的开放源代码的Web应用框架，代码是开源的。</p><p>此系统采用了MVC的框架模式, 也可以称为MTV模式</p><a id="more"></a><h2 id="什么是mvc模式"><a class="header-anchor" href="#什么是mvc模式"></a>什么是MVC模式</h2><p>MVC全名是Model View Controller。（强制性的使应用程序的输入，处理和输出分开）</p><ul><li><p>模型（Model）</p><p>即数据存取层。用于封装于应用程序的业务逻辑相关的数据，以及对数据的处理。说白了就是模型对象负责在数据库中存取数据</p></li><li><p>视图（View）</p><p>即表现层。负责数据的显示和呈现。渲染的html页面给用户，或者返回数据给用户。</p></li><li><p>控制器（Coneroller）</p><p>即业务逻辑层。负责从用户端收集用户的输入，进行业务逻辑处理，包括向模型中发送数据，进行CRUD操作。</p></li><li><p>MVC就是一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。</p></li></ul><p><img src="/post/2018-10-22-Django%E5%B0%8F%E7%BB%93/mvc.jpg" alt="mvc"></p><h2 id="django的模式简介"><a class="header-anchor" href="#django的模式简介"></a>django的模式简介</h2><ul><li><p>django的模式应该是MVT模式，但是本质与MVC没什么区别</p><p>Model： 负责业务与数据库(ORM)的对象</p><p>View： 负责业务逻辑并适当调用Model和Template</p><p>Template: 负责把页面渲染展示给用户</p><p>注意： Django中还有一个url分发器，也叫作路由。主要用于将url请求发送给不同的View处理，View在进行相关的业务逻辑处理。</p></li></ul><h2 id="创建配置django项目"><a class="header-anchor" href="#创建配置django项目"></a>创建配置django项目</h2><ul><li><p>创建<code>django-admin startproject day01</code></p><p>创建完成后能看到有下面文件</p><p><img src="/post/2018-10-22-Django%E5%B0%8F%E7%BB%93%5Cdj.png" alt="dj"></p><p><a href="http://manage.py" target="_blank" rel="noopener">manage.py</a>：是Django用于管理本项目的管理工具集，之后站点运行，数据库自动生成，数据表的修改等都是通过该文件完成。</p><p>_<em>init</em>_.py： 指明该目录结构是一个python包，暂无内容，在后期会初始化一些工具会使用到。</p><p><a href="http://seetings.py" target="_blank" rel="noopener">seetings.py</a>： Django项目的配置文件，其中定义了本项目的引用组件，项目名，数据库，静态资源，调试模式，域名限制等</p><p><a href="http://urls.py" target="_blank" rel="noopener">urls.py</a>：项目的URL路由映射，实现客户端请求url由哪个模块进行响应。</p><p><a href="http://wsgi.py" target="_blank" rel="noopener">wsgi.py</a>：定义WSGI接口信息，通常本文件生成后无需改动</p></li><li><p>启动项目</p><p><code>python manage.py runserver 8080</code></p><p>在8080端口启动django，端口可以不用写，启动会随机分配端口。但是这样就只能自己访问，如果想要所有ip访问就指定ip<code>0.0.0.0:8080</code></p><p>启动后可以便可以访问了http://127.0.0.1:8000/</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">System check identified no issues (0 silenced).</span><br><span class="line">October 22, 2018 - 17:07:22</span><br><span class="line">Django version 1.11, using settings 'day01.settings'</span><br><span class="line">Starting development server at http://127.0.0.1:8000/</span><br><span class="line">Quit the server with CTRL-BREAK.</span><br></pre></td></tr></table></figure><ul><li><p>配置setting.py文件</p><ol><li><p>LANGUAGE_CODE = ‘zh-hans’ 表示中文</p><p>LANGUAGE_CODE = ‘en-us’ 表示英文</p><p>设置时区：TIME_ZONE = ‘Asia/Shanghai’</p><p>UTC：世界标准时间，也就是平常说的零时区。</p><p>北京时间表示东八区时间，即UTC+8</p></li><li><p>由于python3没有自带数据库处理包，需要安装<code>pymysql</code>，在python2中有自带的<code>MySQLdb</code></p><p>安装过后需要在<code>__init__.py</code>中添加</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line"></span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure></li><li><p>修改<code>setting.py</code>中的DATABASE，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES = &#123;</span><br><span class="line">    'default': &#123;</span><br><span class="line">        'ENGINE': 'django.db.backends.mysql',</span><br><span class="line">        'NAME': 'dj',  # 数据库</span><br><span class="line">        'USER': 'root', </span><br><span class="line">        'PASSWORD': '123456',</span><br><span class="line">        'HOST': '127.0.0.1',</span><br><span class="line">        'port': 3306</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>修改完成后执行<code>python manage.py migrate</code>，执行后会创建django需要的数据表，有如下表</p></li></ol></li></ul><p><img src="/post/2018-10-22-Django%E5%B0%8F%E7%BB%93%5Csql.PNG" alt="sql"></p><p>​前面6个表是跟权限相关的表，auth_user是用户表，我们创建一个超级管理员用户</p><p>​<code>python manage.py createsuperuser</code>，账号为admin，输入管理员密码。你就会发现auth_user表中多了一个记录。</p><h2 id="访问管理后台"><a class="header-anchor" href="#访问管理后台"></a>访问管理后台</h2><p>访问<code>http://127.0.0.1:8000/admin/</code></p><p>并登陆</p><p><img src="/post/2018-10-22-Django%E5%B0%8F%E7%BB%93%5Cadmin.png" alt="admin"></p>]]></content>
      
      
      <categories>
          
          <category> Django </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Django </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>知识点总结</title>
      <link href="/post/2018-10-20-%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html"/>
      <url>/post/2018-10-20-%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.html</url>
      
        <content type="html"><![CDATA[<p>一些重要的知识点。</p><p>一些面试题目，加油！</p><a id="more"></a><h1>Python语言特性</h1><h2 id="1-python的函数参数传递"><a class="header-anchor" href="#1-python的函数参数传递"></a>1 Python的函数参数传递</h2><p>看两个例子:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(a)</span>:</span></span><br><span class="line">    a = <span class="number">2</span></span><br><span class="line">fun(a)</span><br><span class="line"><span class="keyword">print</span> a  <span class="comment"># 1</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(a)</span>:</span></span><br><span class="line">    a.append(<span class="number">1</span>)</span><br><span class="line">fun(a)</span><br><span class="line"><span class="keyword">print</span> a  <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure><p>所有的变量都可以理解是内存中一个对象的“引用”，或者，也可以看似c中void*的感觉。</p><p>通过<code>id</code>来看引用<code>a</code>的内存地址可以比较理解：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">a = <span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"func_in"</span>,id(a)   <span class="comment"># func_in 41322472</span></span><br><span class="line">    a = <span class="number">2</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"re-point"</span>,id(a), id(<span class="number">2</span>)   <span class="comment"># re-point 41322448 41322448</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"func_out"</span>,id(a), id(<span class="number">1</span>)  <span class="comment"># func_out 41322472 41322472</span></span><br><span class="line">fun(a)</span><br><span class="line"><span class="keyword">print</span> a  <span class="comment"># 1</span></span><br></pre></td></tr></table></figure><p>注：具体的值在不同电脑上运行时可能不同。</p><p>可以看到，在执行完<code>a = 2</code>之后，<code>a</code>引用中保存的值，即内存地址发生变化，由原来<code>1</code>对象的所在的地址变成了<code>2</code>这个实体对象的内存地址。</p><p>而第2个例子<code>a</code>引用保存的内存值就不会发生变化：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">a = []</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fun</span><span class="params">(a)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"func_in"</span>,id(a)  <span class="comment"># func_in 53629256</span></span><br><span class="line">    a.append(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"func_out"</span>,id(a)     <span class="comment"># func_out 53629256</span></span><br><span class="line">fun(a)</span><br><span class="line"><span class="keyword">print</span> a  <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure><p>这里记住的是类型是属于对象的，而不是变量。而对象有两种,“可更改”（mutable）与“不可更改”（immutable）对象。在python中，strings, tuples, 和numbers是不可更改的对象，而 list, dict, set 等则是可以修改的对象。(这就是这个问题的重点)</p><p>当一个引用传递给函数的时候,函数自动复制一份引用,这个函数里的引用和外边的引用没有半毛关系了.所以第一个例子里函数把引用指向了一个不可变对象,当函数返回的时候,外面的引用没半毛感觉.而第二个例子就不一样了,函数内的引用指向的是可变对象,对它的操作就和定位了指针地址一样,在内存里进行修改.</p><p>如果还不明白的话,这里有更好的解释: <a href="http://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference" target="_blank" rel="noopener">http://stackoverflow.com/questions/986006/how-do-i-pass-a-variable-by-reference</a></p><h2 id="2-python中的元类-metaclass"><a class="header-anchor" href="#2-python中的元类-metaclass"></a>2 Python中的元类(metaclass)</h2><p>这个非常的不常用,但是像ORM这种复杂的结构还是会需要的,详情请看:<a href="http://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python" target="_blank" rel="noopener">http://stackoverflow.com/questions/100003/what-is-a-metaclass-in-python</a></p><h2 id="3-staticmethod和-classmethod"><a class="header-anchor" href="#3-staticmethod和-classmethod"></a>3 @staticmethod和@classmethod</h2><p>Python其实有3个方法,即静态方法(staticmethod),类方法(classmethod)和实例方法,如下:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> <span class="string">"executing foo(%s)"</span>%(x)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self,x)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"executing foo(%s,%s)"</span>%(self,x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">class_foo</span><span class="params">(cls,x)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"executing class_foo(%s,%s)"</span>%(cls,x)</span><br><span class="line"></span><br><span class="line"><span class="meta">    @staticmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">static_foo</span><span class="params">(x)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"executing static_foo(%s)"</span>%x</span><br><span class="line"></span><br><span class="line">a=A()</span><br></pre></td></tr></table></figure><p>这里先理解下函数参数里面的self和cls.这个self和cls是对类或者实例的绑定,对于一般的函数来说我们可以这么调用<code>foo(x)</code>,这个函数就是最常用的,它的工作跟任何东西(类,实例)无关.对于实例方法,我们知道在类里每次定义方法的时候都需要绑定这个实例,就是<code>foo(self, x)</code>,为什么要这么做呢?因为实例方法的调用离不开实例,我们需要把实例自己传给函数,调用的时候是这样的<code>a.foo(x)</code>(其实是<code>foo(a, x)</code>).类方法一样,只不过它传递的是类而不是实例,<code>A.class_foo(x)</code>.注意这里的self和cls可以替换别的参数,但是python的约定是这俩,还是不要改的好.</p><p>对于静态方法其实和普通的方法一样,不需要对谁进行绑定,唯一的区别是调用的时候需要使用<code>a.static_foo(x)</code>或者<code>A.static_foo(x)</code>来调用.</p><table><thead><tr><th style="text-align:left">\</th><th style="text-align:left">实例方法</th><th style="text-align:left">类方法</th><th style="text-align:left">静态方法</th></tr></thead><tbody><tr><td style="text-align:left">a = A()</td><td style="text-align:left">a.foo(x)</td><td style="text-align:left">a.class_foo(x)</td><td style="text-align:left">a.static_foo(x)</td></tr><tr><td style="text-align:left">A</td><td style="text-align:left">不可用</td><td style="text-align:left">A.class_foo(x)</td><td style="text-align:left">A.static_foo(x)</td></tr></tbody></table><p>更多关于这个问题:</p><ol><li><a href="http://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python" target="_blank" rel="noopener">http://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python</a></li><li><a href="https://realpython.com/blog/python/instance-class-and-static-methods-demystified/" target="_blank" rel="noopener">https://realpython.com/blog/python/instance-class-and-static-methods-demystified/</a></li></ol><h2 id="4-类变量和实例变量"><a class="header-anchor" href="#4-类变量和实例变量"></a>4 类变量和实例变量</h2><p><strong>类变量：</strong></p><blockquote><p>是可在类的所有实例之间共享的值（也就是说，它们不是单独分配给每个实例的）。例如下例中，num_of_instance 就是类变量，用于跟踪存在着多少个Test 的实例。</p></blockquote><p><strong>实例变量：</strong></p><blockquote><p>实例化之后，每个实例单独拥有的变量。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Test</span><span class="params">(object)</span>:</span>  </span><br><span class="line">    num_of_instance = <span class="number">0</span>  </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span>  </span><br><span class="line">        self.name = name  </span><br><span class="line">        Test.num_of_instance += <span class="number">1</span>  </span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:  </span><br><span class="line">    <span class="keyword">print</span> Test.num_of_instance   <span class="comment"># 0</span></span><br><span class="line">    t1 = Test(<span class="string">'jack'</span>)  </span><br><span class="line">    <span class="keyword">print</span> Test.num_of_instance   <span class="comment"># 1</span></span><br><span class="line">    t2 = Test(<span class="string">'lucy'</span>)  </span><br><span class="line">    <span class="keyword">print</span> t1.name , t1.num_of_instance  <span class="comment"># jack 2</span></span><br><span class="line">    <span class="keyword">print</span> t2.name , t2.num_of_instance  <span class="comment"># lucy 2</span></span><br></pre></td></tr></table></figure><blockquote><p>补充的例子</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    name=<span class="string">"aaa"</span></span><br><span class="line"></span><br><span class="line">p1=Person()</span><br><span class="line">p2=Person()</span><br><span class="line">p1.name=<span class="string">"bbb"</span></span><br><span class="line"><span class="keyword">print</span> p1.name  <span class="comment"># bbb</span></span><br><span class="line"><span class="keyword">print</span> p2.name  <span class="comment"># aaa</span></span><br><span class="line"><span class="keyword">print</span> Person.name  <span class="comment"># aaa</span></span><br></pre></td></tr></table></figure><p>这里<code>p1.name=&quot;bbb&quot;</code>是实例调用了类变量,这其实和上面第一个问题一样,就是函数传参的问题,<code>p1.name</code>一开始是指向的类变量<code>name=&quot;aaa&quot;</code>,但是在实例的作用域里把类变量的引用改变了,就变成了一个实例变量,self.name不再引用Person的类变量name了.</p><p>可以看看下面的例子:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>:</span></span><br><span class="line">    name=[]</span><br><span class="line"></span><br><span class="line">p1=Person()</span><br><span class="line">p2=Person()</span><br><span class="line">p1.name.append(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">print</span> p1.name  <span class="comment"># [1]</span></span><br><span class="line"><span class="keyword">print</span> p2.name  <span class="comment"># [1]</span></span><br><span class="line"><span class="keyword">print</span> Person.name  <span class="comment"># [1]</span></span><br></pre></td></tr></table></figure><p>参考:<a href="http://stackoverflow.com/questions/6470428/catch-multiple-exceptions-in-one-line-except-block" target="_blank" rel="noopener">http://stackoverflow.com/questions/6470428/catch-multiple-exceptions-in-one-line-except-block</a></p><h2 id="5-python自省"><a class="header-anchor" href="#5-python自省"></a>5 Python自省</h2><p>这个也是python彪悍的特性.</p><p>自省就是面向对象的语言所写的程序在运行时,所能知道对象的类型.简单一句就是运行时能够获得对象的类型.比如type(),dir(),getattr(),hasattr(),isinstance().</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line">b = &#123;<span class="string">'a'</span>:<span class="number">1</span>,<span class="string">'b'</span>:<span class="number">2</span>,<span class="string">'c'</span>:<span class="number">3</span>&#125;</span><br><span class="line">c = <span class="keyword">True</span></span><br><span class="line"><span class="keyword">print</span> type(a),type(b),type(c) <span class="comment"># &lt;type 'list'&gt; &lt;type 'dict'&gt; &lt;type 'bool'&gt;</span></span><br><span class="line"><span class="keyword">print</span> isinstance(a,list)  <span class="comment"># True</span></span><br></pre></td></tr></table></figure><h2 id="6-字典推导式"><a class="header-anchor" href="#6-字典推导式"></a>6 字典推导式</h2><p>可能你见过列表推导时,却没有见过字典推导式,在2.7中才加入的:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">d = &#123;key: value <span class="keyword">for</span> (key, value) <span class="keyword">in</span> iterable&#125;</span><br></pre></td></tr></table></figure><h2 id="7-python中单下划线和双下划线"><a class="header-anchor" href="#7-python中单下划线和双下划线"></a>7 Python中单下划线和双下划线</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">()</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line"><span class="meta">... </span>            self.__superprivate = <span class="string">"Hello"</span></span><br><span class="line"><span class="meta">... </span>            self._semiprivate = <span class="string">", world!"</span></span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mc = MyClass()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mc.__superprivate</span><br><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">"&lt;stdin&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">AttributeError: myClass instance has no attribute <span class="string">'__superprivate'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mc._semiprivate</span><br><span class="line">, world!</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> mc.__dict__</span><br><span class="line">&#123;<span class="string">'_MyClass__superprivate'</span>: <span class="string">'Hello'</span>, <span class="string">'_semiprivate'</span>: <span class="string">', world!'</span>&#125;</span><br></pre></td></tr></table></figure><p><code>__foo__</code>:一种约定,Python内部的名字,用来区别其他用户自定义的命名,以防冲突，就是例如<code>__init__()</code>,<code>__del__()</code>,<code>__call__()</code>这些特殊方法</p><p><code>_foo</code>:一种约定,用来指定变量私有.程序员用来指定私有变量的一种方式.不能用from module import * 导入，其他方面和公有一样访问；</p><p><code>__foo</code>:这个有真正的意义:解析器用<code>_classname__foo</code>来代替这个名字,以区别和其他类相同的命名,它无法直接像公有成员一样随便访问,通过对象名._类名__xxx这样的方式可以访问.</p><p>详情见:<a href="http://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python" target="_blank" rel="noopener">http://stackoverflow.com/questions/1301346/the-meaning-of-a-single-and-a-double-underscore-before-an-object-name-in-python</a></p><p>或者: <a href="http://www.zhihu.com/question/19754941" target="_blank" rel="noopener">http://www.zhihu.com/question/19754941</a></p><h2 id="8-字符串格式化-和-format"><a class="header-anchor" href="#8-字符串格式化-和-format"></a>8 字符串格式化:%和.format</h2><p>.format在许多方面看起来更便利.对于<code>%</code>最烦人的是它无法同时传递一个变量和元组.你可能会想下面的代码不会有什么问题:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"hi there %s"</span> % <span class="built_in">name</span></span><br></pre></td></tr></table></figure><p>但是,如果name恰好是(1,2,3),它将会抛出一个TypeError异常.为了保证它总是正确的,你必须这样做:</p><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"hi there %s"</span> % (<span class="built_in">name</span>,)   <span class="comment"># 提供一个单元素的数组而不是一个参数</span></span><br></pre></td></tr></table></figure><p>但是有点丑…format就没有这些问题.你给的第二个问题也是这样,.format好看多了.</p><p>你为什么不用它?</p><ul><li>不知道它(在读这个之前)</li><li>为了和Python2.5兼容(譬如logging库建议使用<code>%</code>(<a href="https://github.com/taizilongxu/interview_python/issues/4" target="_blank" rel="noopener">issue #4</a>))</li></ul><p><a href="http://stackoverflow.com/questions/5082452/python-string-formatting-vs-format" target="_blank" rel="noopener">http://stackoverflow.com/questions/5082452/python-string-formatting-vs-format</a></p><h2 id="9-迭代器和生成器"><a class="header-anchor" href="#9-迭代器和生成器"></a>9 迭代器和生成器</h2><p>这个是stackoverflow里python排名第一的问题,值得一看: <a href="http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python" target="_blank" rel="noopener">http://stackoverflow.com/questions/231767/what-does-the-yield-keyword-do-in-python</a></p><p>这是中文版: <a href="http://taizilongxu.gitbooks.io/stackoverflow-about-python/content/1/README.html" target="_blank" rel="noopener">http://taizilongxu.gitbooks.io/stackoverflow-about-python/content/1/README.html</a></p><p>这里有个关于生成器的创建问题面试官有考：<br>问：  将列表生成式中[]改成() 之后数据结构是否改变？<br>答案：是，从列表变为生成器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>L = [x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>L</span><br><span class="line">[<span class="number">0</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>, <span class="number">25</span>, <span class="number">36</span>, <span class="number">49</span>, <span class="number">64</span>, <span class="number">81</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g = (x*x <span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">10</span>))</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>g</span><br><span class="line">&lt;generator object &lt;genexpr&gt; at <span class="number">0x0000028F8B774200</span>&gt;</span><br></pre></td></tr></table></figure><p>通过列表生成式，可以直接创建一个列表。但是，受到内存限制，列表容量肯定是有限的。而且，创建一个包含百万元素的列表，不仅是占用很大的内存空间，如：我们只需要访问前面的几个元素，后面大部分元素所占的空间都是浪费的。因此，没有必要创建完整的列表（节省大量内存空间）。在Python中，我们可以采用生成器：边循环，边计算的机制—&gt;generator</p><h2 id="10-args-and-kwargs"><a class="header-anchor" href="#10-args-and-kwargs"></a>10 <code>*args</code> and <code>**kwargs</code></h2><p>用<code>*args</code>和<code>**kwargs</code>只是为了方便并没有强制使用它们.</p><p>当你不确定你的函数里将要传递多少参数时你可以用<code>*args</code>.例如,它可以传递任意数量的参数:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">print_everything</span><span class="params">(*args)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> count, thing <span class="keyword">in</span> enumerate(args):</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">print</span> <span class="string">'&#123;0&#125;. &#123;1&#125;'</span>.format(count, thing)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print_everything(<span class="string">'apple'</span>, <span class="string">'banana'</span>, <span class="string">'cabbage'</span>)</span><br><span class="line"><span class="number">0.</span> apple</span><br><span class="line"><span class="number">1.</span> banana</span><br><span class="line"><span class="number">2.</span> cabbage</span><br></pre></td></tr></table></figure><p>相似的,<code>**kwargs</code>允许你使用没有事先定义的参数名:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">table_things</span><span class="params">(**kwargs)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">for</span> name, value <span class="keyword">in</span> kwargs.items():</span><br><span class="line"><span class="meta">... </span>        <span class="keyword">print</span> <span class="string">'&#123;0&#125; = &#123;1&#125;'</span>.format(name, value)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>table_things(apple = <span class="string">'fruit'</span>, cabbage = <span class="string">'vegetable'</span>)</span><br><span class="line">cabbage = vegetable</span><br><span class="line">apple = fruit</span><br></pre></td></tr></table></figure><p>你也可以混着用.命名参数首先获得参数值然后所有的其他参数都传递给<code>*args</code>和<code>**kwargs</code>.命名参数在列表的最前端.例如:</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">table_things</span><span class="params">(titlestring, **kwargs)</span></span></span><br></pre></td></tr></table></figure><p><code>*args</code>和<code>**kwargs</code>可以同时在函数的定义中,但是<code>*args</code>必须在<code>**kwargs</code>前面.</p><p>当调用函数时你也可以用<code>*</code>和<code>**</code>语法.例如:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="function"><span class="keyword">def</span> <span class="title">print_three_things</span><span class="params">(a, b, c)</span>:</span></span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> <span class="string">'a = &#123;0&#125;, b = &#123;1&#125;, c = &#123;2&#125;'</span>.format(a,b,c)</span><br><span class="line">...</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>mylist = [<span class="string">'aardvark'</span>, <span class="string">'baboon'</span>, <span class="string">'cat'</span>]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>print_three_things(*mylist)</span><br><span class="line"></span><br><span class="line">a = aardvark, b = baboon, c = cat</span><br></pre></td></tr></table></figure><p>就像你看到的一样,它可以传递列表(或者元组)的每一项并把它们解包.注意必须与它们在函数里的参数相吻合.当然,你也可以在函数定义或者函数调用时用*.</p><p><a href="http://stackoverflow.com/questions/3394835/args-and-kwargs" target="_blank" rel="noopener">http://stackoverflow.com/questions/3394835/args-and-kwargs</a></p><h2 id="11-面向切面编程aop和装饰器"><a class="header-anchor" href="#11-面向切面编程aop和装饰器"></a>11 面向切面编程AOP和装饰器</h2><p>这个AOP一听起来有点懵,同学面阿里的时候就被问懵了…</p><p>装饰器是一个很著名的设计模式，经常被用于有切面需求的场景，较为经典的有插入日志、性能测试、事务处理等。装饰器是解决这类问题的绝佳设计，有了装饰器，我们就可以抽离出大量函数中与函数功能本身无关的雷同代码并继续重用。概括的讲，<strong>装饰器的作用就是为已经存在的对象添加额外的功能。</strong></p><p>这个问题比较大,推荐: <a href="http://stackoverflow.com/questions/739654/how-can-i-make-a-chain-of-function-decorators-in-python" target="_blank" rel="noopener">http://stackoverflow.com/questions/739654/how-can-i-make-a-chain-of-function-decorators-in-python</a></p><p>中文: <a href="http://taizilongxu.gitbooks.io/stackoverflow-about-python/content/3/README.html" target="_blank" rel="noopener">http://taizilongxu.gitbooks.io/stackoverflow-about-python/content/3/README.html</a></p><h2 id="12-鸭子类型"><a class="header-anchor" href="#12-鸭子类型"></a>12 鸭子类型</h2><p>“当看到一只鸟走起来像鸭子、游泳起来像鸭子、叫起来也像鸭子，那么这只鸟就可以被称为鸭子。”</p><p>我们并不关心对象是什么类型，到底是不是鸭子，只关心行为。</p><p>比如在python中，有很多file-like的东西，比如StringIO,GzipFile,socket。它们有很多相同的方法，我们把它们当作文件使用。</p><p>又比如list.extend()方法中,我们并不关心它的参数是不是list,只要它是可迭代的,所以它的参数可以是list/tuple/dict/字符串/生成器等.</p><p>鸭子类型在动态语言中经常使用，非常灵活，使得python不想java那样专门去弄一大堆的设计模式。</p><h2 id="13-python中重载"><a class="header-anchor" href="#13-python中重载"></a>13 Python中重载</h2><p>引自知乎:<a href="http://www.zhihu.com/question/20053359" target="_blank" rel="noopener">http://www.zhihu.com/question/20053359</a></p><p>函数重载主要是为了解决两个问题。</p><ol><li>可变参数类型。</li><li>可变参数个数。</li></ol><p>另外，一个基本的设计原则是，仅仅当两个函数除了参数类型和参数个数不同以外，其功能是完全相同的，此时才使用函数重载，如果两个函数的功能其实不同，那么不应当使用重载，而应当使用一个名字不同的函数。</p><p>好吧，那么对于情况 1 ，函数功能相同，但是参数类型不同，python 如何处理？答案是根本不需要处理，因为 python 可以接受任何类型的参数，如果函数的功能相同，那么不同的参数类型在 python 中很可能是相同的代码，没有必要做成两个不同函数。</p><p>那么对于情况 2 ，函数功能相同，但参数个数不同，python 如何处理？大家知道，答案就是缺省参数。对那些缺少的参数设定为缺省参数即可解决问题。因为你假设函数功能相同，那么那些缺少的参数终归是需要用的。</p><p>好了，鉴于情况 1 跟 情况 2 都有了解决方案，python 自然就不需要函数重载了。</p><h2 id="14-新式类和旧式类"><a class="header-anchor" href="#14-新式类和旧式类"></a>14 新式类和旧式类</h2><p>这个面试官问了,我说了老半天,不知道他问的真正意图是什么.</p><p><a href="http://stackoverflow.com/questions/54867/what-is-the-difference-between-old-style-and-new-style-classes-in-python" target="_blank" rel="noopener">stackoverflow</a></p><p>这篇文章很好的介绍了新式类的特性: <a href="http://www.cnblogs.com/btchenguang/archive/2012/09/17/2689146.html" target="_blank" rel="noopener">http://www.cnblogs.com/btchenguang/archive/2012/09/17/2689146.html</a></p><p>新式类很早在2.2就出现了,所以旧式类完全是兼容的问题,Python3里的类全部都是新式类.这里有一个MRO问题可以了解下(新式类是广度优先,旧式类是深度优先),&lt;Python核心编程&gt;里讲的也很多.</p><blockquote><p>一个旧式类的深度优先的例子</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"A"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo2</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span><span class="params">(A)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo1</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">print</span> <span class="string">"C"</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">D</span><span class="params">(B, C)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">d = D()</span><br><span class="line">d.foo1()</span><br><span class="line"></span><br><span class="line"><span class="comment"># A</span></span><br></pre></td></tr></table></figure><p><strong>按照经典类的查找顺序<code>从左到右深度优先</code>的规则，在访问<code>d.foo1()</code>的时候,D这个类是没有的…那么往上查找,先找到B,里面没有,深度优先,访问A,找到了foo1(),所以这时候调用的是A的foo1()，从而导致C重写的foo1()被绕过</strong></p><h2 id="15-new-和-init-的区别"><a class="header-anchor" href="#15-new-和-init-的区别"></a>15 <code>__new__</code>和<code>__init__</code>的区别</h2><p>这个<code>__new__</code>确实很少见到,先做了解吧.</p><ol><li><code>__new__</code>是一个静态方法,而<code>__init__</code>是一个实例方法.</li><li><code>__new__</code>方法会返回一个创建的实例,而<code>__init__</code>什么都不返回.</li><li>只有在<code>__new__</code>返回一个cls的实例时后面的<code>__init__</code>才能被调用.</li><li>当创建一个新实例时调用<code>__new__</code>,初始化一个实例时用<code>__init__</code>.</li></ol><p><a href="http://stackoverflow.com/questions/674304/pythons-use-of-new-and-init" target="_blank" rel="noopener">stackoverflow</a></p><p>ps: <code>__metaclass__</code>是创建类时起作用.所以我们可以分别使用<code>__metaclass__</code>,<code>__new__</code>和<code>__init__</code>来分别在类创建,实例创建和实例初始化的时候做一些小手脚.</p><h2 id="16-单例模式"><a class="header-anchor" href="#16-单例模式"></a>16 单例模式</h2><blockquote><p>单例模式是一种常用的软件设计模式。在它的核心结构中只包含一个被称为单例类的特殊类。通过单例模式可以保证系统中一个类只有一个实例而且该实例易于外界访问，从而方便对实例个数的控制并节约系统资源。如果希望在系统中某个类的对象只能存在一个，单例模式是最好的解决方案。</p><p><code>__new__()</code>在<code>__init__()</code>之前被调用，用于生成实例对象。利用这个方法和类的属性的特点可以实现设计模式的单例模式。单例模式是指创建唯一对象，单例模式设计的类只能实例<br><strong>这个绝对常考啊.绝对要记住1~2个方法,当时面试官是让手写的.</strong></p></blockquote><h3 id="1-使用-new-方法"><a class="header-anchor" href="#1-使用-new-方法"></a>1 使用<code>__new__</code>方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Singleton</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> hasattr(cls, <span class="string">'_instance'</span>):</span><br><span class="line">            orig = super(Singleton, cls)</span><br><span class="line">            cls._instance = orig.__new__(cls, *args, **kw)</span><br><span class="line">        <span class="keyword">return</span> cls._instance</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span><span class="params">(Singleton)</span>:</span></span><br><span class="line">    a = <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="2-共享属性"><a class="header-anchor" href="#2-共享属性"></a>2 共享属性</h3><p>创建实例时把所有实例的<code>__dict__</code>指向同一个字典,这样它们具有相同的属性和方法.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Borg</span><span class="params">(object)</span>:</span></span><br><span class="line">    _state = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__new__</span><span class="params">(cls, *args, **kw)</span>:</span></span><br><span class="line">        ob = super(Borg, cls).__new__(cls, *args, **kw)</span><br><span class="line">        ob.__dict__ = cls._state</span><br><span class="line">        <span class="keyword">return</span> ob</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass2</span><span class="params">(Borg)</span>:</span></span><br><span class="line">    a = <span class="number">1</span></span><br></pre></td></tr></table></figure><h3 id="3-装饰器版本"><a class="header-anchor" href="#3-装饰器版本"></a>3 装饰器版本</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">singleton</span><span class="params">(cls)</span>:</span></span><br><span class="line">    instances = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getinstance</span><span class="params">(*args, **kw)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> cls <span class="keyword">not</span> <span class="keyword">in</span> instances:</span><br><span class="line">            instances[cls] = cls(*args, **kw)</span><br><span class="line">        <span class="keyword">return</span> instances[cls]</span><br><span class="line">    <span class="keyword">return</span> getinstance</span><br><span class="line"></span><br><span class="line"><span class="meta">@singleton</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyClass</span>:</span></span><br><span class="line">  ...</span><br></pre></td></tr></table></figure><h3 id="4-import方法"><a class="header-anchor" href="#4-import方法"></a>4 import方法</h3><p>作为python的模块是天然的单例模式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mysingleton.py</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">My_Singleton</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line">my_singleton = My_Singleton()</span><br><span class="line"></span><br><span class="line"><span class="comment"># to use</span></span><br><span class="line"><span class="keyword">from</span> mysingleton <span class="keyword">import</span> my_singleton</span><br><span class="line"></span><br><span class="line">my_singleton.foo()</span><br></pre></td></tr></table></figure><p><strong><a href="http://python.jobbole.com/87294/" target="_blank" rel="noopener">单例模式伯乐在线详细解释</a></strong></p><h2 id="17-python中的作用域"><a class="header-anchor" href="#17-python中的作用域"></a>17 Python中的作用域</h2><p>Python 中，一个变量的作用域总是由在代码中被赋值的地方所决定的。</p><p>当 Python 遇到一个变量的话他会按照这样的顺序进行搜索：</p><p>本地作用域（Local）→当前作用域被嵌入的本地作用域（Enclosing locals）→全局/模块作用域（Global）→内置作用域（Built-in）</p><h2 id="18-gil线程全局锁"><a class="header-anchor" href="#18-gil线程全局锁"></a>18 GIL线程全局锁</h2><p>线程全局锁(Global Interpreter Lock),即Python为了保证线程安全而采取的独立线程运行的限制,说白了就是一个核只能在同一时间运行一个线程.<strong>对于io密集型任务，python的多线程起到作用，但对于cpu密集型任务，python的多线程几乎占不到任何优势，还有可能因为争夺资源而变慢。</strong></p><p>见<a href="http://www.oschina.net/translate/pythons-hardest-problem" target="_blank" rel="noopener">Python 最难的问题</a></p><p>解决办法就是多进程和下面的协程(协程也只是单CPU,但是能减小切换代价提升性能).</p><h2 id="19-协程"><a class="header-anchor" href="#19-协程"></a>19 协程</h2><p>知乎被问到了,呵呵哒,跪了</p><p>简单点说协程是进程和线程的升级版,进程和线程都面临着内核态和用户态的切换问题而耗费许多切换时间,而协程就是用户自己控制切换的时机,不再需要陷入系统的内核态.</p><p>Python里最常见的yield就是协程的思想!可以查看第九个问题.</p><h2 id="20-闭包"><a class="header-anchor" href="#20-闭包"></a>20 闭包</h2><p>闭包(closure)是函数式编程的重要的语法结构。闭包也是一种组织代码的结构，它同样提高了代码的可重复使用性。</p><p>当一个内嵌函数引用其外部作作用域的变量,我们就会得到一个闭包. 总结一下,创建一个闭包必须满足以下几点:</p><ol><li>必须有一个内嵌函数</li><li>内嵌函数必须引用外部函数中的变量</li><li>外部函数的返回值必须是内嵌函数</li></ol><p>感觉闭包还是有难度的,几句话是说不明白的,还是查查相关资料.</p><p>重点是函数运行后并不会被撤销,就像16题的instance字典一样,当函数运行完后,instance并不被销毁,而是继续留在内存空间里.这个功能类似类里的类变量,只不过迁移到了函数上.</p><p>闭包就像个空心球一样,你知道外面和里面,但你不知道中间是什么样.</p><h2 id="21-lambda函数"><a class="header-anchor" href="#21-lambda函数"></a>21 lambda函数</h2><p>其实就是一个匿名函数,为什么叫lambda?因为和后面的函数式编程有关.</p><p>推荐: <a href="http://www.zhihu.com/question/20125256" target="_blank" rel="noopener">知乎</a></p><h2 id="22-python函数式编程"><a class="header-anchor" href="#22-python函数式编程"></a>22 Python函数式编程</h2><p>这个需要适当的了解一下吧,毕竟函数式编程在Python中也做了引用.</p><p>推荐: <a href="http://coolshell.cn/articles/10822.html" target="_blank" rel="noopener">酷壳</a></p><p>python中函数式编程支持:</p><p>filter 函数的功能相当于过滤器。调用一个布尔函数<code>bool_func</code>来迭代遍历每个seq中的元素；返回一个使<code>bool_seq</code>返回值为true的元素的序列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>]</span><br><span class="line">&gt;&gt;&gt;b = filter(<span class="keyword">lambda</span> x: x &gt; <span class="number">5</span>, a)</span><br><span class="line">&gt;&gt;&gt;<span class="keyword">print</span> b</span><br><span class="line">&gt;&gt;&gt;[<span class="number">6</span>,<span class="number">7</span>]</span><br></pre></td></tr></table></figure><p>map函数是对一个序列的每个项依次执行函数，下面是对一个序列每个项都乘以2：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>a = map(<span class="keyword">lambda</span> x:x*<span class="number">2</span>,[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>list(a)</span><br><span class="line">[<span class="number">2</span>, <span class="number">4</span>, <span class="number">6</span>]</span><br></pre></td></tr></table></figure><p>reduce函数是对一个序列的每个项迭代调用函数，下面是求3的阶乘：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>reduce(<span class="keyword">lambda</span> x,y:x*y,range(<span class="number">1</span>,<span class="number">4</span>))</span><br><span class="line"><span class="number">6</span></span><br></pre></td></tr></table></figure><h2 id="23-python里的拷贝"><a class="header-anchor" href="#23-python里的拷贝"></a>23 Python里的拷贝</h2><p>引用和copy(),deepcopy()的区别</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> copy</span><br><span class="line">a = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>]]  <span class="comment">#原始对象</span></span><br><span class="line"></span><br><span class="line">b = a  <span class="comment">#赋值，传对象的引用</span></span><br><span class="line">c = copy.copy(a)  <span class="comment">#对象拷贝，浅拷贝</span></span><br><span class="line">d = copy.deepcopy(a)  <span class="comment">#对象拷贝，深拷贝</span></span><br><span class="line"></span><br><span class="line">a.append(<span class="number">5</span>)  <span class="comment">#修改对象a</span></span><br><span class="line">a[<span class="number">4</span>].append(<span class="string">'c'</span>)  <span class="comment">#修改对象a中的['a', 'b']数组对象</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">'a = '</span>, a</span><br><span class="line"><span class="keyword">print</span> <span class="string">'b = '</span>, b</span><br><span class="line"><span class="keyword">print</span> <span class="string">'c = '</span>, c</span><br><span class="line"><span class="keyword">print</span> <span class="string">'d = '</span>, d</span><br><span class="line"></span><br><span class="line">输出结果：</span><br><span class="line">a =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">5</span>]</span><br><span class="line">b =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>], <span class="number">5</span>]</span><br><span class="line">c =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>]]</span><br><span class="line">d =  [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, [<span class="string">'a'</span>, <span class="string">'b'</span>]]</span><br></pre></td></tr></table></figure><h2 id="24-python垃圾回收机制"><a class="header-anchor" href="#24-python垃圾回收机制"></a>24 Python垃圾回收机制</h2><p>Python GC主要使用引用计数（reference counting）来跟踪和回收垃圾。在引用计数的基础上，通过“标记-清除”（mark and sweep）解决容器对象可能产生的循环引用问题，通过“分代回收”（generation collection）以空间换时间的方法提高垃圾回收效率。</p><h3 id="1-引用计数"><a class="header-anchor" href="#1-引用计数"></a>1 引用计数</h3><p>PyObject是每个对象必有的内容，其中<code>ob_refcnt</code>就是做为引用计数。当一个对象有新的引用时，它的<code>ob_refcnt</code>就会增加，当引用它的对象被删除，它的<code>ob_refcnt</code>就会减少.引用计数为0时，该对象生命就结束了。</p><p>优点:</p><ol><li>简单</li><li>实时性</li></ol><p>缺点:</p><ol><li>维护引用计数消耗资源</li><li>循环引用</li></ol><h3 id="2-标记-清除机制"><a class="header-anchor" href="#2-标记-清除机制"></a>2 标记-清除机制</h3><p>基本思路是先按需分配，等到没有空闲内存的时候从寄存器和程序栈上的引用出发，遍历以对象为节点、以引用为边构成的图，把所有可以访问到的对象打上标记，然后清扫一遍内存空间，把所有没标记的对象释放。</p><h3 id="3-分代技术"><a class="header-anchor" href="#3-分代技术"></a>3 分代技术</h3><p>分代回收的整体思想是：将系统中的所有内存块根据其存活时间划分为不同的集合，每个集合就成为一个“代”，垃圾收集频率随着“代”的存活时间的增大而减小，存活时间通常利用经过几次垃圾回收来度量。</p><p>Python默认定义了三代对象集合，索引数越大，对象存活时间越长。</p><p>举例：<br>当某些内存块M经过了3次垃圾收集的清洗之后还存活时，我们就将内存块M划到一个集合A中去，而新分配的内存都划分到集合B中去。当垃圾收集开始工作时，大多数情况都只对集合B进行垃圾回收，而对集合A进行垃圾回收要隔相当长一段时间后才进行，这就使得垃圾收集机制需要处理的内存少了，效率自然就提高了。在这个过程中，集合B中的某些内存块由于存活时间长而会被转移到集合A中，当然，集合A中实际上也存在一些垃圾，这些垃圾的回收会因为这种分代的机制而被延迟。</p><h2 id="25-python的list"><a class="header-anchor" href="#25-python的list"></a>25 Python的List</h2><p>推荐: <a href="http://www.jianshu.com/p/J4U6rR" target="_blank" rel="noopener">http://www.jianshu.com/p/J4U6rR</a></p><h2 id="26-python的is"><a class="header-anchor" href="#26-python的is"></a>26 Python的is</h2><p>is是对比地址,==是对比值</p><h2 id="27-read-readline和readlines"><a class="header-anchor" href="#27-read-readline和readlines"></a>27 read,readline和readlines</h2><ul><li>read        读取整个文件</li><li>readline    读取下一行,使用生成器方法</li><li>readlines   读取整个文件到一个迭代器以供我们遍历</li></ul><h2 id="28-python2和3的区别"><a class="header-anchor" href="#28-python2和3的区别"></a>28 Python2和3的区别</h2><p>推荐：<a href="http://chenqx.github.io/2014/11/10/Key-differences-between-Python-2-7-x-and-Python-3-x/" target="_blank" rel="noopener">Python 2.7.x 与 Python 3.x 的主要差异</a></p><h2 id="29-super-init"><a class="header-anchor" href="#29-super-init"></a>29 super init</h2><p>super() lets you avoid referring to the base class explicitly, which can be nice. But the main advantage comes with multiple inheritance, where all sorts of fun stuff can happen. See the standard docs on super if you haven’t already.</p><p>Note that the syntax changed in Python 3.0: you can just say super().<code>__init__</code>() instead of super(ChildB, self).<code>__init__</code>() which IMO is quite a bit nicer.</p><p><a href="http://stackoverflow.com/questions/576169/understanding-python-super-with-init-methods" target="_blank" rel="noopener">http://stackoverflow.com/questions/576169/understanding-python-super-with-init-methods</a></p><p><a href="http://blog.csdn.net/mrlevo520/article/details/51712440" target="_blank" rel="noopener">Python2.7中的super方法浅见</a></p><h2 id="30-range-and-xrange"><a class="header-anchor" href="#30-range-and-xrange"></a>30 range and xrange</h2><p>都在循环时使用，xrange内存性能更好。<br>for i in range(0, 20):<br>for i in xrange(0, 20):<br>What is the difference between range and xrange functions in Python 2.X?<br>range creates a list, so if you do range(1, 10000000) it creates a list in memory with 9999999 elements.<br>xrange is a sequence object that evaluates lazily.</p><p><a href="http://stackoverflow.com/questions/94935/what-is-the-difference-between-range-and-xrange-functions-in-python-2-x" target="_blank" rel="noopener">http://stackoverflow.com/questions/94935/what-is-the-difference-between-range-and-xrange-functions-in-python-2-x</a></p><h1>操作系统</h1><h2 id="1-select-poll和epoll"><a class="header-anchor" href="#1-select-poll和epoll"></a>1 select,poll和epoll</h2><p>其实所有的I/O都是轮询的方法,只不过实现的层面不同罢了.</p><p>这个问题可能有点深入了,但相信能回答出这个问题是对I/O多路复用有很好的了解了.其中tornado使用的就是epoll的.</p><p><a href="http://www.cnblogs.com/Anker/p/3265058.html" target="_blank" rel="noopener">selec,poll和epoll区别总结</a></p><p>基本上select有3个缺点:</p><ol><li>连接数受限</li><li>查找配对速度慢</li><li>数据由内核拷贝到用户态</li></ol><p>poll改善了第一个缺点</p><p>epoll改了三个缺点.</p><p>关于epoll的: <a href="http://www.cnblogs.com/my_life/articles/3968782.html" target="_blank" rel="noopener">http://www.cnblogs.com/my_life/articles/3968782.html</a></p><h2 id="2-调度算法"><a class="header-anchor" href="#2-调度算法"></a>2 调度算法</h2><ol><li>先来先服务(FCFS, First Come First Serve)</li><li>短作业优先(SJF, Shortest Job First)</li><li>最高优先权调度(Priority Scheduling)</li><li>时间片轮转(RR, Round Robin)</li><li>多级反馈队列调度(multilevel feedback queue scheduling)</li></ol><p>常见的调度算法总结:<a href="http://www.jianshu.com/p/6edf8174c1eb" target="_blank" rel="noopener">http://www.jianshu.com/p/6edf8174c1eb</a></p><p>实时调度算法:</p><ol><li>最早截至时间优先 EDF</li><li>最低松弛度优先 LLF</li></ol><h2 id="3-死锁"><a class="header-anchor" href="#3-死锁"></a>3 死锁</h2><p>原因:</p><ol><li>竞争资源</li><li>程序推进顺序不当</li></ol><p>必要条件:</p><ol><li>互斥条件</li><li>请求和保持条件</li><li>不剥夺条件</li><li>环路等待条件</li></ol><p>处理死锁基本方法:</p><ol><li>预防死锁(摒弃除1以外的条件)</li><li>避免死锁(银行家算法)</li><li>检测死锁(资源分配图)</li><li>解除死锁<ol><li>剥夺资源</li><li>撤销进程</li></ol></li></ol><p>死锁概念处理策略详细介绍:<a href="https://wizardforcel.gitbooks.io/wangdaokaoyan-os/content/10.html" target="_blank" rel="noopener">https://wizardforcel.gitbooks.io/wangdaokaoyan-os/content/10.html</a></p><h2 id="4-程序编译与链接"><a class="header-anchor" href="#4-程序编译与链接"></a>4 程序编译与链接</h2><p>推荐: <a href="http://www.ruanyifeng.com/blog/2014/11/compiler.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2014/11/compiler.html</a></p><p>Bulid过程可以分解为4个步骤:预处理(Prepressing), 编译(Compilation)、汇编(Assembly)、链接(Linking)</p><p>以c语言为例:</p><h3 id="1-预处理"><a class="header-anchor" href="#1-预处理"></a>1 预处理</h3><p>预编译过程主要处理那些源文件中的以“#”开始的预编译指令，主要处理规则有：</p><ol><li>将所有的“#define”删除，并展开所用的宏定义</li><li>处理所有条件预编译指令，比如“#if”、“#ifdef”、 “#elif”、“#endif”</li><li>处理“#include”预编译指令，将被包含的文件插入到该编译指令的位置，注：此过程是递归进行的</li><li>删除所有注释</li><li>添加行号和文件名标识，以便于编译时编译器产生调试用的行号信息以及用于编译时产生编译错误或警告时可显示行号</li><li>保留所有的#pragma编译器指令。</li></ol><h3 id="2-编译"><a class="header-anchor" href="#2-编译"></a>2 编译</h3><p>编译过程就是把预处理完的文件进行一系列的词法分析、语法分析、语义分析及优化后生成相应的汇编代码文件。这个过程是整个程序构建的核心部分。</p><h3 id="3-汇编"><a class="header-anchor" href="#3-汇编"></a>3 汇编</h3><p>汇编器是将汇编代码转化成机器可以执行的指令，每一条汇编语句几乎都是一条机器指令。经过编译、链接、汇编输出的文件成为目标文件(Object File)</p><h3 id="4-链接"><a class="header-anchor" href="#4-链接"></a>4 链接</h3><p>链接的主要内容就是把各个模块之间相互引用的部分处理好，使各个模块可以正确的拼接。<br>链接的主要过程包块 地址和空间的分配（Address and Storage Allocation）、符号决议(Symbol Resolution)和重定位(Relocation)等步骤。</p><h2 id="5-静态链接和动态链接"><a class="header-anchor" href="#5-静态链接和动态链接"></a>5 静态链接和动态链接</h2><p>静态链接方法：静态链接的时候，载入代码就会把程序会用到的动态代码或动态代码的地址确定下来<br>静态库的链接可以使用静态链接，动态链接库也可以使用这种方法链接导入库</p><p>动态链接方法：使用这种方式的程序并不在一开始就完成动态链接，而是直到真正调用动态库代码时，载入程序才计算(被调用的那部分)动态代码的逻辑地址，然后等到某个时候，程序又需要调用另外某块动态代码时，载入程序又去计算这部分代码的逻辑地址，所以，这种方式使程序初始化时间较短，但运行期间的性能比不上静态链接的程序</p><h2 id="6-虚拟内存技术"><a class="header-anchor" href="#6-虚拟内存技术"></a>6 虚拟内存技术</h2><p>虚拟存储器是指具有请求调入功能和置换功能,能从逻辑上对内存容量加以扩充的一种存储系统.</p><h2 id="7-分页和分段"><a class="header-anchor" href="#7-分页和分段"></a>7 分页和分段</h2><p>分页: 用户程序的地址空间被划分成若干固定大小的区域，称为“页”，相应地，内存空间分成若干个物理块，页和块的大小相等。可将用户程序的任一页放在内存的任一块中，实现了离散分配。</p><p>分段: 将用户程序地址空间分成若干个大小不等的段，每段可以定义一组相对完整的逻辑信息。存储分配时，以段为单位，段与段在内存中可以不相邻接，也实现了离散分配。</p><h3 id="分页与分段的主要区别"><a class="header-anchor" href="#分页与分段的主要区别"></a>分页与分段的主要区别</h3><ol><li>页是信息的物理单位,分页是为了实现非连续分配,以便解决内存碎片问题,或者说分页是由于系统管理的需要.段是信息的逻辑单位,它含有一组意义相对完整的信息,分段的目的是为了更好地实现共享,满足用户的需要.</li><li>页的大小固定,由系统确定,将逻辑地址划分为页号和页内地址是由机器硬件实现的.而段的长度却不固定,决定于用户所编写的程序,通常由编译程序在对源程序进行编译时根据信息的性质来划分.</li><li>分页的作业地址空间是一维的.分段的地址空间是二维的.</li></ol><h2 id="8-页面置换算法"><a class="header-anchor" href="#8-页面置换算法"></a>8 页面置换算法</h2><ol><li>最佳置换算法OPT:不可能实现</li><li>先进先出FIFO</li><li>最近最久未使用算法LRU:最近一段时间里最久没有使用过的页面予以置换.</li><li>clock算法</li></ol><h2 id="9-边沿触发和水平触发"><a class="header-anchor" href="#9-边沿触发和水平触发"></a>9 边沿触发和水平触发</h2><p>边缘触发是指每当状态变化时发生一个 io 事件，条件触发是只要满足条件就发生一个 io 事件</p><h1>数据库</h1><h2 id="1-事务"><a class="header-anchor" href="#1-事务"></a>1 事务</h2><p>数据库事务(Database Transaction) ，是指作为单个逻辑工作单元执行的一系列操作，要么完全地执行，要么完全地不执行。<br>彻底理解数据库事务: <a href="http://www.hollischuang.com/archives/898" target="_blank" rel="noopener">http://www.hollischuang.com/archives/898</a></p><h2 id="2-数据库索引"><a class="header-anchor" href="#2-数据库索引"></a>2 数据库索引</h2><p>推荐: <a href="http://tech.meituan.com/mysql-index.html" target="_blank" rel="noopener">http://tech.meituan.com/mysql-index.html</a></p><p><a href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html" target="_blank" rel="noopener">MySQL索引背后的数据结构及算法原理</a></p><p>聚集索引,非聚集索引,B-Tree,B+Tree,最左前缀原理</p><h2 id="3-redis原理"><a class="header-anchor" href="#3-redis原理"></a>3 Redis原理</h2><h3 id="redis是什么？"><a class="header-anchor" href="#redis是什么？"></a>Redis是什么？</h3><ol><li>是一个完全开源免费的key-value内存数据库</li><li>通常被认为是一个数据结构服务器，主要是因为其有着丰富的数据结构 strings、map、 list、sets、 sorted sets</li></ol><h3 id="redis数据库"><a class="header-anchor" href="#redis数据库"></a>Redis数据库</h3><blockquote><p>通常局限点来说，Redis也以消息队列的形式存在，作为内嵌的List存在，满足实时的高并发需求。在使用缓存的时候，redis比memcached具有更多的优势，并且支持更多的数据类型，把redis当作一个中间存储系统，用来处理高并发的数据库操作</p></blockquote><ul><li>速度快：使用标准C写，所有数据都在内存中完成，读写速度分别达到10万/20万</li><li>持久化：对数据的更新采用Copy-on-write技术，可以异步地保存到磁盘上，主要有两种策略，一是根据时间，更新次数的快照（save 300 10 ）二是基于语句追加方式(Append-only file，aof)</li><li>自动操作：对不同数据类型的操作都是自动的，很安全</li><li>快速的主–从复制，官方提供了一个数据，Slave在21秒即完成了对Amazon网站10G key set的复制。</li><li>Sharding技术： 很容易将数据分布到多个Redis实例中，数据库的扩展是个永恒的话题，在关系型数据库中，主要是以添加硬件、以分区为主要技术形式的纵向扩展解决了很多的应用场景，但随着web2.0、移动互联网、云计算等应用的兴起，这种扩展模式已经不太适合了，所以近年来，像采用主从配置、数据库复制形式的，Sharding这种技术把负载分布到多个特理节点上去的横向扩展方式用处越来越多。</li></ul><h3 id="redis缺点"><a class="header-anchor" href="#redis缺点"></a>Redis缺点</h3><ul><li>是数据库容量受到物理内存的限制,不能用作海量数据的高性能读写,因此Redis适合的场景主要局限在较小数据量的高性能操作和运算上。</li><li>Redis较难支持在线扩容，在集群容量达到上限时在线扩容会变得很复杂。为避免这一问题，运维人员在系统上线时必须确保有足够的空间，这对资源造成了很大的浪费。</li></ul><h2 id="4-乐观锁和悲观锁"><a class="header-anchor" href="#4-乐观锁和悲观锁"></a>4 乐观锁和悲观锁</h2><p>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作</p><p>乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。</p><p>乐观锁与悲观锁的具体区别: <a href="http://www.cnblogs.com/Bob-FD/p/3352216.html" target="_blank" rel="noopener">http://www.cnblogs.com/Bob-FD/p/3352216.html</a></p><h2 id="5-mvcc"><a class="header-anchor" href="#5-mvcc"></a>5 MVCC</h2><blockquote><p>全称是Multi-Version Concurrent Control，即多版本并发控制，在MVCC协议下，每个读操作会看到一个一致性的snapshot，并且可以实现非阻塞的读。MVCC允许数据具有多个版本，这个版本可以是时间戳或者是全局递增的事务ID，在同一个时间点，不同的事务看到的数据是不同的。</p></blockquote><h3 id="mysql的innodb引擎是如何实现mvcc的"><a class="header-anchor" href="#mysql的innodb引擎是如何实现mvcc的"></a><a href="http://lib.csdn.net/base/mysql" target="_blank" rel="noopener">MySQL</a>的innodb引擎是如何实现MVCC的</h3><p>innodb会为每一行添加两个字段，分别表示该行<strong>创建的版本</strong>和<strong>删除的版本</strong>，填入的是事务的版本号，这个版本号随着事务的创建不断递增。在repeated read的隔离级别（<a href="http://blog.csdn.net/chosen0ne/article/details/10036775" target="_blank" rel="noopener">事务的隔离级别请看这篇文章</a>）下，具体各种数据库操作的实现：</p><ul><li>select：满足以下两个条件innodb会返回该行数据：<ul><li>该行的创建版本号小于等于当前版本号，用于保证在select操作之前所有的操作已经执行落地。</li><li>该行的删除版本号大于当前版本或者为空。删除版本号大于当前版本意味着有一个并发事务将该行删除了。</li></ul></li><li>insert：将新插入的行的创建版本号设置为当前系统的版本号。</li><li>delete：将要删除的行的删除版本号设置为当前系统的版本号。</li><li>update：不执行原地update，而是转换成insert + delete。将旧行的删除版本号设置为当前版本号，并将新行insert同时设置创建版本号为当前版本号。</li></ul><p>其中，写操作（insert、delete和update）执行时，需要将系统版本号递增。</p><pre><code>由于旧数据并不真正的删除，所以必须对这些数据进行清理，innodb会开启一个后台线程执行清理工作，具体的规则是将删除版本号小于当前系统版本的行删除，这个过程叫做purge。</code></pre><p>通过MVCC很好的实现了事务的隔离性，可以达到repeated read级别，要实现serializable还必须加锁。</p><blockquote><p>参考：<a href="http://blog.csdn.net/chosen0ne/article/details/18093187" target="_blank" rel="noopener">MVCC浅析</a></p></blockquote><h2 id="6-myisam和innodb"><a class="header-anchor" href="#6-myisam和innodb"></a>6 MyISAM和InnoDB</h2><p>MyISAM 适合于一些需要大量查询的应用，但其对于有大量写操作并不是很好。甚至你只是需要update一个字段，整个表都会被锁起来，而别的进程，就算是读进程都无法操作直到读操作完成。另外，MyISAM 对于 SELECT COUNT(*) 这类的计算是超快无比的。</p><p>InnoDB 的趋势会是一个非常复杂的存储引擎，对于一些小的应用，它会比 MyISAM 还慢。他是它支持“行锁” ，于是在写操作比较多的时候，会更优秀。并且，他还支持更多的高级应用，比如：事务。</p><p>mysql 数据库引擎: <a href="http://www.cnblogs.com/0201zcr/p/5296843.html" target="_blank" rel="noopener">http://www.cnblogs.com/0201zcr/p/5296843.html</a><br>MySQL存储引擎－－MyISAM与InnoDB区别: <a href="https://segmentfault.com/a/1190000008227211" target="_blank" rel="noopener">https://segmentfault.com/a/1190000008227211</a></p><h1>网络</h1><h2 id="1-三次握手"><a class="header-anchor" href="#1-三次握手"></a>1 三次握手</h2><ol><li>客户端通过向服务器端发送一个SYN来创建一个主动打开，作为三次握手的一部分。客户端把这段连接的序号设定为随机数 A。</li><li>服务器端应当为一个合法的SYN回送一个SYN/ACK。ACK 的确认码应为 A+1，SYN/ACK 包本身又有一个随机序号 B。</li><li>最后，客户端再发送一个ACK。当服务端受到这个ACK的时候，就完成了三路握手，并进入了连接创建状态。此时包序号被设定为收到的确认号 A+1，而响应则为 B+1。</li></ol><h2 id="2-四次挥手"><a class="header-anchor" href="#2-四次挥手"></a>2 四次挥手</h2><p><em>注意: 中断连接端可以是客户端，也可以是服务器端. 下面仅以客户端断开连接举例, 反之亦然.</em></p><ol><li>客户端发送一个数据分段, 其中的 FIN 标记设置为1. 客户端进入 FIN-WAIT 状态. 该状态下客户端只接收数据, 不再发送数据.</li><li>服务器接收到带有 FIN = 1 的数据分段, 发送带有 ACK = 1 的剩余数据分段, 确认收到客户端发来的 FIN 信息.</li><li>服务器等到所有数据传输结束, 向客户端发送一个带有 FIN = 1 的数据分段, 并进入 CLOSE-WAIT 状态, 等待客户端发来带有 ACK = 1 的确认报文.</li><li>客户端收到服务器发来带有 FIN = 1 的报文, 返回 ACK = 1 的报文确认, 为了防止服务器端未收到需要重发, 进入 TIME-WAIT 状态. 服务器接收到报文后关闭连接. 客户端等待 2MSL 后未收到回复, 则认为服务器成功关闭, 客户端关闭连接.</li></ol><p>图解: <a href="http://blog.csdn.net/whuslei/article/details/6667471" target="_blank" rel="noopener">http://blog.csdn.net/whuslei/article/details/6667471</a></p><h2 id="3-arp协议"><a class="header-anchor" href="#3-arp协议"></a>3 ARP协议</h2><p>地址解析协议(Address Resolution Protocol)，其基本功能为透过目标设备的IP地址，查询目标的MAC地址，以保证通信的顺利进行。它是IPv4网络层必不可少的协议，不过在IPv6中已不再适用，并被邻居发现协议（NDP）所替代。</p><h2 id="4-urllib和urllib2的区别"><a class="header-anchor" href="#4-urllib和urllib2的区别"></a>4 urllib和urllib2的区别</h2><p>这个面试官确实问过,当时答的urllib2可以Post而urllib不可以.</p><ol><li>urllib提供urlencode方法用来GET查询字符串的产生，而urllib2没有。这是为何urllib常和urllib2一起使用的原因。</li><li>urllib2可以接受一个Request类的实例来设置URL请求的headers，urllib仅可以接受URL。这意味着，你不可以伪装你的User Agent字符串等。</li></ol><h2 id="5-post和get"><a class="header-anchor" href="#5-post和get"></a>5 Post和Get</h2><p><a href="http://www.cnblogs.com/nankezhishi/archive/2012/06/09/getandpost.html" target="_blank" rel="noopener">GET和POST有什么区别？及为什么网上的多数答案都是错的</a><br><a href="https://www.zhihu.com/question/31640769?rf=37401322" target="_blank" rel="noopener">知乎回答</a></p><p>get: <a href="http://tools.ietf.org/html/rfc2616#section-9.3" target="_blank" rel="noopener">RFC 2616 - Hypertext Transfer Protocol – HTTP/1.1</a><br>post: <a href="http://tools.ietf.org/html/rfc2616#section-9.5" target="_blank" rel="noopener">RFC 2616 - Hypertext Transfer Protocol – HTTP/1.1</a></p><h2 id="6-cookie和session"><a class="header-anchor" href="#6-cookie和session"></a>6 Cookie和Session</h2><table><thead><tr><th style="text-align:left"></th><th style="text-align:left">Cookie</th><th style="text-align:left">Session</th></tr></thead><tbody><tr><td style="text-align:left">储存位置</td><td style="text-align:left">客户端</td><td style="text-align:left">服务器端</td></tr><tr><td style="text-align:left">目的</td><td style="text-align:left">跟踪会话，也可以保存用户偏好设置或者保存用户名密码等</td><td style="text-align:left">跟踪会话</td></tr><tr><td style="text-align:left">安全性</td><td style="text-align:left">不安全</td><td style="text-align:left">安全</td></tr></tbody></table><p>session技术是要使用到cookie的，之所以出现session技术，主要是为了安全。</p><h2 id="7-apache和nginx的区别"><a class="header-anchor" href="#7-apache和nginx的区别"></a>7 apache和nginx的区别</h2><p>nginx 相对 apache 的优点：</p><ul><li>轻量级，同样起web 服务，比apache 占用更少的内存及资源</li><li>抗并发，nginx 处理请求是异步非阻塞的，支持更多的并发连接，而apache 则是阻塞型的，在高并发下nginx 能保持低资源低消耗高性能</li><li>配置简洁</li><li>高度模块化的设计，编写模块相对简单</li><li>社区活跃</li></ul><p>apache 相对nginx 的优点：</p><ul><li>rewrite ，比nginx 的rewrite 强大</li><li>模块超多，基本想到的都可以找到</li><li>少bug ，nginx 的bug 相对较多</li><li>超稳定</li></ul><h2 id="8-网站用户密码保存"><a class="header-anchor" href="#8-网站用户密码保存"></a>8 网站用户密码保存</h2><ol><li>明文保存</li><li>明文hash后保存,如md5</li><li>MD5+Salt方式,这个salt可以随机</li><li>知乎使用了Bcrypy(好像)加密</li></ol><h2 id="9-http和https"><a class="header-anchor" href="#9-http和https"></a>9 HTTP和HTTPS</h2><table><thead><tr><th style="text-align:left">状态码</th><th style="text-align:left">定义</th></tr></thead><tbody><tr><td style="text-align:left">1xx 报告</td><td style="text-align:left">接收到请求，继续进程</td></tr><tr><td style="text-align:left">2xx 成功</td><td style="text-align:left">步骤成功接收，被理解，并被接受</td></tr><tr><td style="text-align:left">3xx 重定向</td><td style="text-align:left">为了完成请求,必须采取进一步措施</td></tr><tr><td style="text-align:left">4xx 客户端出错</td><td style="text-align:left">请求包括错的顺序或不能完成</td></tr><tr><td style="text-align:left">5xx 服务器出错</td><td style="text-align:left">服务器无法完成显然有效的请求</td></tr></tbody></table><p>403: Forbidden<br>404: Not Found</p><p>HTTPS握手,对称加密,非对称加密,TLS/SSL,RSA</p><h2 id="10-xsrf和xss"><a class="header-anchor" href="#10-xsrf和xss"></a>10 XSRF和XSS</h2><ul><li>CSRF(Cross-site request forgery)跨站请求伪造</li><li>XSS(Cross Site Scripting)跨站脚本攻击</li></ul><p>CSRF重点在请求,XSS重点在脚本</p><h2 id="11-幂等-idempotence"><a class="header-anchor" href="#11-幂等-idempotence"></a>11 幂等 Idempotence</h2><p>HTTP方法的幂等性是指一次和多次请求某一个资源应该具有同样的<strong>副作用</strong>。(注意是副作用)</p><p><code>GET http://www.bank.com/account/123456</code>，不会改变资源的状态，不论调用一次还是N次都没有副作用。请注意，这里强调的是一次和N次具有相同的副作用，而不是每次GET的结果相同。<code>GET http://www.news.com/latest-news</code>这个HTTP请求可能会每次得到不同的结果，但它本身并没有产生任何副作用，因而是满足幂等性的。</p><p>DELETE方法用于删除资源，有副作用，但它应该满足幂等性。比如：<code>DELETE http://www.forum.com/article/4231</code>，调用一次和N次对系统产生的副作用是相同的，即删掉id为4231的帖子；因此，调用者可以多次调用或刷新页面而不必担心引起错误。</p><p>POST所对应的URI并非创建的资源本身，而是资源的接收者。比如：<code>POST http://www.forum.com/articles</code>的语义是在<code>http://www.forum.com/articles</code>下创建一篇帖子，HTTP响应中应包含帖子的创建状态以及帖子的URI。两次相同的POST请求会在服务器端创建两份资源，它们具有不同的URI；所以，POST方法不具备幂等性。</p><p>PUT所对应的URI是要创建或更新的资源本身。比如：<code>PUT http://www.forum/articles/4231</code>的语义是创建或更新ID为4231的帖子。对同一URI进行多次PUT的副作用和一次PUT是相同的；因此，PUT方法具有幂等性。</p><h2 id="12-restful架构-soap-rpc"><a class="header-anchor" href="#12-restful架构-soap-rpc"></a>12 RESTful架构(SOAP,RPC)</h2><p>推荐: <a href="http://www.ruanyifeng.com/blog/2011/09/restful.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2011/09/restful.html</a></p><h2 id="13-soap"><a class="header-anchor" href="#13-soap"></a>13 SOAP</h2><p>SOAP（原为Simple Object Access Protocol的首字母缩写，即简单对象访问协议）是交换数据的一种协议规范，使用在计算机网络Web服务（web service）中，交换带结构信息。SOAP为了简化网页服务器（Web Server）从XML数据库中提取数据时，节省去格式化页面时间，以及不同应用程序之间按照HTTP通信协议，遵从XML格式执行资料互换，使其抽象于语言实现、平台和硬件。</p><h2 id="14-rpc"><a class="header-anchor" href="#14-rpc"></a>14 RPC</h2><p>RPC（Remote Procedure Call Protocol）——远程过程调用协议，它是一种通过网络从远程计算机程序上请求服务，而不需要了解底层网络技术的协议。RPC协议假定某些传输协议的存在，如TCP或UDP，为通信程序之间携带信息数据。在OSI网络通信模型中，RPC跨越了传输层和应用层。RPC使得开发包括网络分布式多程序在内的应用程序更加容易。</p><p>总结:服务提供的两大流派.传统意义以方法调用为导向通称RPC。为了企业SOA,若干厂商联合推出webservice,制定了wsdl接口定义,传输soap.当互联网时代,臃肿SOA被简化为http+xml/json.但是简化出现各种混乱。以资源为导向,任何操作无非是对资源的增删改查，于是统一的REST出现了.</p><p>进化的顺序: RPC -&gt; SOAP -&gt; RESTful</p><h2 id="15-cgi和wsgi"><a class="header-anchor" href="#15-cgi和wsgi"></a>15 CGI和WSGI</h2><p>CGI是通用网关接口，是连接web服务器和应用程序的接口，用户通过CGI来获取动态数据或文件等。<br>CGI程序是一个独立的程序，它可以用几乎所有语言来写，包括perl，c，lua，python等等。</p><p>WSGI, Web Server Gateway Interface，是Python应用程序或框架和Web服务器之间的一种接口，WSGI的其中一个目的就是让用户可以用统一的语言(Python)编写前后端。</p><p>官方说明：<a href="https://www.python.org/dev/peps/pep-3333/" target="_blank" rel="noopener">PEP-3333</a></p><h2 id="16-中间人攻击"><a class="header-anchor" href="#16-中间人攻击"></a>16 中间人攻击</h2><p>在GFW里屡见不鲜的,呵呵.</p><p>中间人攻击（Man-in-the-middle attack，通常缩写为MITM）是指攻击者与通讯的两端分别创建独立的联系，并交换其所收到的数据，使通讯的两端认为他们正在通过一个私密的连接与对方直接对话，但事实上整个会话都被攻击者完全控制。</p><h2 id="17-c10k问题"><a class="header-anchor" href="#17-c10k问题"></a>17 c10k问题</h2><p>所谓c10k问题，指的是服务器同时支持成千上万个客户端的问题，也就是concurrent 10 000 connection（这也是c10k这个名字的由来）。<br>推荐: <a href="https://my.oschina.net/xianggao/blog/664275" target="_blank" rel="noopener">https://my.oschina.net/xianggao/blog/664275</a></p><h2 id="18-socket"><a class="header-anchor" href="#18-socket"></a>18 socket</h2><p>推荐: <a href="http://www.360doc.com/content/11/0609/15/5482098_122692444.shtml" target="_blank" rel="noopener">http://www.360doc.com/content/11/0609/15/5482098_122692444.shtml</a></p><p>Socket=Ip address+ TCP/UDP + port</p><h2 id="19-浏览器缓存"><a class="header-anchor" href="#19-浏览器缓存"></a>19 浏览器缓存</h2><p>推荐: <a href="http://www.cnblogs.com/skynet/archive/2012/11/28/2792503.html" target="_blank" rel="noopener">http://www.cnblogs.com/skynet/archive/2012/11/28/2792503.html</a></p><p>304 Not Modified</p><h2 id="20-http1-0和http1-1"><a class="header-anchor" href="#20-http1-0和http1-1"></a>20 HTTP1.0和HTTP1.1</h2><p>推荐: <a href="http://blog.csdn.net/elifefly/article/details/3964766" target="_blank" rel="noopener">http://blog.csdn.net/elifefly/article/details/3964766</a></p><ol><li>请求头Host字段,一个服务器多个网站</li><li>长链接</li><li>文件断点续传</li><li>身份认证,状态管理,Cache缓存</li></ol><p>HTTP请求8种方法介绍<br>HTTP/1.1协议中共定义了8种HTTP请求方法，HTTP请求方法也被叫做“请求动作”，不同的方法规定了不同的操作指定的资源方式。服务端也会根据不同的请求方法做不同的响应。</p><p>GET</p><p>GET请求会显示请求指定的资源。一般来说GET方法应该只用于数据的读取，而不应当用于会产生副作用的非幂等的操作中。</p><p>GET会方法请求指定的页面信息，并返回响应主体，GET被认为是不安全的方法，因为GET方法会被网络蜘蛛等任意的访问。</p><p>HEAD</p><p>HEAD方法与GET方法一样，都是向服务器发出指定资源的请求。但是，服务器在响应HEAD请求时不会回传资源的内容部分，即：响应主体。这样，我们可以不传输全部内容的情况下，就可以获取服务器的响应头信息。HEAD方法常被用于客户端查看服务器的性能。</p><p>POST</p><p>POST请求会 向指定资源提交数据，请求服务器进行处理，如：表单数据提交、文件上传等，请求数据会被包含在请求体中。POST方法是非幂等的方法，因为这个请求可能会创建新的资源或/和修改现有资源。</p><p>PUT</p><p>PUT请求会身向指定资源位置上传其最新内容，PUT方法是幂等的方法。通过该方法客户端可以将指定资源的最新数据传送给服务器取代指定的资源的内容。</p><p>DELETE</p><p>DELETE请求用于请求服务器删除所请求URI（统一资源标识符，Uniform Resource Identifier）所标识的资源。DELETE请求后指定资源会被删除，DELETE方法也是幂等的。</p><p>CONNECT</p><p>CONNECT方法是HTTP/1.1协议预留的，能够将连接改为管道方式的代理服务器。通常用于SSL加密服务器的链接与非加密的HTTP代理服务器的通信。</p><p>OPTIONS</p><p>OPTIONS请求与HEAD类似，一般也是用于客户端查看服务器的性能。 这个方法会请求服务器返回该资源所支持的所有HTTP请求方法，该方法会用’*’来代替资源名称，向服务器发送OPTIONS请求，可以测试服务器功能是否正常。JavaScript的XMLHttpRequest对象进行CORS跨域资源共享时，就是使用OPTIONS方法发送嗅探请求，以判断是否有对指定资源的访问权限。 允许</p><p>TRACE</p><p>TRACE请求服务器回显其收到的请求信息，该方法主要用于HTTP请求的测试或诊断。</p><p>HTTP/1.1之后增加的方法</p><p>在HTTP/1.1标准制定之后，又陆续扩展了一些方法。其中使用中较多的是 PATCH 方法：</p><p>PATCH</p><p>PATCH方法出现的较晚，它在2010年的RFC 5789标准中被定义。PATCH请求与PUT请求类似，同样用于资源的更新。二者有以下两点不同：</p><p>但PATCH一般用于资源的部分更新，而PUT一般用于资源的整体更新。<br>当资源不存在时，PATCH会创建一个新的资源，而PUT只会对已在资源进行更新。</p><h2 id="21-ajax"><a class="header-anchor" href="#21-ajax"></a>21 Ajax</h2><p>AJAX,Asynchronous JavaScript and XML（异步的 JavaScript 和 XML）, 是与在不重新加载整个页面的情况下，与服务器交换数据并更新部分网页的技术。</p><h1>*NIX</h1><h2 id="unix进程间通信方式-ipc"><a class="header-anchor" href="#unix进程间通信方式-ipc"></a>unix进程间通信方式(IPC)</h2><ol><li>管道（Pipe）：管道可用于具有亲缘关系进程间的通信，允许一个进程和另一个与它有共同祖先的进程之间进行通信。</li><li>命名管道（named pipe）：命名管道克服了管道没有名字的限制，因此，除具有管道所具有的功能外，它还允许无亲缘关系进程间的通信。命名管道在文件系统中有对应的文件名。命名管道通过命令mkfifo或系统调用mkfifo来创建。</li><li>信号（Signal）：信号是比较复杂的通信方式，用于通知接受进程有某种事件发生，除了用于进程间通信外，进程还可以发送信号给进程本身；linux除了支持Unix早期信号语义函数sigal外，还支持语义符合Posix.1标准的信号函数sigaction（实际上，该函数是基于BSD的，BSD为了实现可靠信号机制，又能够统一对外接口，用sigaction函数重新实现了signal函数）。</li><li>消息（Message）队列：消息队列是消息的链接表，包括Posix消息队列system V消息队列。有足够权限的进程可以向队列中添加消息，被赋予读权限的进程则可以读走队列中的消息。消息队列克服了信号承载信息量少，管道只能承载无格式字节流以及缓冲区大小受限等缺</li><li>共享内存：使得多个进程可以访问同一块内存空间，是最快的可用IPC形式。是针对其他通信机制运行效率较低而设计的。往往与其它通信机制，如信号量结合使用，来达到进程间的同步及互斥。</li><li>内存映射（mapped memory）：内存映射允许任何多个进程间通信，每一个使用该机制的进程通过把一个共享的文件映射到自己的进程地址空间来实现它。</li><li>信号量（semaphore）：主要作为进程间以及同一进程不同线程之间的同步手段。</li><li>套接口（Socket）：更为一般的进程间通信机制，可用于不同机器之间的进程间通信。起初是由Unix系统的BSD分支开发出来的，但现在一般可以移植到其它类Unix系统上：Linux和System V的变种都支持套接字。</li></ol><h1>数据结构</h1><h2 id="1-红黑树"><a class="header-anchor" href="#1-红黑树"></a>1 红黑树</h2><p>红黑树与AVL的比较：</p><p>AVL是严格平衡树，因此在增加或者删除节点的时候，根据不同情况，旋转的次数比红黑树要多；</p><p>红黑是用非严格的平衡来换取增删节点时候旋转次数的降低；</p><p>所以简单说，如果你的应用中，搜索的次数远远大于插入和删除，那么选择AVL，如果搜索，插入删除次数几乎差不多，应该选择RB。</p><p>红黑树详解: <a href="https://xieguanglei.github.io/blog/post/red-black-tree.html" target="_blank" rel="noopener">https://xieguanglei.github.io/blog/post/red-black-tree.html</a></p><p>教你透彻了解红黑树: <a href="https://github.com/julycoding/The-Art-Of-Programming-By-July/blob/master/ebook/zh/03.01.md" target="_blank" rel="noopener">https://github.com/julycoding/The-Art-Of-Programming-By-July/blob/master/ebook/zh/03.01.md</a></p><h1>编程题</h1><h2 id="1-台阶问题-斐波那契"><a class="header-anchor" href="#1-台阶问题-斐波那契"></a>1 台阶问题/斐波那契</h2><p>一只青蛙一次可以跳上1级台阶，也可以跳上2级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fib = <span class="keyword">lambda</span> n: n <span class="keyword">if</span> n &lt;= <span class="number">2</span> <span class="keyword">else</span> fib(n - <span class="number">1</span>) + fib(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>第二种记忆方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">memo</span><span class="params">(func)</span>:</span></span><br><span class="line">    cache = &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrap</span><span class="params">(*args)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> args <span class="keyword">not</span> <span class="keyword">in</span> cache:</span><br><span class="line">            cache[args] = func(*args)</span><br><span class="line">        <span class="keyword">return</span> cache[args]</span><br><span class="line">    <span class="keyword">return</span> wrap</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@memo</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(i)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> i &lt; <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> fib(i<span class="number">-1</span>) + fib(i<span class="number">-2</span>)</span><br></pre></td></tr></table></figure><p>第三种方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(n)</span>:</span></span><br><span class="line">    a, b = <span class="number">0</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> xrange(n):</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">    <span class="keyword">return</span> b</span><br></pre></td></tr></table></figure><h2 id="2-变态台阶问题"><a class="header-anchor" href="#2-变态台阶问题"></a>2 变态台阶问题</h2><p>一只青蛙一次可以跳上1级台阶，也可以跳上2级……它也可以跳上n级。求该青蛙跳上一个n级的台阶总共有多少种跳法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fib = <span class="keyword">lambda</span> n: n <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> <span class="number">2</span> * fib(n - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><h2 id="3-矩形覆盖"><a class="header-anchor" href="#3-矩形覆盖"></a>3 矩形覆盖</h2><p>我们可以用<code>2*1</code>的小矩形横着或者竖着去覆盖更大的矩形。请问用n个<code>2*1</code>的小矩形无重叠地覆盖一个<code>2*n</code>的大矩形，总共有多少种方法？</p><blockquote><p>第<code>2*n</code>个矩形的覆盖方法等于第<code>2*(n-1)</code>加上第<code>2*(n-2)</code>的方法。</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">f = <span class="keyword">lambda</span> n: <span class="number">1</span> <span class="keyword">if</span> n &lt; <span class="number">2</span> <span class="keyword">else</span> f(n - <span class="number">1</span>) + f(n - <span class="number">2</span>)</span><br></pre></td></tr></table></figure><h2 id="4-杨氏矩阵查找"><a class="header-anchor" href="#4-杨氏矩阵查找"></a>4 杨氏矩阵查找</h2><p>在一个m行n列二维数组中，每一行都按照从左到右递增的顺序排序，每一列都按照从上到下递增的顺序排序。请完成一个函数，输入这样的一个二维数组和一个整数，判断数组中是否含有该整数。</p><p>使用Step-wise线性搜索。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_value</span><span class="params">(l, r, c)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> l[r][c]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">find</span><span class="params">(l, x)</span>:</span></span><br><span class="line">    m = len(l) - <span class="number">1</span></span><br><span class="line">    n = len(l[<span class="number">0</span>]) - <span class="number">1</span></span><br><span class="line">    r = <span class="number">0</span></span><br><span class="line">    c = n</span><br><span class="line">    <span class="keyword">while</span> c &gt;= <span class="number">0</span> <span class="keyword">and</span> r &lt;= m:</span><br><span class="line">        value = get_value(l, r, c)</span><br><span class="line">        <span class="keyword">if</span> value == x:</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">elif</span> value &gt; x:</span><br><span class="line">            c = c - <span class="number">1</span></span><br><span class="line">        <span class="keyword">elif</span> value &lt; x:</span><br><span class="line">            r = r + <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">False</span></span><br></pre></td></tr></table></figure><h2 id="5-去除列表中的重复元素"><a class="header-anchor" href="#5-去除列表中的重复元素"></a>5 去除列表中的重复元素</h2><p>用集合</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list(set(l))</span><br></pre></td></tr></table></figure><p>用字典</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'a'</span>]</span><br><span class="line">l2 = &#123;&#125;.fromkeys(l1).keys()</span><br><span class="line"><span class="keyword">print</span> l2</span><br></pre></td></tr></table></figure><p>用字典并保持顺序</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'a'</span>]</span><br><span class="line">l2 = list(set(l1))</span><br><span class="line">l2.sort(key=l1.index)</span><br><span class="line"><span class="keyword">print</span> l2</span><br></pre></td></tr></table></figure><p>列表推导式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l1 = [<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'a'</span>,<span class="string">'a'</span>]</span><br><span class="line">l2 = []</span><br><span class="line">[l2.append(i) <span class="keyword">for</span> i <span class="keyword">in</span> l1 <span class="keyword">if</span> <span class="keyword">not</span> i <span class="keyword">in</span> l2]</span><br></pre></td></tr></table></figure><p>sorted排序并且用列表推导式.</p><p>l = [‘b’,‘c’,‘d’,‘b’,‘c’,‘a’,‘a’]<br>[single.append(i) for i in sorted(l) if i not in single]<br>print single</p><h2 id="6-链表成对调换"><a class="header-anchor" href="#6-链表成对调换"></a>6 链表成对调换</h2><p><code>1-&gt;2-&gt;3-&gt;4</code>转换成<code>2-&gt;1-&gt;4-&gt;3</code>.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="comment"># @param a ListNode</span></span><br><span class="line">    <span class="comment"># @return a ListNode</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">swapPairs</span><span class="params">(self, head)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> head != <span class="keyword">None</span> <span class="keyword">and</span> head.next != <span class="keyword">None</span>:</span><br><span class="line">            next = head.next</span><br><span class="line">            head.next = self.swapPairs(next.next)</span><br><span class="line">            next.next = head</span><br><span class="line">            <span class="keyword">return</span> next</span><br><span class="line">        <span class="keyword">return</span> head</span><br></pre></td></tr></table></figure><h2 id="7-创建字典的方法"><a class="header-anchor" href="#7-创建字典的方法"></a>7 创建字典的方法</h2><h3 id="1-直接创建"><a class="header-anchor" href="#1-直接创建"></a>1 直接创建</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict = &#123;<span class="string">'name'</span>:<span class="string">'earth'</span>, <span class="string">'port'</span>:<span class="string">'80'</span>&#125;</span><br></pre></td></tr></table></figure><h3 id="2-工厂方法"><a class="header-anchor" href="#2-工厂方法"></a>2 工厂方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">items=[(<span class="string">'name'</span>,<span class="string">'earth'</span>),(<span class="string">'port'</span>,<span class="string">'80'</span>)]</span><br><span class="line">dict2=dict(items)</span><br><span class="line">dict1=dict(([<span class="string">'name'</span>,<span class="string">'earth'</span>],[<span class="string">'port'</span>,<span class="string">'80'</span>]))</span><br></pre></td></tr></table></figure><h3 id="3-fromkeys-方法"><a class="header-anchor" href="#3-fromkeys-方法"></a>3 fromkeys()方法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dict1=&#123;&#125;.fromkeys((<span class="string">'x'</span>,<span class="string">'y'</span>),<span class="number">-1</span>)</span><br><span class="line">dict=&#123;<span class="string">'x'</span>:<span class="number">-1</span>,<span class="string">'y'</span>:<span class="number">-1</span>&#125;</span><br><span class="line">dict2=&#123;&#125;.fromkeys((<span class="string">'x'</span>,<span class="string">'y'</span>))</span><br><span class="line">dict2=&#123;<span class="string">'x'</span>:<span class="keyword">None</span>, <span class="string">'y'</span>:<span class="keyword">None</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="8-合并两个有序列表"><a class="header-anchor" href="#8-合并两个有序列表"></a>8 合并两个有序列表</h2><p>知乎远程面试要求编程</p><blockquote><p>尾递归</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_recursion_merge_sort2</span><span class="params">(l1, l2, tmp)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(l1) == <span class="number">0</span> <span class="keyword">or</span> len(l2) == <span class="number">0</span>:</span><br><span class="line">        tmp.extend(l1)</span><br><span class="line">        tmp.extend(l2)</span><br><span class="line">        <span class="keyword">return</span> tmp</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> l1[<span class="number">0</span>] &lt; l2[<span class="number">0</span>]:</span><br><span class="line">            tmp.append(l1[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">del</span> l1[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            tmp.append(l2[<span class="number">0</span>])</span><br><span class="line">            <span class="keyword">del</span> l2[<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">return</span> _recursion_merge_sort2(l1, l2, tmp)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recursion_merge_sort2</span><span class="params">(l1, l2)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> _recursion_merge_sort2(l1, l2, [])</span><br></pre></td></tr></table></figure><blockquote><p>循环算法</p></blockquote><p>思路：</p><p>定义一个新的空列表</p><p>比较两个列表的首个元素</p><p>小的就插入到新列表里</p><p>把已经插入新列表的元素从旧列表删除</p><p>直到两个旧列表有一个为空</p><p>再把旧列表加到新列表后面</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">def loop_merge_sort(l1, l2):</span><br><span class="line">    tmp = []</span><br><span class="line">    while len(l1) &gt; 0 and len(l2) &gt; 0:</span><br><span class="line">        if l1[0] &lt; l2[0]:</span><br><span class="line">            tmp.append(l1[0])</span><br><span class="line">            del l1[0]</span><br><span class="line">        else:</span><br><span class="line">            tmp.append(l2[0])</span><br><span class="line">            del l2[0]</span><br><span class="line">    tmp.extend(l1)</span><br><span class="line">    tmp.extend(l2)</span><br><span class="line">    return tmp</span><br></pre></td></tr></table></figure><blockquote><p>pop弹出</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>]</span><br><span class="line">b = [<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">merge_sortedlist</span><span class="params">(a,b)</span>:</span></span><br><span class="line">    c = []</span><br><span class="line">    <span class="keyword">while</span> a <span class="keyword">and</span> b:</span><br><span class="line">        <span class="keyword">if</span> a[<span class="number">0</span>] &gt;= b[<span class="number">0</span>]:</span><br><span class="line">            c.append(b.pop(<span class="number">0</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            c.append(a.pop(<span class="number">0</span>))</span><br><span class="line">    <span class="keyword">while</span> a:</span><br><span class="line">        c.append(a.pop(<span class="number">0</span>))</span><br><span class="line">    <span class="keyword">while</span> b:</span><br><span class="line">        c.append(b.pop(<span class="number">0</span>))</span><br><span class="line">    <span class="keyword">return</span> c</span><br><span class="line"><span class="keyword">print</span> merge_sortedlist(a,b)</span><br></pre></td></tr></table></figure><h2 id="9-交叉链表求交点"><a class="header-anchor" href="#9-交叉链表求交点"></a>9 交叉链表求交点</h2><blockquote><p>其实思想可以按照从尾开始比较两个链表，如果相交，则从尾开始必然一致，只要从尾开始比较，直至不一致的地方即为交叉点，如图所示</p></blockquote><p><img src="http://hi.csdn.net/attachment/201106/28/0_1309244136MWLP.gif" alt=""></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用a,b两个list来模拟链表，可以看出交叉点是 7这个节点</span></span><br><span class="line">a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">5</span>]</span><br><span class="line">b = [<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>,<span class="number">1</span>,<span class="number">5</span>]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,min(len(a),len(b))):</span><br><span class="line">    <span class="keyword">if</span> i==<span class="number">1</span> <span class="keyword">and</span> (a[<span class="number">-1</span>] != b[<span class="number">-1</span>]):</span><br><span class="line">        <span class="keyword">print</span> <span class="string">"No"</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">if</span> a[-i] != b[-i]:</span><br><span class="line">            <span class="keyword">print</span> <span class="string">"交叉节点："</span>,a[-i+<span class="number">1</span>]</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><blockquote><p>另外一种比较正规的方法，构造链表类</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">node</span><span class="params">(l1, l2)</span>:</span></span><br><span class="line">    length1, lenth2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="comment"># 求两个链表长度</span></span><br><span class="line">    <span class="keyword">while</span> l1.next:</span><br><span class="line">        l1 = l1.next</span><br><span class="line">        length1 += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> l2.next:</span><br><span class="line">        l2 = l2.next</span><br><span class="line">        length2 += <span class="number">1</span></span><br><span class="line">    <span class="comment"># 长的链表先走</span></span><br><span class="line">    <span class="keyword">if</span> length1 &gt; lenth2:</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(length1 - length2):</span><br><span class="line">            l1 = l1.next</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> _ <span class="keyword">in</span> range(length2 - length1):</span><br><span class="line">            l2 = l2.next</span><br><span class="line">    <span class="keyword">while</span> l1 <span class="keyword">and</span> l2:</span><br><span class="line">        <span class="keyword">if</span> l1.next == l2.next:</span><br><span class="line">            <span class="keyword">return</span> l1.next</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            l1 = l1.next</span><br><span class="line">            l2 = l2.next</span><br></pre></td></tr></table></figure><p>修改了一下:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListNode</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, x)</span>:</span></span><br><span class="line">        self.val = x</span><br><span class="line">        self.next = <span class="keyword">None</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">node</span><span class="params">(l1, l2)</span>:</span></span><br><span class="line">    length1, length2 = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="comment"># 求两个链表长度</span></span><br><span class="line">    <span class="keyword">while</span> l1.next:</span><br><span class="line">        l1 = l1.next<span class="comment">#尾节点</span></span><br><span class="line">        length1 += <span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> l2.next:</span><br><span class="line">        l2 = l2.next<span class="comment">#尾节点</span></span><br><span class="line">        length2 += <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#如果相交</span></span><br><span class="line">    <span class="keyword">if</span> l1.next == l2.next:</span><br><span class="line">        <span class="comment"># 长的链表先走</span></span><br><span class="line">        <span class="keyword">if</span> length1 &gt; length2:</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(length1 - length2):</span><br><span class="line">                l1 = l1.next</span><br><span class="line">            <span class="keyword">return</span> l1<span class="comment">#返回交点</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">for</span> _ <span class="keyword">in</span> range(length2 - length1):</span><br><span class="line">                l2 = l2.next</span><br><span class="line">            <span class="keyword">return</span> l2<span class="comment">#返回交点</span></span><br><span class="line">    <span class="comment"># 如果不相交</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">return</span></span><br></pre></td></tr></table></figure><p>思路: <a href="http://humaoli.blog.163.com/blog/static/13346651820141125102125995/" target="_blank" rel="noopener">http://humaoli.blog.163.com/blog/static/13346651820141125102125995/</a></p><h2 id="10-二分查找"><a class="header-anchor" href="#10-二分查找"></a>10 二分查找</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">binary_search</span><span class="params">(list,item)</span>:</span></span><br><span class="line">    low = <span class="number">0</span></span><br><span class="line">    high = len(list)<span class="number">-1</span></span><br><span class="line">    <span class="keyword">while</span> low&lt;=high:</span><br><span class="line">        mid = (low+high)/<span class="number">2</span></span><br><span class="line">        guess = list[mid]</span><br><span class="line">        <span class="keyword">if</span> guess&gt;item:</span><br><span class="line">            high = mid<span class="number">-1</span></span><br><span class="line">        <span class="keyword">elif</span> guess&lt;item:</span><br><span class="line">            low = mid+<span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> mid</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">None</span></span><br><span class="line">mylist = [<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">9</span>]</span><br><span class="line"><span class="keyword">print</span> binary_search(mylist,<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>参考: <a href="http://blog.csdn.net/u013205877/article/details/76411718" target="_blank" rel="noopener">http://blog.csdn.net/u013205877/article/details/76411718</a></p><h2 id="11-快排"><a class="header-anchor" href="#11-快排"></a>11 快排</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">quicksort</span><span class="params">(list)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> len(list)&lt;<span class="number">2</span>:</span><br><span class="line">        <span class="keyword">return</span> list</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        midpivot = list[<span class="number">0</span>]</span><br><span class="line">        lessbeforemidpivot = [i <span class="keyword">for</span> i <span class="keyword">in</span> list[<span class="number">1</span>:] <span class="keyword">if</span> i&lt;=midpivot]</span><br><span class="line">        biggerafterpivot = [i <span class="keyword">for</span> i <span class="keyword">in</span> list[<span class="number">1</span>:] <span class="keyword">if</span> i &gt; midpivot]</span><br><span class="line">        finallylist = quicksort(lessbeforemidpivot)+[midpivot]+quicksort(biggerafterpivot)</span><br><span class="line">        <span class="keyword">return</span> finallylist</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> quicksort([<span class="number">2</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>])</span><br></pre></td></tr></table></figure><blockquote><p>更多排序问题可见：<a href="http://blog.csdn.net/mrlevo520/article/details/77829204" target="_blank" rel="noopener">数据结构与算法-排序篇-Python描述</a></p></blockquote><h2 id="12-找零问题"><a class="header-anchor" href="#12-找零问题"></a>12 找零问题</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="comment">#values是硬币的面值values = [ 25, 21, 10, 5, 1]</span></span><br><span class="line"><span class="comment">#valuesCounts   钱币对应的种类数</span></span><br><span class="line"><span class="comment">#money  找出来的总钱数</span></span><br><span class="line"><span class="comment">#coinsUsed   对应于目前钱币总数i所使用的硬币数目</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coinChange</span><span class="params">(values,valuesCounts,money,coinsUsed)</span>:</span></span><br><span class="line">    <span class="comment">#遍历出从1到money所有的钱数可能</span></span><br><span class="line">    <span class="keyword">for</span> cents <span class="keyword">in</span> range(<span class="number">1</span>,money+<span class="number">1</span>):</span><br><span class="line">        minCoins = cents</span><br><span class="line">        <span class="comment">#把所有的硬币面值遍历出来和钱数做对比</span></span><br><span class="line">        <span class="keyword">for</span> kind <span class="keyword">in</span> range(<span class="number">0</span>,valuesCounts):</span><br><span class="line">            <span class="keyword">if</span> (values[kind] &lt;= cents):</span><br><span class="line">                temp = coinsUsed[cents - values[kind]] +<span class="number">1</span></span><br><span class="line">                <span class="keyword">if</span> (temp &lt; minCoins):</span><br><span class="line">                    minCoins = temp</span><br><span class="line">        coinsUsed[cents] = minCoins</span><br><span class="line">        <span class="keyword">print</span> (<span class="string">'面值:&#123;0&#125;的最少硬币使用数为:&#123;1&#125;'</span>.format(cents, coinsUsed[cents]))</span><br></pre></td></tr></table></figure><p>思路: <a href="http://blog.csdn.net/wdxin1322/article/details/9501163" target="_blank" rel="noopener">http://blog.csdn.net/wdxin1322/article/details/9501163</a></p><p>方法: <a href="http://www.cnblogs.com/ChenxofHit/archive/2011/03/18/1988431.html" target="_blank" rel="noopener">http://www.cnblogs.com/ChenxofHit/archive/2011/03/18/1988431.html</a></p><h2 id="13-广度遍历和深度遍历二叉树"><a class="header-anchor" href="#13-广度遍历和深度遍历二叉树"></a>13 广度遍历和深度遍历二叉树</h2><p>给定一个数组，构建二叉树，并且按层次打印这个二叉树</p><h2 id="14-二叉树节点"><a class="header-anchor" href="#14-二叉树节点"></a>14 二叉树节点</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data, left=None, right=None)</span>:</span></span><br><span class="line">        self.data = data</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line">tree = Node(<span class="number">1</span>, Node(<span class="number">3</span>, Node(<span class="number">7</span>, Node(<span class="number">0</span>)), Node(<span class="number">6</span>)), Node(<span class="number">2</span>, Node(<span class="number">5</span>), Node(<span class="number">4</span>)))</span><br></pre></td></tr></table></figure><h2 id="15-层次遍历"><a class="header-anchor" href="#15-层次遍历"></a>15 层次遍历</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lookup</span><span class="params">(root)</span>:</span></span><br><span class="line">    row = [root]</span><br><span class="line">    <span class="keyword">while</span> row:</span><br><span class="line">        print(row)</span><br><span class="line">        row = [kid <span class="keyword">for</span> item <span class="keyword">in</span> row <span class="keyword">for</span> kid <span class="keyword">in</span> (item.left, item.right) <span class="keyword">if</span> kid]</span><br></pre></td></tr></table></figure><h2 id="16-深度遍历"><a class="header-anchor" href="#16-深度遍历"></a>16 深度遍历</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deep</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">print</span> root.data</span><br><span class="line">    deep(root.left)</span><br><span class="line">    deep(root.right)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    lookup(tree)</span><br><span class="line">    deep(tree)</span><br></pre></td></tr></table></figure><h2 id="17-前中后序遍历"><a class="header-anchor" href="#17-前中后序遍历"></a>17 前中后序遍历</h2><p>深度遍历改变顺序就OK了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="comment">#二叉树的遍历</span></span><br><span class="line"><span class="comment">#简单的二叉树节点类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self,value,left,right)</span>:</span></span><br><span class="line">        self.value = value</span><br><span class="line">        self.left = left</span><br><span class="line">        self.right = right</span><br><span class="line"></span><br><span class="line"><span class="comment">#中序遍历:遍历左子树,访问当前节点,遍历右子树</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mid_travelsal</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">None</span>:</span><br><span class="line">        mid_travelsal(root.left)</span><br><span class="line">    <span class="comment">#访问当前节点</span></span><br><span class="line">    print(root.value)</span><br><span class="line">    <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        mid_travelsal(root.right)</span><br><span class="line"></span><br><span class="line"><span class="comment">#前序遍历:访问当前节点,遍历左子树,遍历右子树</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pre_travelsal</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">print</span> (root.value)</span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        pre_travelsal(root.left)</span><br><span class="line">    <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        pre_travelsal(root.right)</span><br><span class="line"></span><br><span class="line"><span class="comment">#后续遍历:遍历左子树,遍历右子树,访问当前节点</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">post_trvelsal</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> root.left <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        post_trvelsal(root.left)</span><br><span class="line">    <span class="keyword">if</span> root.right <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">        post_trvelsal(root.right)</span><br><span class="line">    <span class="keyword">print</span> (root.value)</span><br></pre></td></tr></table></figure><h2 id="18-求最大树深"><a class="header-anchor" href="#18-求最大树深"></a>18 求最大树深</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">maxDepth</span><span class="params">(root)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> max(maxDepth(root.left), maxDepth(root.right)) + <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="19-求两棵树是否相同"><a class="header-anchor" href="#19-求两棵树是否相同"></a>19 求两棵树是否相同</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">isSameTree</span><span class="params">(p, q)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> p == <span class="keyword">None</span> <span class="keyword">and</span> q == <span class="keyword">None</span>:</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">True</span></span><br><span class="line">    <span class="keyword">elif</span> p <span class="keyword">and</span> q :</span><br><span class="line">        <span class="keyword">return</span> p.val == q.val <span class="keyword">and</span> isSameTree(p.left,q.left) <span class="keyword">and</span> isSameTree(p.right,q.right)</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">False</span></span><br></pre></td></tr></table></figure><h2 id="20-前序中序求后序"><a class="header-anchor" href="#20-前序中序求后序"></a>20 前序中序求后序</h2><p>推荐: <a href="http://blog.csdn.net/hinyunsin/article/details/6315502" target="_blank" rel="noopener">http://blog.csdn.net/hinyunsin/article/details/6315502</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rebuild</span><span class="params">(pre, center)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> pre:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    cur = Node(pre[<span class="number">0</span>])</span><br><span class="line">    index = center.index(pre[<span class="number">0</span>])</span><br><span class="line">    cur.left = rebuild(pre[<span class="number">1</span>:index + <span class="number">1</span>], center[:index])</span><br><span class="line">    cur.right = rebuild(pre[index + <span class="number">1</span>:], center[index + <span class="number">1</span>:])</span><br><span class="line">    <span class="keyword">return</span> cur</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">deep</span><span class="params">(root)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> root:</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    deep(root.left)</span><br><span class="line">    deep(root.right)</span><br><span class="line">    <span class="keyword">print</span> root.data</span><br></pre></td></tr></table></figure><h2 id="21-单链表逆置"><a class="header-anchor" href="#21-单链表逆置"></a>21 单链表逆置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, data=None, next=None)</span>:</span></span><br><span class="line">        self.data = data</span><br><span class="line">        self.next = next</span><br><span class="line"></span><br><span class="line">link = Node(<span class="number">1</span>, Node(<span class="number">2</span>, Node(<span class="number">3</span>, Node(<span class="number">4</span>, Node(<span class="number">5</span>, Node(<span class="number">6</span>, Node(<span class="number">7</span>, Node(<span class="number">8</span>, Node(<span class="number">9</span>)))))))))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">rev</span><span class="params">(link)</span>:</span></span><br><span class="line">    pre = link</span><br><span class="line">    cur = link.next</span><br><span class="line">    pre.next = <span class="keyword">None</span></span><br><span class="line">    <span class="keyword">while</span> cur:</span><br><span class="line">        tmp = cur.next</span><br><span class="line">        cur.next = pre</span><br><span class="line">        pre = cur</span><br><span class="line">        cur = tmp</span><br><span class="line">    <span class="keyword">return</span> pre</span><br><span class="line"></span><br><span class="line">root = rev(link)</span><br><span class="line"><span class="keyword">while</span> root:</span><br><span class="line">    <span class="keyword">print</span> root.data</span><br><span class="line">    root = root.next</span><br></pre></td></tr></table></figure><p>思路: <a href="http://blog.csdn.net/feliciafay/article/details/6841115" target="_blank" rel="noopener">http://blog.csdn.net/feliciafay/article/details/6841115</a></p><p>方法: <a href="http://www.xuebuyuan.com/2066385.html?mobile=1" target="_blank" rel="noopener">http://www.xuebuyuan.com/2066385.html?mobile=1</a></p><h2 id="22-两个字符串是否是变位词"><a class="header-anchor" href="#22-两个字符串是否是变位词"></a>22 两个字符串是否是变位词</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Anagram</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    @:param s1: The first string</span></span><br><span class="line"><span class="string">    @:param s2: The second string</span></span><br><span class="line"><span class="string">    @:return true or false</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Solution1</span><span class="params">(s1,s2)</span>:</span></span><br><span class="line">        alist = list(s2)</span><br><span class="line"></span><br><span class="line">        pos1 = <span class="number">0</span></span><br><span class="line">        stillOK = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> pos1 &lt; len(s1) <span class="keyword">and</span> stillOK:</span><br><span class="line">            pos2 = <span class="number">0</span></span><br><span class="line">            found = <span class="keyword">False</span></span><br><span class="line">            <span class="keyword">while</span> pos2 &lt; len(alist) <span class="keyword">and</span> <span class="keyword">not</span> found:</span><br><span class="line">                <span class="keyword">if</span> s1[pos1] == alist[pos2]:</span><br><span class="line">                    found = <span class="keyword">True</span></span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    pos2 = pos2 + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> found:</span><br><span class="line">                alist[pos2] = <span class="keyword">None</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                stillOK = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">            pos1 = pos1 + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stillOK</span><br><span class="line"></span><br><span class="line">    print(Solution1(<span class="string">'abcd'</span>,<span class="string">'dcba'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Solution2</span><span class="params">(s1,s2)</span>:</span></span><br><span class="line">        alist1 = list(s1)</span><br><span class="line">        alist2 = list(s2)</span><br><span class="line"></span><br><span class="line">        alist1.sort()</span><br><span class="line">        alist2.sort()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        pos = <span class="number">0</span></span><br><span class="line">        matches = <span class="keyword">True</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> pos &lt; len(s1) <span class="keyword">and</span> matches:</span><br><span class="line">            <span class="keyword">if</span> alist1[pos] == alist2[pos]:</span><br><span class="line">                pos = pos + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                matches = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> matches</span><br><span class="line"></span><br><span class="line">    print(Solution2(<span class="string">'abcde'</span>,<span class="string">'edcbg'</span>))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Solution3</span><span class="params">(s1,s2)</span>:</span></span><br><span class="line">        c1 = [<span class="number">0</span>]*<span class="number">26</span></span><br><span class="line">        c2 = [<span class="number">0</span>]*<span class="number">26</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s1)):</span><br><span class="line">            pos = ord(s1[i])-ord(<span class="string">'a'</span>)</span><br><span class="line">            c1[pos] = c1[pos] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(len(s2)):</span><br><span class="line">            pos = ord(s2[i])-ord(<span class="string">'a'</span>)</span><br><span class="line">            c2[pos] = c2[pos] + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">        j = <span class="number">0</span></span><br><span class="line">        stillOK = <span class="keyword">True</span></span><br><span class="line">        <span class="keyword">while</span> j&lt;<span class="number">26</span> <span class="keyword">and</span> stillOK:</span><br><span class="line">            <span class="keyword">if</span> c1[j] == c2[j]:</span><br><span class="line">                j = j + <span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                stillOK = <span class="keyword">False</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> stillOK</span><br><span class="line"></span><br><span class="line">    print(Solution3(<span class="string">'apple'</span>,<span class="string">'pleap'</span>))</span><br></pre></td></tr></table></figure><h2 id="23-动态规划问题"><a class="header-anchor" href="#23-动态规划问题"></a>23 动态规划问题</h2><blockquote><p>可参考：<a href="http://blog.csdn.net/mrlevo520/article/details/75676160" target="_blank" rel="noopener">动态规划(DP)的整理-Python描述</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 总结 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>redis小结</title>
      <link href="/post/2018-10-20-redis%E5%B0%8F%E7%BB%93.html"/>
      <url>/post/2018-10-20-redis%E5%B0%8F%E7%BB%93.html</url>
      
        <content type="html"><![CDATA[<p>高性能的非关系性数据库redis</p><p>在这里进行小结一波。</p><a id="more"></a><h2 id="指令"><a class="header-anchor" href="#指令"></a>指令</h2><p>redis是键值对的数据库，有5中主要数据类型：</p><p>字符串类型（string），散列类型（hash），列表类型（list），集合类型（set），有序集合类型（zset）</p><ul><li><p>几个基本的命令：</p><ul><li><p>KEYS * 获得当前数据库的所有键</p></li><li><p>EXISTS key [key …]  判断键是否存在，返回个数，如果key有一样的也是叠加数</p></li><li><p>DEL key [key …]       删除键，返回删除的个数</p></li><li><p>TYPE key                  获取减值的数据类型（string，hash，list，set，zset）</p></li><li><p>FLUSHALL                清空所有数据库</p></li><li><p>CONFIG [get、set]    redis配置</p></li></ul></li></ul><h2 id="字符串类型"><a class="header-anchor" href="#字符串类型"></a>字符串类型</h2><ul><li><p>字符串类型是Redis的最基本类型，它可以存储任何形式的字符串。其它的四种类型都是字符串类型的不同形式。（一般用于：点赞，限流）</p><ul><li><p>最基本的命令：GET、SET         语法：GET key，SET key value   value如果有空格需要双引号以示区分</p></li><li><p>整数递增：INCR                      语法：INCR key    默认值为0，所以首先执行命令得到 1 ，不是整型提示错误</p></li><li><p>增加指定的整数：INCRBY          语法：INCRBY key increment</p></li><li><p>整数递减：DECR                     语法：DECR key   默认值为0，所以首先执行命令得到 -1，不是整型提示错误</p></li><li><p>减少指定的整数：DECRBY         语法：DECRBY key increment</p></li><li><p>增加指定浮点数：INCRBYFLOAT 语法：INCRBYFLOAT key increment  与INCR命令类似，只不过可以递增一个双精度浮点数</p></li><li><p>向尾部追加值：APPEND             语法：APPEND key value   redis客户端并不是输出追加后的字符串，而是输出字符串总长度</p></li><li><p>获取字符串长度：STRLEN          语法：STRLEN key  如果键不存在返回0，注意如果有中文时，一个中文长度是3，redis是使用UTF-8编码中文的</p></li><li><p>获取多个键值：MGET                语法：MGET key [key …]  例如：MGET key1 key2</p></li><li><p>设置多个键值：MSET                语法：MSET key value [key value …]  例如：MSET key1 1 key2 “hello redis”</p></li><li><p>二进制指定位置值：GETBIT        语法：GETBIT key offset   例如：GETBIT key1 2 ，key1为hello 返回 1，返回的值只有0或1，当key不存在或超出实际长度时为0</p></li><li><p>设置二进制位置值：SETBIT       语法：SETBIT key offset value ，返回该位置的旧值</p></li><li><p>二进制是1的个数：BITCOUNT    语法：BITCOUNT key [start end] ，start 、end为开始和结束字节</p></li><li><p>位运算：BITOP                       语法：BITOP operation destkey key [key …]  ，operation支持AND、OR、XOR、NOT</p></li><li><p>偏移：BITPOS                        语法：BITPOS key bit [start]</p></li></ul></li></ul><h2 id="散列类型hash"><a class="header-anchor" href="#散列类型hash"></a>散列类型hash</h2><ul><li><p>类似与python中的类，一个键对应多个键值对（保存对象）</p><ul><li><p>设置单个：HSET                      语法：HSET key field value，不存在时返回1，存在时返回0，没有更新和插入之分</p></li><li><p>设置多个：HMSET                    语法：HMSET key field value [field value …]</p></li><li><p>读取单个：HGET                      语法：HGET key field，不存在是返回nil</p></li><li><p>读取多个：HMGET                    语法：HMGET key field [field …]</p></li><li><p>读取全部：HGETALL                 语法：HGETALL key，返回时字段和字段值的列表</p></li><li><p>判断字段是否存在：HEXISTS      语法：HEXISTS key field，存在返回1 ，不存在返回0</p></li><li><p>字段不存在时赋值：HSETNX       语法：HSETNX key field value，与hset命令不同，hsetnx是键不存在时设置值</p></li><li><p>增加数字：HINCRBY                 语法：HINCRBY key field increment ，返回增加后的数，不是整数时会提示错误</p></li><li><p>删除字段：HDEL                      语法：HDEL key field [field …] ，返回被删除字段的个数</p></li><li><p>只获取字段名：HKEYS               语法：HKEYS key ，返回键的所有字段名</p></li><li><p>只获取字段值：HVALS              语法：HVALS key  ，返回键的所有字段值</p></li><li><p>字段数量：HLEN                      语法：HLEN key ，返回字段总数</p></li></ul></li></ul><h2 id="列表类型"><a class="header-anchor" href="#列表类型"></a>列表类型</h2><ul><li><p>内部使用双向链表实现，所以获取越接近两端的元素速度越快，但通过索引访问时会比较慢（栈，队列，阻塞队列）</p><ul><li><p>添加左边元素：LPUSH               语法：LPUSH key value [value …]  ，返回添加后的列表元素的总个数</p></li><li><p>添加右边元素：RPUSH              语法：RPUSH key value [value …]  ，返回添加后的列表元素的总个数</p></li><li><p>移除左边第一个元素：LPOP        语法：LPOP key  ，返回被移除的元素值</p></li><li><p>移除右边第一个元素：RPOP        语法：RPOP key ，返回被移除的元素值</p></li><li><p>列表元素个数：LLEN                语法：LLEN key， 不存在时返回0，redis是直接读取现成的值，并不是统计个数</p></li><li><p>获取列表片段：LRANGE           语法：LRANGE key start stop，如果start比stop靠后时返回空列表，0 -1 返回整个列表</p></li></ul></li></ul><h2 id="集合类型"><a class="header-anchor" href="#集合类型"></a>集合类型</h2><ul><li><p>集合类型值具有唯一性，常用操作是向集合添加、删除、判断某个值是否存在，集合内部是使用值为空的散列表实现的。</p><ul><li>添加元素：SADD      语法：SADD key member [member …] ，向一个集合添加一个或多个元素，因为集合的唯一性，所以添加相同值时会被忽略。</li></ul><p>返回成功添加元素的数量。</p><ul><li><p>删除元素：SREM       语法：SREM key member [member …] 删除集合中一个或多个元素，返回成功删除的个数。</p></li><li><p>获取全部元素：SMEMBERS      语法：SMEMBERS key ，返回集合全部元素</p></li><li><p>值是否存在：SISMEMBER        语法：SISMEMBER key member ，如果存在返回1，不存在返回0</p></li><li><p>差运算：SDIFF         语法：SDIFF key [key …] ，例如：集合A和集合B，差集表示A-B，在A里有的元素B里没有，返回差集合；多个集合(A-B)-C</p></li><li><p>交运算：SINTER         语法：SINTER key [key …]，返回交集集合，每个集合都有的元素</p></li><li><p>并运算：SUNION　　 语法：SUNION key [key …]，返回并集集合，所有集合的元素</p></li><li><p>集合元素个数：SCARD         语法：SCARD key ，返回集合元素个数</p></li><li><p>集合运算后存储结果      语法：SDIFFSTROE destination key [key …] ，差运算并存储到destination新集合中</p></li></ul></li></ul><h2 id="有序集合类型"><a class="header-anchor" href="#有序集合类型"></a>有序集合类型</h2><ul><li><p>通过给每个元素加一个score值来判断这个元素的排行位置（可以用于做排行榜）</p><ul><li><p>添加集合元素：ZADD           语法：ZADD key [NX|XX][CH] [INCR] score member [score member …]，不存在添加，存在更新。</p></li><li><p>获取元素分数：ZSCORE       语法：ZSCORE key member ，返回元素成员的score 分数</p></li><li><p>元素小到大：ZRANGE          语法：ZRANGE key start top [WITHSCORES] ，参考LRANGE ，加上withscores 返回带元素，即元素，分数</p></li><li><p>元素大到小：ZREVRANGE       语法：ZREVRANGE key start [WITHSCORES] ，与zrange区别在于zrevrange是从大到小排序</p></li><li><p>指定分数范围元素：ZRANGEBYSCORE   语法：ZRANGEBYSCORE key min max [WITHSCORE][LIMIT offest count]</p></li></ul><p>返回从小到大的在min和max之间的元素，( 符号表示不包含，例如：80-100，(80 100，withscore返回带分数 ，imit offest count 向左偏移offest个元素，并获取前count个元素</p><ul><li><p>指定分数范围元素：ZREVRANGESCORE   语法：ZREVRANGEBYSCORE key max  min [WITHSCORE][LIMIT offest count]</p><p>与zrangebyscore类似，只不过该命令是从大到小排序的。</p></li><li><p>增加分数：ZINCRBY                语法：ZINCRBY key increment member ，注意是增加分数，返回增加后的分数；如果成员不存在，则添加一个为0的成员。</p></li></ul></li></ul><h2 id="主从复制"><a class="header-anchor" href="#主从复制"></a>主从复制</h2><ul><li><p>配置</p><ol><li><p>master不用修改任何配置</p></li><li><p>slave修改两条配置（redis.conf）：<br>​    slaveof master的IP地址 master的端口<br>​    masterauth master的口令</p></li><li><p>redis-cli连自己的Redis服务器（配置完需要重启服务器）<br>info replication —&gt;查看自己的信息，是奴隶还是主人</p><p>例如：</p><blockquote><p>master信息<br>role: master<br>connected_slaves:2<br>slave0:ip=1.2.3.4,port=6379,state=online,offset=548,lag=1<br>slave1:ip=1.2.3.5,port=6666,state=online,offset=548,lag=1</p><p>slave信息<br>role: slave<br>master_host:<br>master_port:<br>master_link_status: up</p></blockquote></li><li><p>配置哨兵（sentinel.conf ）</p><p>bind 内网IP地址（私有IP地址）<br>sentinel monitor mymaster &lt;master的IP&gt; &lt;master的端口&gt; &lt;投票数量&gt;<br>sentinel down-after-milliseconds mymaster &lt;认定下线时间&gt;<br>sentinel failover-timeout mymaster &lt;恢复超时时间&gt;</p></li><li><p>启动哨兵</p><p>redis-server sentinel.conf --sentinel</p></li></ol></li></ul>]]></content>
      
      
      <categories>
          
          <category> sql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux进阶</title>
      <link href="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6.html"/>
      <url>/post/2018-10-16-linux%E8%BF%9B%E9%98%B6.html</url>
      
        <content type="html"><![CDATA[<p>linux成长之路，共勉。<br>这篇文章中讲了操作系统的发展史，吃水勿忘挖井人。<br>linux一些进阶命令与使用也有涵盖。<br>望多多交流。</p><a id="more"></a><h3 id="操作系统发展史"><a class="header-anchor" href="#操作系统发展史"></a>操作系统发展史</h3><p>只有硬件没有软件的计算机系统被称之为“裸机”，我们很难用“裸机”来完成计算机日常的工作（如存储和运算），所以必须用特定的软件来控制硬件的工作。最靠近计算机硬件的软件是系统软件，其中最为重要的就是“操作系统”。“操作系统”是控制和管理整个计算机系统的硬件和软件资源，合理的分配资源和调配任务，为系统用户和其他软件提供接口和环境的程序的集合。</p><h4 id="没有操作系统-手工操作"><a class="header-anchor" href="#没有操作系统-手工操作"></a>没有操作系统（手工操作）</h4><p>在计算机诞生之初没有操作系统的年代，人们先把程序纸带（或卡片）装上计算机，然后启动输入机把程序和送入计算机，接着通过控制台开关启动程序运行。当程序执行完毕，打印机输出计算的结果，用户卸下并取走纸带（或卡片）。第二个用户上机，重复同样的步骤。在整个过程中用户独占机器，CPU等待手工操作，资源利用率极低。下图是IBM生产的书写Fortran程序的80栏打孔卡，当然这个已经是比较先进的打孔卡了。</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/ibm-col80-punched-card.png" alt="ibm-col80-punched-card"></p><h4 id="批处理系统"><a class="header-anchor" href="#批处理系统"></a>批处理系统</h4><p>首先启动计算机上的一个监督程序，在监督程序的控制下，计算机能够自动的、成批的处理一个或多个用户的作业。完成一批作业后，监督程度又从输入机读取作业存入磁带机。按照上面的步骤重复处理任务。监督程序不停的处理各个作业，实现了作业的自动转接，减少了作业的建立时间和手工操作时间，提高了计算机资源的利用率。 批处理系统又可以分为单道批处理系统、多道批处理系统、联机批处理系统、脱机批处理系统。</p><h4 id="分时系统和实时系统"><a class="header-anchor" href="#分时系统和实时系统"></a>分时系统和实时系统</h4><p>分时系统是把处理器的运行时间分成很短的时间片，按时间片轮流把处理机分配给各联机作业使用。 若某个作业在分配给它的时间片内不能完成其计算，则该作业暂时中断，把处理机让给另一作业使用，等待下一轮调度时再继续其运行。由于计算机速度很快，作业运行轮转得很快，给每个用户的感觉是他独占了一台计算机。而每个用户可以通过自己的终端向系统发出各种操作控制命令，在充分的人机交互情况下，完成作业的运行。为了解决分时系统不能及时响应用户指令的情况，又出现了能够在在严格的时间范围内完成事件处理，及时响应随机外部事件的实时系统。</p><h4 id="通用操作系统"><a class="header-anchor" href="#通用操作系统"></a>通用操作系统</h4><ol><li><p>1960s：IBM的System/360系列的机器有了统一的操作系统OS/360。</p></li><li><p>1965年：AT&amp;T的贝尔实验室加入GE和MIT的合作计划开始开发MULTICS。</p></li><li><p>1969年：Ken Tompson为了玩“Space Travel”游戏用汇编语言在PDP-7上开发了Unics。</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/pdp-7.png" alt=""></p></li><li><p>1970年~1971年：Ken Tompson和Dennis Ritchie用B语言在PDP-11上重写了Unics，并在Brian Kernighan的建议下将其更名为Unix。</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/ken-and-dennis-pdp-11.png" alt=""></p></li><li><p>1972年~1973年：Dennis Ritchie发明了C语言来取代可移植性较差的B语言，并开启了用C语言重写Unix的工作。</p></li><li><p>1974年：Unix推出了里程碑意义的第5版，几乎完全用C语言来实现。</p></li><li><p>1979年：从Unix第7版开始，AT&amp;T发布新的使用条款，将Unix私有化。</p></li><li><p>1987年：Andrew S. Tanenbaum教授为了能在课堂上教授学生操作系统运作的细节，决定在不使用任何AT&amp;T的源代码前提下，自行开发与Unix兼容的操作系统，以避免版权上的争议并将其命名为Minix。</p></li><li><p>1991年：Linus Torvalds就读于芬兰赫尔辛基大学期间，尝试在Minix上做一些开发工作，但因为Minix只是作为教学用途的功能并不强，为了方便在学校的主机的新闻组和邮件系统中读写和下载文件，Linus编写了磁盘驱动程序和文件系统，这些成为了Linux系统内核的雏形。</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/Ken-Thompson.png" alt="">Ken L. Thompson (ken)</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/dennis-ritchie.png" alt="">Dennis M. Ritchie (DMR)</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/andrew-tanenbaum.png" alt="">Andrew S. Tanenbaum (ast)</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/linus-torvalds.png" alt="">Linus B. Torvalds</p></li></ol><p>下图是Unix操作系统家族的图谱。</p><p><img src="/post/2018-10-16-linux%E8%BF%9B%E9%98%B6/history-of-unix.png" alt=""></p><h3 id="linux概述"><a class="header-anchor" href="#linux概述"></a>Linux概述</h3><p>Linux是一个通用操作系统。一个操作系统要负责任务调度、内存分配、处理外围设备I/O等操作。操作系统通常由内核（运行其他程序，管理像磁盘、打印机等硬件设备的核心程序）和系统程序（设备驱动、底层库、shell、服务程序等）两部分组成。</p><p>Linux内核是芬兰人Linus Torvalds开发的，于1991年9月发布。而Linux操作系统作为Internet时代的产物，它是由全世界许多开发者共同合作开发的，是一个自由的操作系统（注意自由和免费并不是同一个概念，想了解二者的差别可以<a href="https://www.debian.org/intro/free" target="_blank" rel="noopener">点击这里</a>）。</p><h3 id="linux系统优点"><a class="header-anchor" href="#linux系统优点"></a>Linux系统优点</h3><ol><li>通用操作系统，不跟特定的硬件绑定。</li><li>用C语言编写，有可移植性，有内核编程接口。</li><li>支持多用户和多任务，支持安全的分层文件系统。</li><li>大量的实用程序，完善的网络功能以及强大的支持文档。</li><li>可靠的安全性和良好的稳定性，对开发者更友好。</li></ol><h3 id="linux系统发行版本"><a class="header-anchor" href="#linux系统发行版本"></a>Linux系统发行版本</h3><ol><li><a href="https://www.redhat.com/en" target="_blank" rel="noopener">Redhat</a></li><li><a href="https://www.ubuntu.com/" target="_blank" rel="noopener">Ubuntu</a></li><li><a href="https://www.centos.org/" target="_blank" rel="noopener">CentOS</a></li><li><a href="https://getfedora.org/" target="_blank" rel="noopener">Fedora</a></li><li><a href="https://www.debian.org/" target="_blank" rel="noopener">Debian</a></li><li><a href="https://www.opensuse.org/" target="_blank" rel="noopener">openSUSE</a></li></ol><h3 id="基础命令"><a class="header-anchor" href="#基础命令"></a>基础命令</h3><p>Linux系统的命令通常都是如下所示的格式：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">命令名称 [命名参数] [命令对象]</span><br></pre></td></tr></table></figure><ol><li><p>获取登录信息 - <strong>w</strong> / <strong>who</strong> / <strong>last</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# w</span><br><span class="line"> 23:31:16 up 12:16,  2 users,  load average: 0.00, 0.01, 0.05</span><br><span class="line">USER     TTY      FROM             LOGIN@   IDLE   JCPU   PCPU WHAT</span><br><span class="line">root     pts/0    182.139.66.250   23:03    4.00s  0.02s  0.00s w</span><br><span class="line">jackfrue pts/1    182.139.66.250   23:26    3:56   0.00s  0.00s -bash</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# who</span><br><span class="line">root     pts/0        2018-04-12 23:03 (182.139.66.250)</span><br><span class="line">jackfrued pts/1        2018-04-12 23:26 (182.139.66.250)</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# who am i</span><br><span class="line">root     pts/0        2018-04-12 23:03 (182.139.66.250)</span><br></pre></td></tr></table></figure></li><li><p>查看自己使用的Shell - <strong>ps</strong>。</p><p>Shell也被称为“壳”，它是用户与内核交流的翻译官，简单的说就是人与计算机交互的接口。目前很多Linux系统默认的Shell都是bash（<u>B</u>ourne <u>A</u>gain <u>SH</u>ell），因为它可以使用Tab键进行命令补全、可以保存历史命令、可以方便的配置环境变量以及执行批处理操作等。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 3531 pts/0    00:00:00 bash</span><br><span class="line"> 3553 pts/0    00:00:00 ps</span><br></pre></td></tr></table></figure></li><li><p>查看命令的说明 - <strong>whatis</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# whatis ps</span><br><span class="line">ps (1)        - report a snapshot of the current processes.</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# whatis python</span><br><span class="line">python (1)    - an interpreted, interactive, object-oriented programming language</span><br></pre></td></tr></table></figure></li><li><p>查看命令的位置 - <strong>which</strong> / <strong>whereis</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# whereis ps</span><br><span class="line">ps: /usr/bin/ps /usr/share/man/man1/ps.1.gz</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# whereis python</span><br><span class="line">python: /usr/bin/python /usr/bin/python2.7 /usr/lib/python2.7 /usr/lib64/python2.7 /etc/python /usr/include/python2.7 /usr/share/man/man1/python.1.gz</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# which ps</span><br><span class="line">/usr/bin/ps</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# which python</span><br><span class="line">/usr/bin/python</span><br></pre></td></tr></table></figure></li><li><p>查看帮助文档 - <strong>man</strong> / <strong>info</strong> / <strong>apropos</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# ps --help</span><br><span class="line">Usage:</span><br><span class="line"> ps [options]</span><br><span class="line"> Try 'ps --help &lt;simple|list|output|threads|misc|all&gt;'</span><br><span class="line">  or 'ps --help &lt;s|l|o|t|m|a&gt;'</span><br><span class="line"> for additional help text.</span><br><span class="line">For more details see ps(1).</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# man ps</span><br><span class="line">PS(1)                                User Commands                                PS(1)</span><br><span class="line">NAME</span><br><span class="line">       ps - report a snapshot of the current processes.</span><br><span class="line">SYNOPSIS</span><br><span class="line">       ps [options]</span><br><span class="line">DESCRIPTION</span><br><span class="line">...</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# info ps</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>切换用户 - <strong>su</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# su hellokitty</span><br><span class="line">[hellokitty@izwz97tbgo9lkabnat2lo8z root]$</span><br></pre></td></tr></table></figure></li><li><p>以管理员身份执行命令 - <strong>sudo</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[jackfrued@izwz97tbgo9lkabnat2lo8z ~]$ ls /root</span><br><span class="line">ls: cannot open directory /root: Permission denied</span><br><span class="line">[jackfrued@izwz97tbgo9lkabnat2lo8z ~]$ sudo ls /root</span><br><span class="line">[sudo] password for jackfrued:</span><br><span class="line">calendar.py  code  error.txt  hehe  hello.c  index.html  myconf  result.txt</span><br></pre></td></tr></table></figure><blockquote><p><strong>说明</strong>：如果希望用户能够以管理员身份执行命令，用户必须被添加到sudoers名单中，该文件在 <code>/etc</code>目录下。</p></blockquote></li><li><p>登入登出相关 - <strong>logout</strong> / <strong>exit</strong> / <strong>adduser</strong> / <strong>userdel</strong> / <strong>passwd</strong> / <strong>ssh</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# adduser hellokitty</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# passwd hellokitty</span><br><span class="line">Changing password for user jackfrued.</span><br><span class="line">New password:</span><br><span class="line">Retype new password:</span><br><span class="line">passwd: all authentication tokens updated successfully.</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# ssh hellokitty@1.2.3.4</span><br><span class="line">hellokitty@1.2.3.4's password:</span><br><span class="line">Last login: Thu Apr 12 23:05:32 2018 from 10.12.14.16</span><br><span class="line">[hellokitty@izwz97tbgo9lkabnat2lo8z ~]$ logout</span><br><span class="line">Connection to 1.2.3.4 closed.</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]#</span><br></pre></td></tr></table></figure></li><li><p>查看系统和主机名 - <strong>uname</strong> / <strong>hostname</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# uname</span><br><span class="line">Linux</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# hostname</span><br><span class="line">izwz97tbgo9lkabnat2lo8z</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat /etc/centos-release</span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br></pre></td></tr></table></figure></li><li><p>重启和关机 - <strong>reboot</strong> / <strong>init 6</strong> / <strong>shutdown</strong> / <strong>init 0</strong>。</p></li><li><p>查看历史命令 - <strong>history</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# history</span><br><span class="line">...</span><br><span class="line">452  ls</span><br><span class="line">453  cd Python-3.6.5/</span><br><span class="line">454  clear</span><br><span class="line">455  history</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# !454</span><br></pre></td></tr></table></figure><blockquote><p>说明：查看到历史命令之后，可以用<code>!历史命令编号</code>来重新执行该命令；通过<code>history -c</code>可以清除历史命令。</p></blockquote></li></ol><h3 id="实用程序"><a class="header-anchor" href="#实用程序"></a>实用程序</h3><h4 id="文件和文件夹操作"><a class="header-anchor" href="#文件和文件夹操作"></a>文件和文件夹操作</h4><ol><li><p>创建/删除目录 - <strong>mkdir</strong> / <strong>rmdir</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mkdir abc</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mkdir -p xyz/abc</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# rmdir abc</span><br></pre></td></tr></table></figure></li><li><p>创建/删除文件 - <strong>touch</strong> / <strong>rm</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# touch readme.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# touch error.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# rm error.txt</span><br><span class="line">rm: remove regular empty file ‘error.txt’? y</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# rm -rf xyz</span><br></pre></td></tr></table></figure><ul><li>touch命令用于创建空白文件或修改文件时间。在Linux系统中一个文件有三种时间：<ul><li>更改内容的时间 - mtime。</li><li>更改权限的时间 - ctime。</li><li>最后访问时间 - atime。</li></ul></li><li>rm的几个重要参数：<ul><li>-i：交互式删除，每个删除项都会进行询问。</li><li>-r：删除目录并递归的删除目录中的文件和目录。</li><li>-f：强制删除，忽略不存在的文件，没有任何提示。</li></ul></li></ul></li><li><p>切换和查看当前工作目录 - <strong>cd</strong> / <strong>pwd</strong>。</p><blockquote><p>说明：<code>cd</code>命令后面可以跟相对路径（以当前路径作为参照）或绝对路径（以<code>/</code>开头）来切换到指定的目录，也可以用<code>cd ..</code>来返回上一级目录。</p></blockquote></li><li><p>查看目录内容 - <strong>ls</strong>。</p><ul><li>-l：以长格式查看文件和目录。</li><li>-a：显示以点开头的文件和目录（隐藏文件）。</li><li>-R：遇到目录要进行递归展开（继续列出目录下面的文件和目录）。</li><li>-d：只列出目录，不列出其他内容。</li><li>-S/-t：按大小/时间排序。</li></ul></li><li><p>查看文件内容 - <strong>cat</strong> / <strong>head</strong> / <strong>tail</strong> / <strong>more</strong> / <strong>less</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget http://www.sohu.com/ -O sohu.html</span><br><span class="line">--2018-06-20 18:42:34--  http://www.sohu.com/</span><br><span class="line">Resolving www.sohu.com (www.sohu.com)... 14.18.240.6</span><br><span class="line">Connecting to www.sohu.com (www.sohu.com)|14.18.240.6|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 212527 (208K) [text/html]</span><br><span class="line">Saving to: ‘sohu.html’</span><br><span class="line"><span class="meta">100%</span><span class="bash">[==================================================&gt;] 212,527     --.-K/s   <span class="keyword">in</span> 0.03s</span></span><br><span class="line">2018-06-20 18:42:34 (7.48 MB/s) - ‘sohu.html’ saved [212527/212527]</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat sohu.html</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# head -10 sohu.html</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;title&gt;搜狐&lt;/title&gt;</span><br><span class="line">&lt;meta name="Keywords" content="搜狐,门户网站,新媒体,网络媒体,新闻,财经,体育,娱乐,时尚,汽车,房产,科技,图片,论坛,微博,博客,视频,电影,电视剧"/&gt;</span><br><span class="line">&lt;meta name="Description" content="搜狐网为用户提供24小时不间断的最新资讯，及搜索、邮件等网络服务。内容包括全球热点事件、突发新闻、时事评论、热播影视剧、体育赛事、行业动态、生活服务信息，以及论坛、博客、微博、我的搜狐等互动空间。" /&gt;</span><br><span class="line">&lt;meta name="shenma-site-verification" content="1237e4d02a3d8d73e96cbd97b699e9c3_1504254750"&gt;</span><br><span class="line">&lt;meta charset="utf-8"/&gt;</span><br><span class="line">&lt;meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/&gt;</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# tail -2 sohu.html</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# less sohu.html</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat -n sohu.html | more</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>拷贝/移动文件 - <strong>cp</strong> / <strong>mv</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mkdir backup</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cp sohu.html backup/</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cd backup</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z backup]# ls</span><br><span class="line">sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z backup]# mv sohu.html sohu_index.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z backup]# ls</span><br><span class="line">sohu_index.html</span><br></pre></td></tr></table></figure></li><li><p>查找文件和查找内容 - <strong>find</strong> / <strong>grep</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# find / -name "*.html"</span><br><span class="line">/root/sohu.html</span><br><span class="line">/root/backup/sohu_index.html</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# find . -atime 7 -type f -print</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# find . -type f -size +2k</span><br><span class="line">[root@izwz97tbgo9lkabnat2lo8z ~]# find . -type f -name "*.swp" -delete</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# grep "&lt;script&gt;" sohu.html -n</span><br><span class="line">20:&lt;script&gt;</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# grep -E \&lt;\/?script.*\&gt; sohu.html -n</span><br><span class="line">20:&lt;script&gt;</span><br><span class="line">22:&lt;/script&gt;</span><br><span class="line">24:&lt;script src="//statics.itc.cn/web/v3/static/js/es5-shim-08e41cfc3e.min.js"&gt;&lt;/script&gt;</span><br><span class="line">25:&lt;script src="//statics.itc.cn/web/v3/static/js/es5-sham-1d5fa1124b.min.js"&gt;&lt;/script&gt;</span><br><span class="line">26:&lt;script src="//statics.itc.cn/web/v3/static/js/html5shiv-21fc8c2ba6.js"&gt;&lt;/script&gt;</span><br><span class="line">29:&lt;script type="text/javascript"&gt;</span><br><span class="line">52:&lt;/script&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>说明：<code>grep</code>在搜索字符串时可以使用正则表达式，如果需要使用正则表达式可以用<code>grep -E</code>或者直接使用<code>egrep</code>。</p></blockquote></li><li><p>链接 - <strong>ln</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l sohu.html</span><br><span class="line">-rw-r--r-- 1 root root 212131 Jun 20 19:15 sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ln /root/sohu.html /root/backup/sohu_backup</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l sohu.html</span><br><span class="line">-rw-r--r-- 2 root root 212131 Jun 20 19:15 sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ln /root/sohu.html /root/backup/sohu_backup2</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l sohu.html</span><br><span class="line">-rw-r--r-- 3 root root 212131 Jun 20 19:15 sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ln -s /etc/centos-release sysinfo</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l sysinfo</span><br><span class="line">lrwxrwxrwx 1 root root 19 Jun 20 19:21 sysinfo -&gt; /etc/centos-release</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat sysinfo</span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat /etc/centos-release</span><br><span class="line">CentOS Linux release 7.4.1708 (Core)</span><br></pre></td></tr></table></figure><blockquote><p>说明：链接可以分为硬链接和软链接（符号链接）。硬链接可以认为是一个指向文件数据的指针，就像Python中对象的引用计数，每添加一个硬链接，文件的对应链接数就增加1，只有当文件的链接数为0时，文件所对应的存储空间才有可能被其他文件覆盖。我们平常删除文件时其实并没有删除硬盘上的数据，我们删除的只是一个指针，或者说是数据的一条使用记录，所以类似于“文件粉碎机”之类的软件在“粉碎”文件时除了删除文件指针，还会在文件对应的存储区域填入数据来保证文件无法再恢复。软链接类似于Windows系统下的快捷方式，当软链接链接的文件被删除时，软链接也就失效了。</p></blockquote></li><li><p>压缩/解压缩和归档/解归档 - <strong>gzip</strong> / <strong>gunzip</strong> / <strong>xz</strong> / <strong>tar</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget http://download.redis.io/releases/redis-4.0.10.tar.gz</span><br><span class="line">--2018-06-20 19:29:59--  http://download.redis.io/releases/redis-4.0.10.tar.gz</span><br><span class="line">Resolving download.redis.io (download.redis.io)... 109.74.203.151</span><br><span class="line">Connecting to download.redis.io (download.redis.io)|109.74.203.151|:80... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 1738465 (1.7M) [application/x-gzip]</span><br><span class="line">Saving to: ‘redis-4.0.10.tar.gz’</span><br><span class="line"><span class="meta">100%</span><span class="bash">[==================================================&gt;] 1,738,465   70.1KB/s   <span class="keyword">in</span> 74s</span></span><br><span class="line">2018-06-20 19:31:14 (22.9 KB/s) - ‘redis-4.0.10.tar.gz’ saved [1738465/1738465]</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls redis*</span><br><span class="line">redis-4.0.10.tar.gz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# gunzip redis-4.0.10.tar.gz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls redis*</span><br><span class="line">redis-4.0.10.tar</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# tar -xvf redis-4.0.10.tar</span><br><span class="line">redis-4.0.10/</span><br><span class="line">redis-4.0.10/.gitignore</span><br><span class="line">redis-4.0.10/00-RELEASENOTES</span><br><span class="line">redis-4.0.10/BUGS</span><br><span class="line">redis-4.0.10/CONTRIBUTING</span><br><span class="line">redis-4.0.10/COPYING</span><br><span class="line">redis-4.0.10/INSTALL</span><br><span class="line">redis-4.0.10/MANIFESTO</span><br><span class="line">redis-4.0.10/Makefile</span><br><span class="line">redis-4.0.10/README.md</span><br><span class="line">redis-4.0.10/deps/</span><br><span class="line">redis-4.0.10/deps/Makefile</span><br><span class="line">redis-4.0.10/deps/README.md</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls redis*</span><br><span class="line">redis-4.0.10.tar</span><br><span class="line">redis-4.0.10:</span><br><span class="line">00-RELEASENOTES  COPYING  Makefile   redis.conf       runtest-sentinel  tests</span><br><span class="line">BUGS             deps     MANIFESTO  runtest          sentinel.conf     utils</span><br><span class="line">CONTRIBUTING     INSTALL  README.md  runtest-cluster  src</span><br></pre></td></tr></table></figure></li><li><p>其他工具 - <strong>sort</strong> / <strong>uniq</strong> / <strong>diff</strong> / <strong>tr</strong> / <strong>cut</strong> / <strong>paste</strong> / <strong>file</strong> / <strong>wc</strong>。</p></li></ol>  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat foo.txt</span><br><span class="line">grape</span><br><span class="line">apple</span><br><span class="line">pitaya</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat bar.txt</span><br><span class="line">100</span><br><span class="line">200</span><br><span class="line">300</span><br><span class="line">400</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# paste foo.txt bar.txt</span><br><span class="line">grape   100</span><br><span class="line">apple   200</span><br><span class="line">pitaya  300</span><br><span class="line">        400</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# paste foo.txt bar.txt &gt; hello.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cut -b 4-8 hello.txt</span><br><span class="line">pe      10</span><br><span class="line">le      20</span><br><span class="line">aya     3</span><br><span class="line">0</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat hello.txt | tr '\t' ','</span><br><span class="line">grape,100</span><br><span class="line">apple,200</span><br><span class="line">pitaya,300</span><br><span class="line">,400</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget https://www.baidu.com/img/bd_logo1.png</span><br><span class="line">--2018-06-20 18:46:53--  https://www.baidu.com/img/bd_logo1.png</span><br><span class="line">Resolving www.baidu.com (www.baidu.com)... 220.181.111.188, 220.181.112.244</span><br><span class="line">Connecting to www.baidu.com (www.baidu.com)|220.181.111.188|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 7877 (7.7K) [image/png]</span><br><span class="line">Saving to: ‘bd_logo1.png’</span><br><span class="line"><span class="meta">100%</span><span class="bash">[==================================================&gt;] 7,877       --.-K/s   <span class="keyword">in</span> 0s</span></span><br><span class="line">2018-06-20 18:46:53 (118 MB/s) - ‘bd_logo1.png’ saved [7877/7877][root@iZwz97tbgo9lkabnat2lo8Z ~]# file bd_logo1.png</span><br><span class="line">bd_logo1.png: PNG image data, 540 x 258, 8-bit colormap, non-interlaced</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wc sohu.html</span><br><span class="line">  2979   6355 212527 sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wc -l sohu.html</span><br><span class="line">2979 sohu.html</span><br></pre></td></tr></table></figure><h4 id="管道和重定向"><a class="header-anchor" href="#管道和重定向"></a>管道和重定向</h4><ol><li><p>管道的使用 - <strong>|</strong>。</p><p>例子：查找当前目录下文件个数。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# find ./ | wc -l</span><br><span class="line">6152</span><br></pre></td></tr></table></figure><p>例子：列出当前路径下的文件和文件夹，给每一项加一个编号。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls | cat -n</span><br><span class="line">     1  dump.rdb</span><br><span class="line">     2  mongodb-3.6.5</span><br><span class="line">     3  Python-3.6.5</span><br><span class="line">     4  redis-3.2.11</span><br><span class="line">     5  redis.conf</span><br></pre></td></tr></table></figure><p>例子：查找record.log中包含AAA，但不包含BBB的记录的总数</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat record.log | grep AAA | grep -v BBB | wc -l</span><br></pre></td></tr></table></figure></li><li><p>输出重定向和错误重定向 - <strong>&gt;</strong> / <strong>&gt;&gt;</strong> / <strong>2&gt;</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat readme.txt</span><br><span class="line">banana</span><br><span class="line">apple</span><br><span class="line">grape</span><br><span class="line">apple</span><br><span class="line">grape</span><br><span class="line">watermelon</span><br><span class="line">pear</span><br><span class="line">pitaya</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat readme.txt | sort | uniq &gt; result.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cat result.txt</span><br><span class="line">apple</span><br><span class="line">banana</span><br><span class="line">grape</span><br><span class="line">pear</span><br><span class="line">pitaya</span><br><span class="line">watermelon</span><br></pre></td></tr></table></figure></li><li><p>输入重定向 - <strong>&lt;</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# echo 'hello, world!' &gt; hello.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wall &lt; hello.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]#</span><br><span class="line">Broadcast message from root@iZwz97tbgo9lkabnat2lo8Z (Wed Jun 20 19:43:05 2018):</span><br><span class="line">hello, world!</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# echo 'I will show you some code.' &gt;&gt; hello.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wall &lt; hello.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]#</span><br><span class="line">Broadcast message from root@iZwz97tbgo9lkabnat2lo8Z (Wed Jun 20 19:43:55 2018):</span><br><span class="line">hello, world!</span><br><span class="line">I will show you some code.</span><br></pre></td></tr></table></figure></li></ol><h4 id="别名"><a class="header-anchor" href="#别名"></a>别名</h4><ol><li><p><strong>alias</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# alias ll='ls -l'</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# alias frm='rm -rf'</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ll</span><br><span class="line">...</span><br><span class="line">drwxr-xr-x  2 root       root   4096 Jun 20 12:52 abc</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# frm abc</span><br></pre></td></tr></table></figure></li><li><p><strong>unalias</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# unalias frm</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# frm sohu.html</span><br><span class="line">-bash: frm: command not found</span><br></pre></td></tr></table></figure></li></ol><h4 id="其他程序"><a class="header-anchor" href="#其他程序"></a>其他程序</h4><ol><li><p>时间和日期 - <strong>date</strong> / <strong>cal</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# date</span><br><span class="line">Wed Jun 20 12:53:19 CST 2018</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cal</span><br><span class="line">      June 2018</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">                1  2</span><br><span class="line"> 3  4  5  6  7  8  9</span><br><span class="line">10 11 12 13 14 15 16</span><br><span class="line">17 18 19 20 21 22 23</span><br><span class="line">24 25 26 27 28 29 30</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cal 5 2017</span><br><span class="line">      May 2017</span><br><span class="line">Su Mo Tu We Th Fr Sa</span><br><span class="line">    1  2  3  4  5  6</span><br><span class="line"> 7  8  9 10 11 12 13</span><br><span class="line">14 15 16 17 18 19 20</span><br><span class="line">21 22 23 24 25 26 27</span><br><span class="line">28 29 30 31</span><br></pre></td></tr></table></figure></li><li><p>录制操作脚本 - <strong>script</strong>。</p></li><li><p>给用户发送消息 - <strong>mesg</strong> / <strong>write</strong> / <strong>wall</strong> / <strong>mail</strong>。</p></li></ol><h3 id="文件系统"><a class="header-anchor" href="#文件系统"></a>文件系统</h3><h4 id="文件和路径"><a class="header-anchor" href="#文件和路径"></a>文件和路径</h4><ol><li>命名规则：文件名的最大长度与文件系统类型有关，一般情况下，文件名不应该超过255个字符，虽然绝大多数的字符都可以用于文件名，但是最好使用英文大小写字母、数字、下划线、点这样的符号。文件名中虽然可以使用空格，但应该尽可能避免使用空格，否则在输入文件名时需要用将文件名放在双引号中或者通过<code>\</code>对空格进行转义。</li><li>扩展名：在Linux系统下文件的扩展名是可选的，但是使用扩展名有助于对文件内容的理解。有些应用程序要通过扩展名来识别文件，但是更多的应用程序并不依赖文件的扩展名，就像<code>file</code>命令在识别文件时并不是依据扩展名来判定文件的类型。</li><li>隐藏文件：以点开头的文件在Linux系统中是隐藏文件（不可见文件）。</li></ol><h4 id="目录结构"><a class="header-anchor" href="#目录结构"></a>目录结构</h4><ol><li>/bin - 基本命令的二进制文件。</li><li>/boot - 引导加载程序的静态文件。</li><li>/dev - 设备文件。</li><li><strong>/etc</strong> - 配置文件。</li><li>/home - 普通用户主目录的父目录。</li><li>/lib - 共享库文件。</li><li>/lib64 - 共享64位库文件。</li><li>/lost+found - 存放未链接文件。</li><li>/media - 自动识别设备的挂载目录。</li><li>/mnt - 临时挂载文件系统的挂载点。</li><li>/opt - 可选插件软件包安装位置。</li><li>/proc -  内核和进程信息。</li><li><strong>/root</strong> - 超级管理员用户主目录。</li><li>/run - 存放系统运行时需要的东西。</li><li>/sbin - 超级用户的二进制文件。</li><li>/sys - 设备的伪文件系统。</li><li>/tmp - 临时文件夹。</li><li><strong>/usr</strong> - 用户应用目录。</li><li>/var - 变量数据目录。</li></ol><h4 id="访问权限"><a class="header-anchor" href="#访问权限"></a>访问权限</h4><ol><li><p><strong>chmod</strong> - 改变文件模式比特。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l</span><br><span class="line">...</span><br><span class="line">-rw-r--r--  1 root       root 211878 Jun 19 16:06 sohu.html</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# chmod g+w,o+w sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l</span><br><span class="line">...</span><br><span class="line">-rw-rw-rw-  1 root       root 211878 Jun 19 16:06 sohu.html</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# chmod 644 sohu.html</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l</span><br><span class="line">...</span><br><span class="line">-rw-r--r--  1 root       root 211878 Jun 19 16:06 sohu.html</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>说明：通过上面的例子可以看出，用<code>chmod</code>改变文件模式比特有两种方式：一种是字符设定法，另一种是数字设定法。除了<code>chmod</code>之外，可以通过<code>umask</code>来设定哪些权限将在新文件的默认权限中被删除。</p></blockquote><p>长格式查看目录或文件时显示结果及其对应权限的数值如下表所示。</p><p><img src="/post/./res/file-mode.png" alt=""></p></li><li><p><strong>chown</strong> - 改变文件所有者。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">   </span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l</span><br><span class="line">...</span><br><span class="line">-rw-r--r--  1 root root     54 Jun 20 10:06 readme.txt</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# chown hellokitty readme.txt</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ls -l</span><br><span class="line">...</span><br><span class="line">-rw-r--r--  1 hellokitty root     54 Jun 20 10:06 readme.txt</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ol><h4 id="磁盘管理"><a class="header-anchor" href="#磁盘管理"></a>磁盘管理</h4><ol><li><p>列出文件系统的磁盘使用状况 - <strong>df</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# df -h</span><br><span class="line">Filesystem      Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/vda1        40G  5.0G   33G  14% /</span><br><span class="line">devtmpfs        486M     0  486M   0% /dev</span><br><span class="line">tmpfs           497M     0  497M   0% /dev/shm</span><br><span class="line">tmpfs           497M  356K  496M   1% /run</span><br><span class="line">tmpfs           497M     0  497M   0% /sys/fs/cgroup</span><br><span class="line">tmpfs           100M     0  100M   0% /run/user/0</span><br></pre></td></tr></table></figure></li><li><p>磁盘分区表操作 - <strong>fdisk</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# fdisk -l</span><br><span class="line">Disk /dev/vda: 42.9 GB, 42949672960 bytes, 83886080 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br><span class="line">Disk label type: dos</span><br><span class="line">Disk identifier: 0x000a42f4</span><br><span class="line">   Device Boot      Start         End      Blocks   Id  System</span><br><span class="line">/dev/vda1   *        2048    83884031    41940992   83  Linux</span><br><span class="line">Disk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectors</span><br><span class="line">Units = sectors of 1 * 512 = 512 bytes</span><br><span class="line">Sector size (logical/physical): 512 bytes / 512 bytes</span><br><span class="line">I/O size (minimum/optimal): 512 bytes / 512 bytes</span><br></pre></td></tr></table></figure></li><li><p>格式化文件系统 - <strong>mkfs</strong>。</p></li><li><p>文件系统检查 - <strong>fsck</strong>。</p></li><li><p>挂载/卸载 - <strong>mount</strong> / <strong>umount</strong>。</p></li></ol><h3 id="编辑器-vim"><a class="header-anchor" href="#编辑器-vim"></a>编辑器 - vim</h3><ol><li><p>启动vim。可以通过<code>vi</code>或<code>vim</code>命令来启动vim，启动时可以指定文件名来打开一个文件，如果没有指定文件名，也可以在保存的时候指定文件名。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim guess.py</span><br></pre></td></tr></table></figure></li><li><p>命令模式、编辑模式和末行模式：启动vim进入的是命令模式（也称为Normal模式），在命令模式下输入英文字母<code>i</code>会进入编辑模式（Insert模式），屏幕下方出现<code>-- INSERT --</code>提示；在编辑模式下按下<code>Esc</code>会回到命令模式，此时如果输入英文<code>:</code>会进入末行模式，在末行模式下输入<code>q!</code>可以在不保存当前工作的情况下强行退出vim；在命令模式下输入<code>v</code>会进入可视模式（Visual模式），可以用光标选择一个区域再完成对应的操作。</p></li><li><p>保存和退出vim：在命令模式下输入<code>:</code> 进入末行模式，输入<code>wq</code>可以实现保存退出；如果想放弃编辑的内容输入<code>q!</code>强行退出，这一点刚才已经提到过了；在命令模式下也可以直接输入<code>ZZ</code>实现保存退出。如果只想保存文件不退出，那么可以在末行模式下输入<code>w</code>；可以在<code>w</code>后面输入空格再指定要保存的文件名。</p></li><li><p>光标操作。</p><ul><li>在命令模式下可以通过<code>h</code>、<code>j</code>、<code>k</code>、<code>l</code>来控制光标向左、下、上、右的方向移动，可以在字母前输入数字来表示移动的距离，例如：<code>10h</code>表示向左移动10个字符。</li><li>在命令模式下可以通过<code>Ctrl+y</code>和<code>Ctrl+e</code>来实现向上、向下滚动一行文本的操作，可以通过<code>Ctrl+f</code>和<code>Ctrl+b</code>来实现向前和向后翻页的操作。</li><li>在命令模式下可以通过输入英文字母<code>G</code>将光标移到文件的末尾，可以通过<code>gg</code>将光标移到文件的开始，也可以通过在<code>G</code>前输入数字来将光标移动到指定的行。</li></ul></li><li><p>文本操作。</p><ul><li>删除：在命令模式下可以用<code>dd</code>来删除整行；可以在<code>dd</code>前加数字来指定删除的行数；可以用<code>d$</code>来实现删除从光标处删到行尾的操作，也可以通过<code>d0</code>来实现从光标处删到行首的操作；如果想删除一个单词，可以使用<code>dw</code>；如果要删除全文，可以在输入<code>:%d</code>（其中<code>:</code>用来从命令模式进入末行模式）。</li><li>复制和粘贴：在命令模式下可以用<code>yy</code>来复制整行；可以在<code>yy</code>前加数字来指定复制的行数；可以通过<code>p</code>将复制的内容粘贴到光标所在的地方。</li><li>撤销和恢复：在命令模式下输入<code>u</code>可以撤销之前的操作；通过<code>Ctrl+r</code>可以恢复被撤销的操作。</li><li>对内容进行排序：在命令模式下输入<code>%!sort</code>。</li></ul></li><li><p>查找和替换。</p><ul><li>查找操作需要输入<code>/</code>进入末行模式并提供正则表达式来匹配与之对应的内容，例如：<code>/doc.*\.</code>，输入<code>n</code>来向前搜索，也可以输入<code>N</code>来向后搜索。</li><li>替换操作需要输入<code>:</code>进入末行模式并指定搜索的范围、正则表达式以及替换后的内容和匹配选项，例如：<code>:1,$s/doc.*/hello/gice</code>，其中：<ul><li><code>g</code> - global：全局匹配。</li><li><code>i</code> - ignore case：忽略大小写匹配。</li><li><code>c</code> - confirm：替换时需要确认。</li><li><code>e</code> - error：忽略错误。</li></ul></li></ul></li><li><p>参数设定：在输入<code>:</code>进入末行模式后可以对vim进行设定。</p><ul><li><p>设置Tab键的空格数：<code>set ts=4</code></p></li><li><p>设置显示/不显示行号：<code>set nu</code> / <code>set nonu</code></p></li><li><p>设置启用/关闭高亮语法：<code>syntax on</code> / <code>syntax off</code></p></li><li><p>设置显示标尺（光标所在的行和列）： <code>set ruler</code></p></li><li><p>设置启用/关闭搜索结果高亮：<code>set hls</code> / <code>set nohls</code></p><blockquote><p>说明：如果希望上面的这些设定在每次启动vim时都能生效，需要将这些设定写到用户主目录下的.vimrc文件中。</p></blockquote></li></ul></li><li><p>高级技巧</p><ul><li><p>比较多个文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim -d foo.txt bar.txt</span><br></pre></td></tr></table></figure><p><img src="/post/./res/vim-diff.png" alt=""></p></li><li><p>打开多个文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim foo.txt bar.txt hello.txt</span><br></pre></td></tr></table></figure><p>启动vim后只有一个窗口显示的是foo.txt，可以在末行模式中输入<code>ls</code>查看到打开的三个文件，也可以在末行模式中输入<code>b &lt;num&gt;</code>来显示另一个文件，例如可以用<code>:b 2</code>将bar.txt显示出来，可以用<code>:b 3</code>将hello.txt显示出来。</p></li><li><p>拆分和切换窗口。</p><p>可以在末行模式中输入<code>sp</code>或<code>vs</code>来实现对窗口的水平或垂直拆分，这样我们就可以同时打开多个编辑窗口，通过按两次<code>Ctrl+w</code>就可以实现编辑窗口的切换，在一个窗口中执行退出操作只会关闭对应的窗口，其他的窗口继续保留。</p><p><img src="/post/./res/vim-multi-window.png" alt=""></p></li><li><p>映射快捷键：在vim下可以将一些常用操作映射为快捷键来提升工作效率。</p><ul><li><p>例子1：在命令模式下输入<code>F4</code>执行从第一行开始删除10000行代码的操作。</p><p><code>:map &lt;F4&gt; gg10000dd</code>。</p><p>例子2：在编辑模式下输入<code>__main</code>直接补全为<code>if __name__ == '__main__':</code>。</p><p><code>:inoremap __main if __name__ == '__main__':</code></p></li></ul><blockquote><p>说明：上面例子2的<code>inoremap</code>中的<code>i</code>表示映射的键在编辑模式使用， <code>nore</code>表示不要递归，这一点非常重要，否则如果键对应的内容中又出现键本身，就会引发递归（相当于进入了死循环）。如果希望映射的快捷键每次启动vim时都能生效，需要将映射写到用户主目录下的.vimrc文件中。</p></blockquote></li><li><p>录制宏。</p><ul><li><p>在命令模式下输入<code>qa</code>开始录制宏（其中<code>a</code>是寄存器的名字，也可以是其他英文字母或0-9的数字）。</p></li><li><p>执行你的操作（光标操作、编辑操作等），这些操作都会被录制下来。</p></li><li><p>如果录制的操作已经完成了，按<code>q</code>结束录制。</p></li><li><p>通过<code>@a</code>（<code>a</code>是刚才使用的寄存器的名字）播放宏，如果要多次执行宏可以在前面加数字，例如<code>100@a</code>表示将宏播放100次。</p></li><li><p>可以试一试下面的例子来体验录制宏的操作，该例子来源于<a href="https://harttle.land/tags.html#Vim" target="_blank" rel="noopener">Harttle Land网站</a>，该网站上提供了很多关于vim的使用技巧，有兴趣的可以去了解一下。</p><p><img src="/post/./res/vim-macro.png" alt=""></p></li></ul></li></ul></li></ol><h3 id="软件安装和配置"><a class="header-anchor" href="#软件安装和配置"></a>软件安装和配置</h3><h4 id="使用包管理工具"><a class="header-anchor" href="#使用包管理工具"></a>使用包管理工具</h4><ol><li><strong>yum</strong> - Yellowdog Updater Modified。<ul><li><code>yum search</code>：搜索软件包，例如<code>yum search nginx</code>。</li><li><code>yum list installed</code>：列出已经安装的软件包，例如<code>yum list installed | grep zlib</code>。</li><li><code>yum install</code>：安装软件包，例如<code>yum install nginx</code>。</li><li><code>yum remove</code>：删除软件包，例如<code>yum remove nginx</code>。</li><li><code>yum update</code>：更新软件包，例如<code>yum update</code>可以更新所有软件包，而<code>yum update tar</code>只会更新tar。</li><li><code>yum check-update</code>：检查有哪些可以更新的软件包。</li><li><code>yum info</code>：显示软件包的相关信息，例如<code>yum info nginx</code>。</li></ul></li><li><strong>rpm</strong> - Redhat Package Manager。<ul><li>安装软件包：<code>rpm -ivh &lt;packagename&gt;.rpm</code>。</li><li>移除软件包：<code>rpm -e &lt;packagename&gt;</code>。</li><li>查询软件包：<code>rpm -qa</code>，例如可以用<code>rpm -qa | grep mysql</code>来检查是否安装了MySQL相关的软件包。</li></ul></li></ol><p>下面以Nginx为例，演示如何使用yum安装软件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# yum -y install nginx</span><br><span class="line">...</span><br><span class="line">Installed:</span><br><span class="line">  nginx.x86_64 1:1.12.2-2.el7</span><br><span class="line">Dependency Installed:</span><br><span class="line">  nginx-all-modules.noarch 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-http-geoip.x86_64 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-http-image-filter.x86_64 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-http-perl.x86_64 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-http-xslt-filter.x86_64 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-mail.x86_64 1:1.12.2-2.el7</span><br><span class="line">  nginx-mod-stream.x86_64 1:1.12.2-2.el7</span><br><span class="line">Complete!</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# yum info nginx</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">Installed Packages</span><br><span class="line">Name        : nginx</span><br><span class="line">Arch        : x86_64</span><br><span class="line">Epoch       : 1</span><br><span class="line">Version     : 1.12.2</span><br><span class="line">Release     : 2.el7</span><br><span class="line">Size        : 1.5 M</span><br><span class="line">Repo        : installed</span><br><span class="line">From repo   : epel</span><br><span class="line">Summary     : A high performance web server and reverse proxy server</span><br><span class="line">URL         : http://nginx.org/</span><br><span class="line">License     : BSD</span><br><span class="line">Description : Nginx is a web server and a reverse proxy server for HTTP, SMTP, POP3 and</span><br><span class="line">            : IMAP protocols, with a strong focus on high concurrency, performance and low</span><br><span class="line">            : memory usage.</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# nginx -v</span><br><span class="line">nginx version: nginx/1.12.2</span><br></pre></td></tr></table></figure><p>移除Nginx。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# nginx -s stop</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# yum -y remove nginx</span><br></pre></td></tr></table></figure><p>下面以MySQL为例，演示如何使用rpm安装软件。要安装MySQL需要先到<a href="https://www.mysql.com/" target="_blank" rel="noopener">MySQL官方网站</a>下载对应的<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener">RPM文件</a>，当然要选择和你使用的Linux系统对应的版本。MySQL现在是Oracle公司旗下的产品，在MySQL被收购后，MySQL的作者重新制作了一个MySQL的分支MariaDB，可以通过yum进行安装。如果要安装MySQL需要先通过yum删除<code>mariadb-libs</code>这个可能会跟MySQL底层库冲突的库，然后还需要安装一个名为<code>libaio</code>的依赖库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z mysql]# ls</span><br><span class="line">mysql-community-client-5.7.22-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-common-5.7.22-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-libs-5.7.22-1.el7.x86_64.rpm</span><br><span class="line">mysql-community-server-5.7.22-1.el7.x86_64.rpm</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z mysql]# yum -y remove mariadb-libs</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z mysql]# yum -y install libaio</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z mysql]# ls | xargs rpm -ivh</span><br><span class="line">warning: mysql-community-client-5.7.22-1.el7.x86_64.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY</span><br><span class="line">Preparing...                          ################################# [100%]</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>说明：由于MySQL和<a href="https://mariadb.org/" target="_blank" rel="noopener">MariaDB</a>的底层依赖库是有冲突的，所以上面我们首先用<code>yum</code>移除了名为mariadb-libs的依赖库并安装了名为libaio的依赖库。由于我们将安装MySQL所需的rpm文件放在一个独立的目录中，所以可以通过<code>ls</code>命令查看到安装文件并用<code>xargs</code>将<code>ls</code>的输出作为参数交给<code>rpm -ivh</code>来进行安装。关于MySQL和MariaDB之间的关系，可以阅读<a href="https://zh.wikipedia.org/wiki/MariaDB" target="_blank" rel="noopener">维基百科</a>上关于MariaDB的介绍。</p></blockquote><p>移除安装的MySQL。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# rpm -qa | grep mysql | xargs rpm -e</span><br></pre></td></tr></table></figure><h4 id="下载解压配置环境变量"><a class="header-anchor" href="#下载解压配置环境变量"></a>下载解压配置环境变量</h4><p>下面以安装MongoDB为例，演示这类软件应该如何安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-3.6.5.tgz</span><br><span class="line">--2018-06-21 18:32:53--  https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel70-3.6.5.tgz</span><br><span class="line">Resolving fastdl.mongodb.org (fastdl.mongodb.org)... 52.85.83.16, 52.85.83.228, 52.85.83.186, ...</span><br><span class="line">Connecting to fastdl.mongodb.org (fastdl.mongodb.org)|52.85.83.16|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 100564462 (96M) [application/x-gzip]</span><br><span class="line">Saving to: ‘mongodb-linux-x86_64-rhel70-3.6.5.tgz’</span><br><span class="line"><span class="meta">100%</span><span class="bash">[==================================================&gt;] 100,564,462  630KB/s   <span class="keyword">in</span> 2m 9s</span></span><br><span class="line">2018-06-21 18:35:04 (760 KB/s) - ‘mongodb-linux-x86_64-rhel70-3.6.5.tgz’ saved [100564462/100564462]</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# gunzip mongodb-linux-x86_64-rhel70-3.6.5.tgz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# tar -xvf mongodb-linux-x86_64-rhel70-3.6.5.tar</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/README</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/THIRD-PARTY-NOTICES</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/MPL-2</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/GNU-AGPL-3.0</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongodump</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongorestore</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongoexport</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongoimport</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongostat</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongotop</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/bsondump</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongofiles</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongoreplay</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongoperf</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongod</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongos</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/mongo</span><br><span class="line">mongodb-linux-x86_64-rhel70-3.6.5/bin/install_compass</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# vim .bash_profile</span><br><span class="line">...</span><br><span class="line">PATH=$PATH:$HOME/bin:$HOME/mongodb-linux-x86_64-rhel70-3.6.5/bin</span><br><span class="line">export PATH</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# source .bash_profile</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mongod --version</span><br><span class="line">db version v3.6.5</span><br><span class="line">git version: a20ecd3e3a174162052ff99913bc2ca9a839d618</span><br><span class="line">OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013</span><br><span class="line">allocator: tcmalloc</span><br><span class="line">modules: none</span><br><span class="line">build environment:</span><br><span class="line">    distmod: rhel70</span><br><span class="line">    distarch: x86_64</span><br><span class="line">    target_arch: x86_64</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mongo --version</span><br><span class="line">MongoDB shell version v3.6.5</span><br><span class="line">git version: a20ecd3e3a174162052ff99913bc2ca9a839d618</span><br><span class="line">OpenSSL version: OpenSSL 1.0.1e-fips 11 Feb 2013</span><br><span class="line">allocator: tcmalloc</span><br><span class="line">modules: none</span><br><span class="line">build environment:</span><br><span class="line">    distmod: rhel70</span><br><span class="line">    distarch: x86_64</span><br><span class="line">    target_arch: x86_64</span><br></pre></td></tr></table></figure><blockquote><p>说明：当然也可以通过yum来安装MongoDB，具体可以参照<a href="https://docs.mongodb.com/master/administration/install-on-linux/" target="_blank" rel="noopener">官方网站</a>上给出的说明。</p></blockquote><h4 id="源代码构建安装"><a class="header-anchor" href="#源代码构建安装"></a>源代码构建安装</h4><ol><li><p>安装Python 3.6。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# yum install gcc</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget https://www.python.org/ftp/python/3.6.5/Python-3.6.5.tgz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# gunzip Python-3.6.5.tgz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# tar -xvf Python-3.6.5.tar</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cd Python-3.6.5</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ./configure --prefix=/usr/local/python36 --enable-optimizations</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# make &amp;&amp; make install</span><br><span class="line">... 配置环境变量 ...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ln -s /usr/local/python36/bin/python3.6 /usr/bin/python3</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# python3 --version</span><br><span class="line">Python 3.6.5</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# python3 -m pip install -U pip</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# pip3 --version</span><br></pre></td></tr></table></figure></li><li><p>安装Redis-3.2.12。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# wget http://download.redis.io/releases/redis-3.2.12.tar.gz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# gunzip redis-3.2.12.tar.gz</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# tar -xvf redis-3.2.12.tar</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cd redis-3.2.12</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# make &amp;&amp; make install</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# redis-server --version</span><br><span class="line">Redis server v=3.2.12 sha=00000000:0 malloc=jemalloc-4.0.3 bits=64 build=5bc5cd3c03d6ceb6</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# redis-cli --version</span><br><span class="line">redis-cli 3.2.12</span><br></pre></td></tr></table></figure></li></ol><h3 id="配置服务"><a class="header-anchor" href="#配置服务"></a>配置服务</h3><ol><li><p>启动服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl start firewalld</span><br></pre></td></tr></table></figure></li><li><p>终止服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl stop firewalld</span><br></pre></td></tr></table></figure></li><li><p>重启服务。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl restart firewalld</span><br></pre></td></tr></table></figure></li><li><p>查看服务。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl status firewalld</span><br></pre></td></tr></table></figure></li><li><p>设置是否开机自启。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl enable firewalld</span><br><span class="line">Created symlink from /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service to /usr/lib/systemd/system/firewalld.service.</span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/firewalld.service to /usr/lib/systemd/system/firewalld.service.</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# systemctl disable firewalld</span><br><span class="line">Removed symlink /etc/systemd/system/multi-user.target.wants/firewalld.service.</span><br><span class="line">Removed symlink /etc/systemd/system/dbus-org.fedoraproject.FirewallD1.service.</span><br></pre></td></tr></table></figure></li></ol><h3 id="计划任务"><a class="header-anchor" href="#计划任务"></a>计划任务</h3><ol><li><p><strong>crontab</strong>命令。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# crontab -e</span><br><span class="line">* * * * * echo "hello, world!" &gt;&gt; /root/hello.txt</span><br><span class="line">59 23 * * * rm -f /root/*.log</span><br></pre></td></tr></table></figure><blockquote><p>说明：输入<code>crontab -e</code>命令会打开vim来编辑Cron表达式并指定触发的任务，上面我们定制了两个计划任务，一个是每分钟向/root目录下的hello.txt中追加输出<code>hello, world!</code>；另一个是每天23时59分执行删除/root目录下以log为后缀名的文件。如果不知道Cron表达式如何书写，可以参照/etc/crontab文件中的提示（下面会讲到）或者用谷歌或百度搜索一下，也可以使用Cron表达式在线生成器来生成Cron表达式。</p></blockquote></li><li><p>crontab相关文件。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# cd /etc</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z etc]# ls -l | grep cron</span><br><span class="line">-rw-------.  1 root root      541 Aug  3  2017 anacrontab</span><br><span class="line">drwxr-xr-x.  2 root root     4096 Mar 27 11:56 cron.d</span><br><span class="line">drwxr-xr-x.  2 root root     4096 Mar 27 11:51 cron.daily</span><br><span class="line">-rw-------.  1 root root        0 Aug  3  2017 cron.deny</span><br><span class="line">drwxr-xr-x.  2 root root     4096 Mar 27 11:50 cron.hourly</span><br><span class="line">drwxr-xr-x.  2 root root     4096 Jun 10  2014 cron.monthly</span><br><span class="line">-rw-r--r--   1 root root      493 Jun 23 15:09 crontab</span><br><span class="line">drwxr-xr-x.  2 root root     4096 Jun 10  2014 cron.weekly</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z etc]# vim crontab</span><br><span class="line">  1 SHELL=/bin/bash</span><br><span class="line">  2 PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">  3 MAILTO=root</span><br><span class="line">  4</span><br><span class="line">  5 # For details see man 4 crontabs</span><br><span class="line">  6</span><br><span class="line">  7 # Example of job definition:</span><br><span class="line">  8 # .---------------- minute (0 - 59)</span><br><span class="line">  9 # |  .------------- hour (0 - 23)</span><br><span class="line"> 10 # |  |  .---------- day of month (1 - 31)</span><br><span class="line"> 11 # |  |  |  .------- month (1 - 12) OR jan,feb,mar,apr ...</span><br><span class="line"> 12 # |  |  |  |  .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat</span><br><span class="line"> 13 # |  |  |  |  |</span><br><span class="line"> 14 # *  *  *  *  * user-name  command to be executed</span><br></pre></td></tr></table></figure><p>通过修改<code>/etc</code>目录下的crontab文件也能够定制计划任务。</p></li></ol><h3 id="网络访问和管理"><a class="header-anchor" href="#网络访问和管理"></a>网络访问和管理</h3><ol><li><p>通过网络获取资源 - <strong>wget</strong>。</p><ul><li>-b 后台下载模式</li><li>-O 下载到指定的目录</li><li>-r 递归下载</li></ul></li><li><p>显示/操作网络配置（旧） - <strong>ifconfig</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ifconfig eth0</span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.18.61.250  netmask 255.255.240.0  broadcast 172.18.63.255</span><br><span class="line">        ether 00:16:3e:02:b6:46  txqueuelen 1000  (Ethernet)</span><br><span class="line">        RX packets 1067841  bytes 1296732947 (1.2 GiB)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 409912  bytes 43569163 (41.5 MiB)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions</span><br></pre></td></tr></table></figure></li><li><p>显示/操作网络配置（新） - <strong>ip</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ip address</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP qlen 1000</span><br><span class="line">    link/ether 00:16:3e:02:b6:46 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.18.61.250/20 brd 172.18.63.255 scope global eth0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br></pre></td></tr></table></figure></li><li><p>网络可达性检查 - <strong>ping</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ping www.baidu.com -c 3</span><br><span class="line">PING www.a.shifen.com (220.181.111.188) 56(84) bytes of data.</span><br><span class="line">64 bytes from 220.181.111.188 (220.181.111.188): icmp_seq=1 ttl=51 time=36.3 ms</span><br><span class="line">64 bytes from 220.181.111.188 (220.181.111.188): icmp_seq=2 ttl=51 time=36.4 ms</span><br><span class="line">64 bytes from 220.181.111.188 (220.181.111.188): icmp_seq=3 ttl=51 time=36.4 ms</span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2002ms</span><br><span class="line">rtt min/avg/max/mdev = 36.392/36.406/36.427/0.156 ms</span><br></pre></td></tr></table></figure></li><li><p>查看网络服务和端口 - <strong>netstat</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# netstat -nap | grep nginx</span><br></pre></td></tr></table></figure></li><li><p>安全文件拷贝 - <strong>scp</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# scp root@1.2.3.4:/root/guido.jpg hellokitty@4.3.2.1:/home/hellokitty/pic.jpg</span><br></pre></td></tr></table></figure></li><li><p>安全文件传输 - <strong>sftp</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# sftp root@120.77.222.217</span><br><span class="line">root@120.77.222.217's password:</span><br><span class="line">Connected to 120.77.222.217.</span><br><span class="line"><span class="meta">sftp&gt;</span><span class="bash"></span></span><br></pre></td></tr></table></figure><ul><li><p><code>help</code>：显示帮助信息。</p></li><li><p><code>ls</code>/<code>lls</code>：显示远端/本地目录列表。</p></li><li><p><code>cd</code>/<code>lcd</code>：切换远端/本地路径。</p></li><li><p><code>mkdir</code>/<code>lmkdir</code>：创建远端/本地目录。</p></li><li><p><code>pwd</code>/<code>lpwd</code>：显示远端/本地当前工作目录。</p></li><li><p><code>get</code>：下载文件。</p></li><li><p><code>put</code>：上传文件。</p></li><li><p><code>rm</code>：删除远端文件。</p></li><li><p><code>bye</code>/<code>exit</code>/<code>quit</code>：退出sftp。</p></li></ul></li></ol><h3 id="进程管理"><a class="header-anchor" href="#进程管理"></a>进程管理</h3><ol><li><p><strong>ps</strong> - 查询进程。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ps -ef</span><br><span class="line">UID        PID  PPID  C STIME TTY          TIME CMD</span><br><span class="line">root         1     0  0 Jun23 ?        00:00:05 /usr/lib/systemd/systemd --switched-root --system --deserialize 21</span><br><span class="line">root         2     0  0 Jun23 ?        00:00:00 [kthreadd]</span><br><span class="line">...</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ps -ef | grep mysqld</span><br><span class="line">root      4943  4581  0 22:45 pts/0    00:00:00 grep --color=auto mysqld</span><br><span class="line">mysql    25257     1  0 Jun25 ?        00:00:39 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid</span><br></pre></td></tr></table></figure></li><li><p><strong>kill</strong> - 终止进程。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# kill 1234</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# kill -9 1234</span><br></pre></td></tr></table></figure><p>例子：用一条命令强制终止正在运行的Redis进程。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ps -ef | grep redis | grep -v grep | awk '&#123;print $2&#125;' | xargs kill</span><br></pre></td></tr></table></figure></li><li><p>将进程置于后台运行。</p><ul><li><code>Ctrl+Z</code></li><li><code>&amp;</code></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# mongod &amp;</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# redis-server</span><br><span class="line">...</span><br><span class="line">^Z</span><br><span class="line">[4]+  Stopped                 redis-server</span><br></pre></td></tr></table></figure></li><li><p><strong>jobs</strong> - 查询后台进程。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# jobs</span><br><span class="line">[2]   Running                 mongod &amp;</span><br><span class="line">[3]-  Stopped                 cat</span><br><span class="line">[4]+  Stopped                 redis-server</span><br></pre></td></tr></table></figure></li><li><p><strong>bg</strong> - 让进程在后台继续运行。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# bg %4</span><br><span class="line">[4]+ redis-server &amp;</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# jobs</span><br><span class="line">[2]   Running                 mongod &amp;</span><br><span class="line">[3]+  Stopped                 cat</span><br><span class="line">[4]-  Running                 redis-server &amp;</span><br></pre></td></tr></table></figure></li><li><p><strong>fg</strong> - 将后台进程置于前台。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# fg %4</span><br><span class="line">redis-server</span><br><span class="line">^C5554:signal-handler (1530025281) Received SIGINT scheduling shutdown...</span><br><span class="line">5554:M 26 Jun 23:01:21.413 # User requested shutdown...</span><br><span class="line">5554:M 26 Jun 23:01:21.413 * Saving the final RDB snapshot before exiting.</span><br><span class="line">5554:M 26 Jun 23:01:21.415 * DB saved on disk</span><br><span class="line">5554:M 26 Jun 23:01:21.415 # Redis is now ready to exit, bye bye...</span><br></pre></td></tr></table></figure><blockquote><p>说明：置于前台的进程可以使用<code>Ctrl+C</code>来终止它。</p></blockquote></li><li><p><strong>top</strong> - 进程监控。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# top</span><br><span class="line">top - 23:04:23 up 3 days, 14:10,  1 user,  load average: 0.00, 0.01, 0.05</span><br><span class="line">Tasks:  65 total,   1 running,  64 sleeping,   0 stopped,   0 zombie</span><br><span class="line"><span class="meta">%</span><span class="bash">Cpu(s):  0.3 us,  0.3 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span></span><br><span class="line">KiB Mem :  1016168 total,   191060 free,   324700 used,   500408 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.   530944 avail Mem</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li></ol><h3 id="系统性能"><a class="header-anchor" href="#系统性能"></a>系统性能</h3><ol><li><p>查看系统活动信息 - <strong>sar</strong>。</p></li><li><p>查看内存使用情况 - <strong>free</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# free</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:        1016168      323924      190452         356      501792      531800</span><br><span class="line">Swap:             0           0           0</span><br></pre></td></tr></table></figure></li><li><p>查看进程使用内存状况 - <strong>pmap</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# ps</span><br><span class="line">  PID TTY          TIME CMD</span><br><span class="line"> 4581 pts/0    00:00:00 bash</span><br><span class="line"> 5664 pts/0    00:00:00 ps</span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# pmap 4581</span><br><span class="line">4581:   -bash</span><br><span class="line">0000000000400000    884K r-x-- bash</span><br><span class="line">00000000006dc000      4K r---- bash</span><br><span class="line">00000000006dd000     36K rw--- bash</span><br><span class="line">00000000006e6000     24K rw---   [ anon ]</span><br><span class="line">0000000001de0000    400K rw---   [ anon ]</span><br><span class="line">00007f82fe805000     48K r-x-- libnss_files-2.17.so</span><br><span class="line">00007f82fe811000   2044K ----- libnss_files-2.17.so</span><br><span class="line">...</span><br></pre></td></tr></table></figure></li><li><p>报告设备CPU和I/O统计信息 - <strong>iostat</strong>。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@iZwz97tbgo9lkabnat2lo8Z ~]# iostat</span><br><span class="line">Linux 3.10.0-693.11.1.el7.x86_64 (iZwz97tbgo9lkabnat2lo8Z)      06/26/2018      _x86_64_       (1 CPU)</span><br><span class="line">avg-cpu:  %user   %nice %system %iowait  %steal   %idle</span><br><span class="line">           0.79    0.00    0.20    0.04    0.00   98.97</span><br><span class="line">Device:            tps    kB_read/s    kB_wrtn/s    kB_read    kB_wrtn</span><br><span class="line">vda               0.85         6.78        21.32    2106565    6623024</span><br><span class="line">vdb               0.00         0.01         0.00       2088          0</span><br></pre></td></tr></table></figure></li></ol><h3 id="shell和shell编程"><a class="header-anchor" href="#shell和shell编程"></a>Shell和Shell编程</h3><h4 id="环境变量"><a class="header-anchor" href="#环境变量"></a>环境变量</h4><ol><li>HOME</li><li>SHELL</li><li>HISTSIZE</li><li>RANDOM</li><li>PATH</li></ol>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux进阶 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>mysql进阶</title>
      <link href="/post/2018-10-16-mysql%E8%BF%9B%E9%98%B6.html"/>
      <url>/post/2018-10-16-mysql%E8%BF%9B%E9%98%B6.html</url>
      
        <content type="html"><![CDATA[<p>mysql的进阶知识，加油！</p><p>当心从删库到跑路 ？！！</p><a id="more"></a><h2 id="编码与约束"><a class="header-anchor" href="#编码与约束"></a>编码与约束</h2><ul><li><p>设置编码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- utf8_bin 搜索时区分大小写</span><br><span class="line">-- utf8_bin_ci 搜索时不区分大小写</span><br><span class="line">create database SRS default charset utf8 collate utf8_bin;</span><br></pre></td></tr></table></figure><p>设置数据SRS的默认编码为utf8</p><p>collate utf8_bin; —&gt; mysql的字符序遵从命名惯例。以_ci(表示大小写不敏感)，以_cs(表示大小写敏感)，以_bin(表示用编码值进行比较</p></li><li><p>创建一个学院表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 创建学院表</span><br><span class="line">create table tb_college</span><br><span class="line">(</span><br><span class="line">collid int not null auto_increment comment &apos;学院编号&apos;,</span><br><span class="line">collname varchar(50) not null comment &apos;学院名称&apos;,</span><br><span class="line">collmaster varchar(20) not null comment &apos;院长姓名&apos;,</span><br><span class="line">collweb varchar(511) default &apos;&apos; comment &apos;学院网站&apos;,</span><br><span class="line">primary key (collid)</span><br><span class="line">);</span><br><span class="line">-- 创建教师表</span><br><span class="line">create table tb_teacher</span><br><span class="line">(</span><br><span class="line">teaid int not null comment &apos;教师工号&apos;,</span><br><span class="line">tname varchar(20) not null comment &apos;教师姓名&apos;,</span><br><span class="line">title varchar(10) default &apos;&apos; comment &apos;职称&apos;,</span><br><span class="line">collid int not null comment &apos;所属学院编号&apos;</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>添加唯一约束</p><p>代表该列值不能有重复</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 添加唯一约束</span><br><span class="line">alter table tb_college add constraint uni_college_collname unique (collname);</span><br><span class="line"></span><br><span class="line">-- 删除唯一约束</span><br><span class="line">alter table tb_college drop index uni_college_collname</span><br></pre></td></tr></table></figure></li><li><p>添加外键约束</p></li><li><p>外键分为</p><p>1 对 1：对任一表添加外键，并且还要添加唯一约束</p><p>1 对 多： 一般在多的表中添加外键</p><p>多 对 多 ：在关系型数据中，两张表不能表示两张表的关系，多对多时需要添加中间表进行外键约束</p></li><li><p>给教师表添加外键约束collid</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 添加外键约束</span><br><span class="line">alter table tb_student add constraint fk_student_collid foreign key (collid) references tb_college (collid);</span><br><span class="line">-- 删除外键约束</span><br><span class="line">alter table tb_score drop foreign key fk_score_sid;</span><br></pre></td></tr></table></figure></li></ul><h2 id="e-r-实体关系图"><a class="header-anchor" href="#e-r-实体关系图"></a>E-R(实体关系图)</h2><ul><li><p>外键/外键约束/ - 外来的主键 - 参照完整性</p></li><li><p>数据的完整性</p><ol><li><p>实体完整性：每一条记录都是独一无二的冗余</p><p>主键/唯一索引(唯一约束)</p></li><li><p>参照完整性：B表参照了A表，A表没有的记录在B表中绝不能出现<br>出现</p><p>外键：给字表添加外键时要与父表的主键变量类型一致一致</p></li><li><p>域完整性：录入的数据都是有效的</p><p>数据类型/非空约束/默认值约束/检查约束（mysql不生效）</p></li></ol></li></ul><p><img src="/post/2018-10-16-mysql%E8%BF%9B%E9%98%B6/shi.png" alt="shi"></p><h2 id="查询"><a class="header-anchor" href="#查询"></a>查询</h2><ul><li><p>查询时sql语句的执行优先顺序</p><ol><li>FROM</li><li>WHERE</li><li>GROUP BY</li><li>HAVING</li><li>SELECT</li><li>DISTINCT</li><li>UNION</li><li>ORDER BY</li></ol></li><li><p>聚合函数</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- max() / min() / sum() / avg() / count()</span><br><span class="line">elect min(birth) from tb_student</span><br><span class="line">select max(birth) from tb_student</span><br><span class="line"></span><br><span class="line">-- 这些二函数经常与 group by 连用</span><br></pre></td></tr></table></figure></li><li><p>连接查询法</p><p>查询时如果不添加筛选条件得到的结果会形成笛卡儿积</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-- 查询学生姓名、所选课程名称和成绩(连接查询)</span><br><span class="line">-- 连接查询方法一</span><br><span class="line">select sname,cname,mark</span><br><span class="line">from tb_student,tb_course,tb_score</span><br><span class="line">where stuid=sid and couid=cid and mark is not null;</span><br><span class="line"></span><br><span class="line">-- 连接查询方法二</span><br><span class="line">select sname,cname,mark from tb_student</span><br><span class="line">inner join tb_score on stuid=sid</span><br><span class="line">inner join tb_course on couid=cid</span><br><span class="line">where mark is not null;</span><br></pre></td></tr></table></figure></li><li><p>group by 分组查询</p><p>安照 by 后面的列名进行分组查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 查询选了两门以上的课程的学生姓名(子查询/分组条件/集合运算)</span><br><span class="line">-- () 改变优先级,先执行()里的语句</span><br><span class="line">select sname from tb_student where stuid in( </span><br><span class="line">select sid from tb_score group by sid having count(sid)&gt;2);</span><br></pre></td></tr></table></figure></li><li><p>子查询</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-- 子查询 - 在一个查询中又使用了另一个查询</span><br><span class="line">-- 查询年龄最大的学生的姓名(子查询+运算)</span><br><span class="line">select sname as 姓名,year(now())-year(birth) as 年龄 from tb_student where birth=(select min(birth) from tb_student)</span><br></pre></td></tr></table></figure></li><li><p>子查询时，去重操作和集合运算效率是非常底下的</p><p>通常建议去用exists或not exists 操作来代替去重和集合运算</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 去重和集合</span><br><span class="line">select ename as 主管,job from tbemp</span><br><span class="line">where eno in (select distinct mgr from tbemp where mgr is not null);</span><br><span class="line">-- exists 判断</span><br><span class="line">select ename,job from tbemp t1</span><br><span class="line">where exists (select &apos;x&apos; from tbemp t2 where t1.eno=t2.mgr);</span><br></pre></td></tr></table></figure><p>当后面where语句的条件为true时才会生成映射表x列，为false时映射表为空</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select &apos;x&apos; from tbemp t2,tbemp t1 where t1.ename=t2.mgr;</span><br></pre></td></tr></table></figure></li></ul><h2 id="视图"><a class="header-anchor" href="#视图"></a>视图</h2><ul><li><p>视图是查询的快照</p><p>通过视图将用户表访问权限进一步加以限制，也就是说将来普通用户不能够直接查询表的数据，只能通过指定的视图查看到允许访问的内容。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 创建视图 -- 得到一个（ename,dno,dname）列的数据表</span><br><span class="line">create view vw_emp_gt_avg as select ename,dno,dname from tbemp</span><br><span class="line"> -- 删除视图</span><br><span class="line">drop view 删除视图</span><br><span class="line">-- 这个语句是查询 vw_emp_gt_avg 表，</span><br><span class="line">select * from vw_emp_gt_avg;</span><br></pre></td></tr></table></figure></li></ul><h2 id="索引"><a class="header-anchor" href="#索引"></a>索引</h2><ul><li><p>索引（相当于一本书的目录）</p><blockquote><p>为表创建索引可以加速查询（用空间换取时间）<br>索引虽然好但是不能滥用，一方面索引会占用额外的存储空间<br>另外索引会让增删改变得更慢，因为这些操作可能会导致更新索引<br>如果哪个列经常用于查询的筛选条件，那么就应该在这个列上建立索引<br>主键有默认的索引（唯一索引)</p></blockquote><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 创建索引</span><br><span class="line">-- 说明：如果使用模糊查询 如果查询条件不以%开头 那么索引有效</span><br><span class="line">-- 如果模糊查询的条件以%开头 那么索引失效（尽量避免）</span><br><span class="line">create index idx_emp_ename on tbemp (ename);</span><br><span class="line">create unique index nui_emp_ename on tbemp (ename);</span><br><span class="line"></span><br><span class="line">-- 删除索引</span><br><span class="line">alter table tbemp drop index nui_emp_ename</span><br></pre></td></tr></table></figure></li></ul><h2 id="事务控制"><a class="header-anchor" href="#事务控制"></a>事务控制</h2><ul><li><p>事务控制：要么全部成功执行，要么一个不执行</p></li><li><p>数据的一致性：事务</p></li><li><p>事务的ACID特性：</p><ol><li>Atomicity 原子性：不可分割</li><li>Consistency 一致性：事务前后数据状态一致</li><li>Isolation 隔离性：多个事务不能看到彼此的中间状态（未提交时别人看不到对表的改变）</li><li>Duration 持久性：事务完成后数据要持久化</li></ol></li><li><p>在出现并发事务访问数据的时候，数据库底层有锁机制来保护数据，但是通常我们在写SQL的时候不用显示的书写锁操作，数据库会根据我们设定的事务隔离级别自动的数据加锁。</p></li><li><p>并发数据访问可能出现的5中问题</p><ol><li>第一类丢失更新</li><li>第二类丢失更新</li><li>脏读  ： 隔离级别为Read Committed可以避免</li><li>不可重复读 - 一个事务在读取查询结果时发现其他事务更新了数据导致无法读取： 隔离级别为Repeatable Read可以避免</li><li>幻读 - 一个事务在执行查询时发现被其他事务提交了新的数据： 隔离级别为Serializable可以避免</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">begin</span><br><span class="line">-- start transaction; 开始事务</span><br><span class="line">update tb_score set mark=mark-2 where sid=1001 and mark is not null;</span><br><span class="line">update tb_score set mark=mark+2 where sid=1002 and mark is not null;</span><br><span class="line">-- 数据提交,只有提交后才生效</span><br><span class="line">commit;</span><br><span class="line">-- 事务回滚 - 未提交时可以回滚</span><br><span class="line">rollback;</span><br><span class="line"></span><br><span class="line">-- 四个级别</span><br><span class="line">-- Read Uncommitted</span><br><span class="line">-- Read Committed</span><br><span class="line">-- Repeatable Read</span><br><span class="line">-- Serializable</span><br><span class="line">select @@tx_isolation; -- 查看事务隔离级别</span><br><span class="line">session(当前会话)/global（全局）</span><br><span class="line">set session/global transaction isolation level read committed; -- 设置事务隔离级别</span><br></pre></td></tr></table></figure></li></ul><h2 id="创建用户"><a class="header-anchor" href="#创建用户"></a>创建用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">-- 只能本机登录</span><br><span class="line">create user &apos;hellokitty&apos;@&apos;localhost&apos;</span><br><span class="line"></span><br><span class="line">-- 指定ip地址登录</span><br><span class="line">create user &apos;hellokitty&apos;@&apos;10.2.1.1&apos;</span><br><span class="line"></span><br><span class="line">-- 任意地址登录 并设置口令123123</span><br><span class="line">create user &apos;hellokitty&apos;@&apos;%&apos;identified by &apos;123123&apos;</span><br><span class="line"></span><br><span class="line">-- 授权  *.* 所有数据库的所有表</span><br><span class="line">grant select on srs.* to &apos;hellokitty&apos;@&apos;%&apos;;</span><br><span class="line">grant insert,delete,update on srs.* to &apos;hellokitty&apos;@&apos;%&apos;;</span><br><span class="line">grant create,drop,alter on srs.* to &apos;hellokitty&apos;@&apos;%&apos;;</span><br><span class="line"></span><br><span class="line">-- all privileges 所有权限</span><br><span class="line">-- with grant option 拥有将自己的权限授权给他人的权限</span><br><span class="line">grant all privileges on srs.* to &apos;hellokitty&apos;@&apos;%&apos; with grant option;</span><br><span class="line"></span><br><span class="line">-- 召回权限</span><br><span class="line">revoke all privileges on srs.* from &apos;hellokitty&apos;@&apos;%&apos;;</span><br></pre></td></tr></table></figure><h2 id="python控制mysql"><a class="header-anchor" href="#python控制mysql"></a>python控制mysql</h2><ul><li><p>利用第三方模块pymysql</p><ol><li><p>charset：设置编码</p></li><li><p>autocommit：自动提交，不用自己写commit</p></li><li><p>query参数中的变量可以用占位符%s，args的参数会识别占位符并附对应的值</p><p>如果需要改变传值的顺序，可以用一个字典</p></li></ol><ul><li>更新表</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># https://pypi.doubanio.com/simple 国内镜像</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 1. 创建数据库连接</span></span><br><span class="line">    cur = pymysql.connect(host = <span class="string">"localhost"</span>, port = <span class="number">3306</span>,</span><br><span class="line">                        user = <span class="string">"root"</span>, password = <span class="string">"123456"</span>,</span><br><span class="line">                        db = <span class="string">"hrs"</span>, charset= <span class="string">"utf8"</span>,</span><br><span class="line">                         autocommit = <span class="keyword">True</span>)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> cur.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            no = int(input(<span class="string">'部门编号：'</span>))</span><br><span class="line">            name = input(<span class="string">'部门名称：'</span>)</span><br><span class="line">            location = input(<span class="string">'部门所在地：'</span>)</span><br><span class="line">            <span class="comment"># query=update tbdept set dname=%s, dloc=%s where dno=%s</span></span><br><span class="line">            <span class="comment"># args=（no, name, location）</span></span><br><span class="line">            result = cursor.execute(</span><br><span class="line">                query=<span class="string">'update tbdept set dname=%(name)s,dloc=%(location)s where dno=%(no)s'</span>,</span><br><span class="line">                args=&#123;<span class="string">'no'</span>:no, <span class="string">'name'</span>: name, <span class="string">'location'</span>: location&#125;)</span><br><span class="line">            <span class="keyword">if</span> result == <span class="number">1</span>:</span><br><span class="line">                print(<span class="string">"操作成功"</span>)</span><br><span class="line">            <span class="comment"># cur.commit()</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        cur.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li><li><p>查询表</p><ol><li>cursorclass=pymysql.cursors.DictCursor ：游标查询默认返回元组，使用这个后返回一个以字典为元素的列表</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pymysql</span><br><span class="line"><span class="comment"># https://pypi.doubanio.com/simple 国内镜像</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dept</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, no, name, location)</span>:</span></span><br><span class="line">        self.no = no</span><br><span class="line">        self.name = name</span><br><span class="line">        self.location = location</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 1. 创建数据库连接</span></span><br><span class="line">    cur = pymysql.connect(host = <span class="string">"localhost"</span>, port = <span class="number">3306</span>,</span><br><span class="line">                        user = <span class="string">"root"</span>, password = <span class="string">"123456"</span>,</span><br><span class="line">                        db = <span class="string">"hrs"</span>, charset= <span class="string">"utf8"</span>,</span><br><span class="line">                        autocommit = <span class="keyword">True</span>, cursorclass=pymysql.cursors.DictCursor)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">with</span> cur.cursor() <span class="keyword">as</span> cursor:</span><br><span class="line">            <span class="comment"># update tbdept set dname=%s, dloc=%s where dno=%s</span></span><br><span class="line">            cursor.execute( <span class="string">"select dno as no, dname as name, dloc as location "</span></span><br><span class="line">                            <span class="string">"from tbdept"</span>)</span><br><span class="line">            <span class="comment"># print(cursor.fetchall()) 拿所有</span></span><br><span class="line">            print(cursor.fetchone()) <span class="comment"># 拿一个</span></span><br><span class="line">            print(cursor.fetchmany(<span class="number">2</span>)) <span class="comment"># 拿指定条数</span></span><br><span class="line">            print(<span class="string">'编号\t名称\t所在地'</span>)</span><br><span class="line">            <span class="keyword">for</span> row <span class="keyword">in</span> cursor.fetchall():</span><br><span class="line">                dept = Dept(**row)</span><br><span class="line">                <span class="comment"># **row ：解包 将一个自建解包为一个关键字参数传入类中</span></span><br><span class="line">                print(dept.no, end=<span class="string">'\t'</span>)</span><br><span class="line">                print(dept.name, end=<span class="string">'\t'</span>)</span><br><span class="line">                print(dept.location)</span><br><span class="line">                <span class="comment"># print(row['no'], end='\t')</span></span><br><span class="line">                <span class="comment"># print(row['name'], end='\t')</span></span><br><span class="line">                <span class="comment"># print(row['location'])</span></span><br><span class="line">            <span class="comment"># for row in cursor.fetchall():</span></span><br><span class="line">            <span class="comment">#     print(f'部门编号：&#123;row[0]&#125;')</span></span><br><span class="line">            <span class="comment">#     print(f'部门名称：&#123;row[1]&#125;')</span></span><br><span class="line">            <span class="comment">#     print(f'部门所在地：&#123;row[2]&#125;')</span></span><br><span class="line">            <span class="comment">#     print('-' * 20)</span></span><br><span class="line">            <span class="comment"># cur.commit()</span></span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        cur.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> mysql进阶 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>正则表达式</title>
      <link href="/post/2018-10-15-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html"/>
      <url>/post/2018-10-15-%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F.html</url>
      
        <content type="html"><![CDATA[<p>正则不管在哪里都是吃香的存在</p><p>小结正则命令</p><a id="more"></a><h2 id="正则语法"><a class="header-anchor" href="#正则语法"></a>正则语法</h2><ul><li><p>.  匹配一个任意字符 –  … 代表两个任意字符</p></li><li><p>\w  匹配字母数字下划线还有中文字符</p><table><thead><tr><th style="text-align:center">.</th><th style="text-align:center">匹配一个任意字符 –  … 代表两个任意字符</th></tr></thead><tbody><tr><td style="text-align:center">\w</td><td style="text-align:center">匹配字母数字下划线还有中文字符</td></tr><tr><td style="text-align:center">\s</td><td style="text-align:center">匹配空白字符(空白指空格，制表符，和回车等所有能产生空白的字符)</td></tr><tr><td style="text-align:center">\d</td><td style="text-align:center">匹配一个数字字符</td></tr><tr><td style="text-align:center">\b</td><td style="text-align:center">检测是否是单词边界(单词的开头，单词的结尾,单词和单词之间的标点空格等)</td></tr><tr><td style="text-align:center">^</td><td style="text-align:center">检测字符串是否以给定的正则表达式开头，例如^a —a开头的字符串</td></tr><tr><td style="text-align:center">$</td><td style="text-align:center">检测字符串是否以给定的正则表达式结尾</td></tr><tr><td style="text-align:center">\W</td><td style="text-align:center">非字母，数字，下划线</td></tr><tr><td style="text-align:center">\D</td><td style="text-align:center">非数字</td></tr><tr><td style="text-align:center">[]</td><td style="text-align:center">匹配中括号中出现的任意字符(一个中括号只匹配一个字符)</td></tr><tr><td style="text-align:center">[0-9]</td><td style="text-align:center">匹配一个0-9的数字</td></tr><tr><td style="text-align:center">[^]</td><td style="text-align:center">匹配不在[]字符集中的任意一个字符</td></tr><tr><td style="text-align:center">*</td><td style="text-align:center">匹配0次或者多次</td></tr><tr><td style="text-align:center">+</td><td style="text-align:center">匹配1次或者多次</td></tr><tr><td style="text-align:center">?</td><td style="text-align:center">匹配0次或1次</td></tr><tr><td style="text-align:center">{N,}</td><td style="text-align:center">至少匹配N次</td></tr><tr><td style="text-align:center">{,M}</td><td style="text-align:center">最多匹配M次</td></tr><tr><td style="text-align:center">{M,N}</td><td style="text-align:center">匹配至少M次，最多N次（N&gt;M）</td></tr><tr><td style="text-align:center">|</td><td style="text-align:center">分之(相当于逻辑运算中的or)</td></tr><tr><td style="text-align:center">()</td><td style="text-align:center">通过加()来对正则条件进行分组</td></tr><tr><td style="text-align:center">\1…</td><td style="text-align:center">可以通过 ‘’\数字&quot; 来重复匹配前面的分组中匹配的结果。数字的值代表前面的第几个分组</td></tr></tbody></table></li></ul>]]></content>
      
      
      <categories>
          
          <category> 正则表达式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 正则表达式 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>MYSQL小结</title>
      <link href="/post/2018-10-15-mysql%E5%B0%8F%E7%BB%93.html"/>
      <url>/post/2018-10-15-mysql%E5%B0%8F%E7%BB%93.html</url>
      
        <content type="html"><![CDATA[<p>通过数据库可以实现数据的持久化</p><p>这里总结一下常用语法</p><p>MYSQL小结</p><a id="more"></a><h2 id="1-什么是数据库"><a class="header-anchor" href="#1-什么是数据库"></a>1. 什么是数据库</h2><ul><li>数据库 - database  - 数据的仓库(集散地)</li></ul><h2 id="2-为什么要用数据库"><a class="header-anchor" href="#2-为什么要用数据库"></a>2. 为什么要用数据库</h2><ul><li>通过数据库可以让数据持久化</li><li>当我们做数据持久化时不仅仅是希望能够把数据长久的保存起来<br>更为重要的是希望方便的管理数据，在需要数据的时候能够很方便的把数据取出来</li><li>理论基础：关系代数和集合论</li><li>具体表现：用二维表组织数据</li></ul><h2 id="3-常用命命令"><a class="header-anchor" href="#3-常用命命令"></a>3. 常用命命令</h2><p>– SQL（structured query language）<br>– DDL（数据定义语言）：create/drop/alter<br>– DML（数据操作语言）：insert/delete/update/select<br>– DCL（数据控制语言）：grant/revoke</p><ul><li><p>创建数据库 - create database 数据库名 default charset utf8（设置编码）</p></li><li><p>显示所有数据库 - show databases</p></li><li><p>删除数据库 - drop database if exists 数据库名（慎重）</p></li><li><p>选中数据库 - use 数据库名</p></li><li><p>显示所有表 - show tables</p></li><li><p>查看数据表结构 - show columns from 表名</p></li><li><p>创建表 - create table 表名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">-- 创建二维表保存数据</span><br><span class="line">-- 列名 数据类型 约束条件</span><br><span class="line">-- 非空约束 - not null</span><br><span class="line">-- 默认值约束 - default</span><br><span class="line">-- 主键 - 表中能够唯一标识一条记录的列</span><br><span class="line">-- 主键约束 - primary key</span><br><span class="line">-- 自增长 - auto_increment（需与primary key连用）</span><br><span class="line">-- 备注  -  comment &apos;&apos;</span><br><span class="line">create table tb_student</span><br><span class="line">(</span><br><span class="line">stuid int not null, </span><br><span class="line">stuname varchar(4) not null, </span><br><span class="line">gender bit default 1, </span><br><span class="line">birth date, </span><br><span class="line">addr varchar(50),</span><br><span class="line">primary key (stuid) </span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>关于char 和 varchar 的区别</p><ol><li><p>char的长度是不可变的，varchar的长度是可变的</p><p>例如：定义一个char[10]和varchar[10],如果存进去的是‘csdn’,那么char所占的长度依然为10，除了字符‘csdn’外，后面跟六个空格，而varchar就立马把长度变为4了，取数据的时候，char类型的要用trim()去掉多余的空格，而varchar是不需要的。</p></li><li><p>char的存取数度还是要比varchar要快得多</p><p>因为其长度固定，方便程序的存储与查找；但是char也为此付出的是空间的代价，因为其长度固定，所以难免会有多余的空格占位符占据空间，可谓是以空间换取时间效率，而varchar是以空间效率为首位的。</p></li><li><p>存储内存</p><p>char的存储方式是，对英文字符（ASCII）占用1个字节，对一个汉字占用两个字节；而varchar的存储方式是，对每个英文字符占用2个字节，汉字也占用2个字节。</p></li></ol></li><li><p>int类型</p><p><img src="/post/2018-10-15-mysql%E5%B0%8F%E7%BB%93/int.png" alt="int"></p><ol><li><p>右侧的取值范围是在未加unsigned关键字的情况下，如果加了unsigned，则最大值翻倍，如tinyint</p><p>unsigned的取值范围为(0~256)。</p></li><li><p>上图表格共有四列</p></li></ol><pre><code>字段类型, 占用字节数, 允许存储的最小值, 允许存储的最大值拿int类型为例,　　 占用字节数为4byte,　　 字节(byte)并非是计算机存储的最小单位, 还有比字节(byte)更小的单位, 也就是位(bit),一个位就代表一个0或1;　　 8个位组成一个字节;　　 一般字节用大写B来表示byte, 位用小写b来表示bit.计算机存储单位的换算:1B=8b1KB=1024B1MB=1024KB 根据int类型允许存储的字节数是4个字节, 我们就能换算出int UNSIGNED(无符号)类型的能存储的最小值为0, 最大值为4294967295(即4B=32b, 最大值即为32个1组成);</code></pre></li><li><p>修改表 - alter table 表名 add /drop column 列名（add 表名后可以跟属性）</p></li><li><p>插入数据 - insert into(可以不写) 表名 values(数据)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">insert into tb_student values</span><br><span class="line">(1001, &apos;菜菜&apos;, 1, &apos;四川遂宁&apos;, &apos;15282590984&apos;);</span><br><span class="line">insert into tb_student values</span><br><span class="line">(1002, &apos;冯宝宝&apos;, 0, &apos;四川达州&apos;, &apos;1528252122&apos;);</span><br><span class="line">insert into tb_student(stuname, stuid, tel) values</span><br><span class="line">(&apos;王也&apos;, 1005, &apos;153222331&apos;),</span><br><span class="line">(&apos;全性&apos;, 1006, &apos;123815101&apos;),</span><br><span class="line">(&apos;不要碧莲&apos;, 1007, &apos;123132133&apos;);</span><br></pre></td></tr></table></figure></li><li><p>删除表 - delete/truncate from 表名 where 条件</p><p><strong>如果没有条件会删除整个表的数据</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">delete from tb_student where stuid=1006;</span><br><span class="line">delete from tb_student where stuid in (1005, 1007);</span><br><span class="line">delete from tb_student where addr is null; 删除地址为空的数据</span><br></pre></td></tr></table></figure><ol><li><p>truncate和 delete只删除数据不删除表的结构(定义)<br>drop语句将删除表的结构被依赖的约束(constrain),触发器(trigger),索引(index); 依赖于该表的<br>存储过程/函数将保留,但是变为invalid状态.</p></li><li><p>delete语句是DML,这个操作会放到rollback segment中,事务提交之后才生效;如果有相应的trigger,<br>执行的时候将被触发.<br>truncate,drop是DDL 操作立即生效,原数据不放到rollback segment中,不能回滚. 操作不触发<br>trigger.</p></li><li><p>delete语句不影响表所占用的extent, 高水线(high watermark)保持原位置不动<br>显然drop语句将表所占用的空间全部释放</p></li><li><p>速度,一般来说: drop&gt; truncate &gt; delete</p></li></ol><blockquote><p>DROP用于删除表,数据库等.<br>TRUNCATE和DELETE都是删除表数据.<br>但是TRUNCATE相当于初始化,比如如果有自增长ID,用TRUNCATE删除后,自增长Id会从1开始,（truncate会释放表所占的空间）</p><p>而delete则不会.</p></blockquote></li><li><p>更新数据 - update 表名 set 列名=数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">update tb_student set addr=&apos;四川绵阳&apos;,gender=2</span><br><span class="line">where addr is null;</span><br></pre></td></tr></table></figure></li><li><p>查询数据 - select * from 表名</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">select stuname, gender from tb_student;</span><br><span class="line"></span><br><span class="line">-- 别名 将列名用别名代替</span><br><span class="line">select stuname as 姓名, gender as 性别 from tb_student;</span><br><span class="line"></span><br><span class="line">-- mysql独有的：如果为真返回男，为假返回女</span><br><span class="line">select stuname as 姓名, if(gender, &apos;男&apos;, &apos;女&apos;) as 性别 from tb_student;</span><br><span class="line"></span><br><span class="line">-- sql通用：如果为1返回男，为0返回女，为其他返回未知</span><br><span class="line">select stuname as 姓名,case gender when 1 then &apos;男&apos; when 0 then &apos;女&apos; else &apos;未知&apos; end as 性别 from tb_student;</span><br><span class="line"></span><br><span class="line">-- 对列做运算 ：将数据列整合到&apos;信息&apos;一列显示</span><br><span class="line">select concat(stuname, &apos;: &apos;, tel) as 信息 from tb_student;</span><br><span class="line"></span><br><span class="line">-- 筛选</span><br><span class="line">-- 查询学生的家庭住址(去重) distinct</span><br><span class="line">select distinct addr from tb_student where addr is not null and addr&lt;&gt;&apos;&apos;;</span><br><span class="line"></span><br><span class="line">select stuid, stuname gender from tb_student where stuid&gt;1002;</span><br><span class="line">select stuid, stuname gender from tb_student where stuid between 1003 and 1007;</span><br><span class="line">-- &lt;&gt; 不等号</span><br><span class="line">select stuid, stuname gender from tb_student where stuid&lt;&gt;1002;</span><br><span class="line">select * from tb_student where stuid&gt;1002 or gender=1;</span><br><span class="line">-- 判断一个字段是否为null不能用=和&lt;&gt;</span><br><span class="line">select * from tb_student where stuid is not null;</span><br><span class="line">select * from tb_student where stuid in (1001, 1007);</span><br><span class="line"></span><br><span class="line">-- 模糊查询(char / varchar)</span><br><span class="line">-- %是一个通配符表示零个或任意多个字符</span><br><span class="line">select * from tb_student where stuname like &apos;冯%&apos;;</span><br><span class="line">select * from tb_student where addr like &apos;%川%&apos;;</span><br><span class="line">-- _也是一个通配符它表示一个字符</span><br><span class="line">select * from tb_student where stuname like &apos;冯_&apos;;</span><br><span class="line">select * from tb_student where stuname like &apos;冯__&apos;;</span><br><span class="line">-- length: 是计算字段的长度，一个汉字是算三个字符,一个数字或字母算一个字符</span><br><span class="line">select * from tb_student where length(stuname)&gt;6;</span><br><span class="line"></span><br><span class="line">-- 排序</span><br><span class="line">select * from tb_student order by stui</span><br><span class="line">select * from tb_student order by stuid desc; -- 降序</span><br><span class="line">select * from tb_student order by stuid asc; -- 默认升序</span><br><span class="line">select * from tb_student order by gender asc, stuid desc;</span><br><span class="line">-- 先筛选在排序</span><br><span class="line">select * from tb_student where gender=0 order by stuid desc;</span><br><span class="line"></span><br><span class="line">-- 限定 limit偏移多少行，offset跳过多少行</span><br><span class="line">select * from tb_student limit 5;</span><br><span class="line">select * from tb_student limit 4 offset 3; -- 从第4行开始显示4行数据</span><br><span class="line">select * from tb_student limit 3 offset 6; -- 从第7行开始显示3行数据</span><br><span class="line"></span><br><span class="line">-- 分页</span><br><span class="line">select * from tb_student limit 0,5; -- 参数一是跳过几行开始显示，参数二是筛选多少行</span><br><span class="line">select * from tb_student limit 5,5; -- 从第6行开始显示5行数据</span><br><span class="line">select * from tb_student limit 10,5; -- 从第11开始显示5行数据</span><br><span class="line"></span><br><span class="line">-- 筛选gender=0的数据并按照降序跳过0行偏移6行显示数据</span><br><span class="line">select * from tb_student where gender=0 order by stuid desc limit 6 offset 0;</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> MYSQL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MYSQL </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>约瑟夫环</title>
      <link href="/post/2018-10-13-%E7%BA%A6%E7%91%9F%E5%A4%AB%E7%8E%AF.html"/>
      <url>/post/2018-10-13-%E7%BA%A6%E7%91%9F%E5%A4%AB%E7%8E%AF.html</url>
      
        <content type="html"><![CDATA[<p>关于约瑟夫环有多个版本的题目</p><p>了解其中一种就可以类推了</p><a id="more"></a><h2 id="幸运的基督徒"><a class="header-anchor" href="#幸运的基督徒"></a>幸运的基督徒</h2><ul><li><p>一共有30个人被困在一个小岛上，其中15个基督徒，15个普通人，岛上的食物不够30个人吃了，于是大家便决定杀死15个人，30个人围成一个圈，其中一个人从1报数，数到9的人便被杀死，又从1开始数，直到只剩下15个人。求基督徒的站位</p><p>这道题我们可以模拟一共有30个人，建一个列表，元素都是为true，杀死一个就赋值为false.</p><p>直接上代码吧</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    persons = [<span class="keyword">True</span>] * <span class="number">30</span> <span class="comment"># 30个人</span></span><br><span class="line">    counter = <span class="number">0</span></span><br><span class="line">    num, index = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> counter &lt; <span class="number">15</span>:</span><br><span class="line">        <span class="keyword">if</span> persons[index]: <span class="comment"># 如果是活人便报数</span></span><br><span class="line">            num += <span class="number">1</span></span><br><span class="line">            <span class="keyword">if</span> num == <span class="number">9</span>:</span><br><span class="line">                persons[index] = <span class="keyword">False</span> <span class="comment"># 当报数到9了就赋值为false</span></span><br><span class="line">                counter += <span class="number">1</span> <span class="comment"># counter + 1 代表死忙一个</span></span><br><span class="line">                num = <span class="number">0</span></span><br><span class="line">        index += <span class="number">1</span> </span><br><span class="line">        index %= <span class="number">30</span> <span class="comment"># 循环到30 便从0开始</span></span><br><span class="line">    <span class="keyword">for</span> person <span class="keyword">in</span> persons:</span><br><span class="line">        print(<span class="string">"基"</span> <span class="keyword">if</span> person <span class="keyword">else</span> <span class="string">"非"</span>, end=<span class="string">""</span>)</span><br><span class="line">    print()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">基基基基非非非非非基基非基基基非基非非基基非非非基非非基基非</span><br></pre></td></tr></table></figure></li></ul><h2 id="最后一个人"><a class="header-anchor" href="#最后一个人"></a>最后一个人</h2><ul><li><p>1、一群人围在一起坐成环状</p><p>2、从某个编号开始报数</p><p>3、数到某个数的时候，此人出列，下一个人重新报数</p><p>4、一直循环，直到所有人出列  ，约瑟夫环结束</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(count, k)</span>:</span></span><br><span class="line">    l = list(range(<span class="number">1</span>,count+<span class="number">1</span>))</span><br><span class="line">    n=<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> len(l)&gt;<span class="number">1</span>: <span class="comment"># 如果剩余人数大于1继续循环</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> l[:]: <span class="comment"># 遍历剩下的人，遍历列表的切片，保证删除正确的元素</span></span><br><span class="line">            <span class="keyword">if</span> n == k:</span><br><span class="line">                l.remove(i)</span><br><span class="line">                n=<span class="number">1</span>          </span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                n += <span class="number">1</span></span><br><span class="line">    print(l[<span class="number">0</span>])</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">func(<span class="number">30</span>, <span class="number">9</span>) <span class="comment"># 30个人，9退出</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="利用数学公式"><a class="header-anchor" href="#利用数学公式"></a>利用数学公式</h2><ul><li>f[1] = 0； //当一个人的时候，出队人员编号为0<br>f[i] = (f[i-1] + m)%i //m表示每次数到该数的人出列，i表示当前序列的总人数<br>当i=n时用个循环就行了<br>而我们只需要得到第n次出列的结果即可，那么不需要另外声明数组保存数据，只需要直接一个for循环求得n阶约瑟夫环问题的结果即可<br>由于往往现实生活中编号是从n-1，那么我们把最后的结果加1即可。</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(n, m)</span>:</span></span><br><span class="line">    s = <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>, n+<span class="number">1</span>):</span><br><span class="line">        s = (s + m) % i</span><br><span class="line">    print(s+<span class="number">1</span>)</span><br><span class="line">f(<span class="number">11</span>, <span class="number">9</span>)这个返回的是最后一个人的编号</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 约瑟夫环 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>动态规划算法</title>
      <link href="/post/2018-10-13-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95.html"/>
      <url>/post/2018-10-13-%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E7%AE%97%E6%B3%95.html</url>
      
        <content type="html"><![CDATA[<p>这里以斐波那契数列的递归算法为例</p><p>优化运行速度。</p><a id="more"></a><ul><li><p>可以采用动态规划来求解的问题需要具有以下两个主要特征：</p><p>1）**重叠子问题（Overlapping Subproblems）：**有些子问题会被重复计算多次。</p><p>2）**最优子结构（Optimal Substructure）：**问题的最优解可以从某个子问题的最优解中获得。</p></li><li><p>斐波那契数列的递归</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这是循环的解法</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib2</span><span class="params">(num)</span>:</span></span><br><span class="line">    a, b = <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> _ <span class="keyword">in</span> range(num - <span class="number">1</span>):</span><br><span class="line">        a, b = b, a + b</span><br><span class="line">    <span class="keyword">return</span> a</span><br><span class="line"><span class="comment"># 递归</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib2</span><span class="params">(num)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> num <span class="keyword">in</span> (<span class="number">0</span>, <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">return</span> fib(num <span class="number">-1</span>) + fib2(num - <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>这个算法会导致运行时间成倍的增长。因为在计算时会有很多重复的运算</p><p>如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">   fib(<span class="number">5</span>)</span><br><span class="line">                   /             \</span><br><span class="line">             fib(<span class="number">4</span>)                fib(<span class="number">3</span>)</span><br><span class="line">           /      \                /     \</span><br><span class="line">       fib(<span class="number">3</span>)      fib(<span class="number">2</span>)         fib(<span class="number">2</span>)    fib(<span class="number">1</span>)</span><br><span class="line">      /     \        ¦              ¦          ¦</span><br><span class="line">fib(<span class="number">2</span>)   fib(<span class="number">1</span>)      <span class="number">1</span>              <span class="number">1</span>          <span class="number">1</span></span><br><span class="line">   ¦        ¦</span><br><span class="line">   <span class="number">1</span>        <span class="number">1</span></span><br></pre></td></tr></table></figure><p>对于重复的计算，我们声明一个字典来保存已经计算过的值，避免不必要的计算。</p></li><li><p>斐波那契数列递归的优化</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 方法1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib</span><span class="params">(num, temp=&#123;&#125;)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> num <span class="keyword">in</span> (<span class="number">1</span>, <span class="number">2</span>):</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">return</span> temp[num]</span><br><span class="line">    <span class="keyword">except</span> KeyError:</span><br><span class="line">        temp[num] = fib(num - <span class="number">1</span>) + fib(num - <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">return</span> temp[num]</span><br><span class="line">    </span><br><span class="line"> <span class="comment"># 方法2</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fastFib</span><span class="params">(n,memo)</span>:</span>  <span class="comment">#memo是设置的一个字典</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> n <span class="keyword">in</span> memo:  <span class="comment">#如果斐波那契数列的第n项数值不在字典里，那么用递归方式计算该值，并把该值放入字典中</span></span><br><span class="line">        memo[n]=fastFib(n<span class="number">-1</span>,memo)+fastFib(n<span class="number">-2</span>,memo)</span><br><span class="line">    <span class="keyword">return</span> memo[n]   <span class="comment">#如果斐波那契数列的第n项数值在字典里，那么直接返回字典里的该项数值</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fib1</span><span class="params">(n)</span>:</span></span><br><span class="line">    memo=&#123;<span class="number">0</span>:<span class="number">0</span>,<span class="number">1</span>:<span class="number">1</span>&#125;  <span class="comment">#初始化一个字典</span></span><br><span class="line">    <span class="keyword">return</span> fastFib(n,memo)</span><br></pre></td></tr></table></figure><p>运用了python的字典保存了递归中变量的值，在递归时如果值在字典中存在，就直接返回值，如在递归后面的调用中都是去字典中取值。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动态规划算法 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>汉诺塔问题</title>
      <link href="/post/2018-10-13-%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98.html"/>
      <url>/post/2018-10-13-%E6%B1%89%E8%AF%BA%E5%A1%94%E9%97%AE%E9%A2%98.html</url>
      
        <content type="html"><![CDATA[<p>法国数学家爱德华·卢卡斯曾编写过一个印度的古老传说：</p><p>在世界中心贝拿勒斯（在印度北部）的圣庙里，一块黄铜板上插着三根宝石针。印度教的主神梵天在创造世界的时候，在其中一根针上从下到上地穿好了由大到小的64片金片，这就是所谓的汉诺塔。</p><a id="more"></a><ul><li><p>法国数学家爱德华·卢卡斯曾编写过一个印度的古老传说：</p><p>​在世界中心贝拿勒斯（在印度北部）的圣庙里，一块黄铜板上插着三根宝石针。印度教的主神梵天在创造世界的时候，在其中一根针上从下到上地穿好了由大到小的64片金片，这就是所谓的汉诺塔。不论白天黑夜，总有一个僧侣在按照下面的法则移动这些金片：一次只移动一片，不管在哪根针上，小片必须在大片上面。僧侣们预言，当所有的金片都从梵天穿好的那根针上移到另外一根针上时，世界就将在一声霹雳中消灭，而梵塔、庙宇和众生也都将同归于尽。</p><figure class="highlight lsl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">不管这个传说的可信度有多大，如果考虑一下把<span class="number">64</span>片金片，由一根针上移到另一根针上，并且始终保持上小下大的顺序。这需要多少次移动呢?这里需要递归的方法。假设有n片，移动次数是f(n).显然f(<span class="number">1</span>)=<span class="number">1</span>,f(<span class="number">2</span>)=<span class="number">3</span>,f(<span class="number">3</span>)=<span class="number">7</span>，且f(k+<span class="number">1</span>)=<span class="number">2</span>*f(k)+<span class="number">1</span>。此后不难证明f(n)=<span class="number">2</span>^n<span class="number">-1</span>。n=<span class="number">64</span>时，假如每秒钟一次，共需多长时间呢？一个平年<span class="number">365</span>天有<span class="number">31536000</span> 秒，闰年<span class="number">366</span>天有<span class="number">31622400</span>秒，平均每年<span class="number">31556952</span>秒，计算一下：</span><br></pre></td></tr></table></figure></li></ul><p>$$<br>2^64-1=18446744073709551615秒<br>$$</p><p>这表明移完这些金片需要5845.54亿年以上，而地球存在至今不过45亿年，太阳系的预期寿命据说也就是数百亿年。真的过了5845.54亿年，不说太阳系和银河系，至少地球上的一切生命，连同梵塔、庙宇等，都早已经灰飞烟灭</p><ul><li><p>题目</p><p>​有三根相邻的柱子，标号为A,B,C，A柱子上从下到上按金字塔状叠放着n个不同大小的圆盘，要把所有盘子一个一个移动到柱子C上，并且每次移动同一根柱子上都不能出现大盘子在小盘子上方，请问至少需要多少次移动，设移动次数为H(n）。</p><p>​首先我们肯定是把上面n-1个盘子移动到柱子B上，然后把最大的一块放在C上，最后把B上的所有盘子移动到C上，由此我们得出表达式：<br>$$<br>H⑴ = 1<br>$$</p><p>$$<br>H(n) = 2*H(n-1）+1 (n&gt;1）<br>$$</p><p>$$<br>那么我们很快就能得到H(n）的一般式：<br>$$</p><p>$$<br>H(n) = 2^n - 1 (n&gt;0)<br>$$</p><p>代码：用递归就可以很好的解决这个问题了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">count = <span class="number">0</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">move</span><span class="params">(num, a, b, c)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> num &gt; <span class="number">0</span>:</span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># 把n-1个盘子从A搬到C</span></span><br><span class="line">        move(num - <span class="number">1</span>, a, c, b)</span><br><span class="line">        <span class="comment"># 把最大的盘子从A搬到B</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;a&#125;</span> ----&gt; <span class="subst">&#123;b&#125;</span>'</span>)</span><br><span class="line">        <span class="comment"># 把n-1个盘子从C搬到B</span></span><br><span class="line">        move(num - <span class="number">1</span>, c, b, a)</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    num = int(input(<span class="string">'盘子个数：'</span>))</span><br><span class="line">    move(num, <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>)</span><br><span class="line">    print(<span class="string">f'需要<span class="subst">&#123;count&#125;</span>步'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汉诺塔问题 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python抽象类，接口，归一化</title>
      <link href="/post/2018-10-13-python%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%BD%92%E4%B8%80%E5%8C%96.html"/>
      <url>/post/2018-10-13-python%E6%8A%BD%E8%B1%A1%E7%B1%BB%EF%BC%8C%E6%8E%A5%E5%8F%A3%EF%BC%8C%E5%BD%92%E4%B8%80%E5%8C%96.html</url>
      
        <content type="html"><![CDATA[<p>面向对象的程序设计分三步走：</p><ol><li>定义类<ul><li>数据抽象：找属性（名词）</li><li>行为抽象：找方法（动词）</li></ul></li><li>创建对象</li><li>给对象发消息</li></ol><a id="more"></a><h2 id="接口"><a class="header-anchor" href="#接口"></a>接口</h2><ul><li><p>接口就是只定义了一些方法，而没有实现。【（这些方法被称为抽象方法），大家自行脑补，在一个方法中直接写了一个pass就是没有实现任何功能的方法，就叫做抽象方法】</p></li><li><p>为什么要有接口？</p><p>接口提取了一群公共的函数，可以把接口当做一个函数的集合，让子类去实现接口中的函数</p></li><li><p>例如：</p><p>我们定义一个动物接口，接口里定义了有跑、吃、呼吸等接口函数，这样老鼠的类去实现了该接口，松鼠的类也去实现了该接口，由二者分别产生一只老鼠和一只松鼠送到你面前，即便是你分别不到底哪只是什么鼠你肯定知道他俩都会跑，都会吃，都能呼吸。</p></li></ul><h2 id="归一化"><a class="header-anchor" href="#归一化"></a>归一化</h2><ul><li><p>接口继承实质上是要求“做出一个良好的抽象，这个抽象规定了一个兼容接口，使得外部调用者无需关心具体细节，可一视同仁的处理实现了特定接口的所有对象”——这在程序设计上，叫做归一化</p><p>归一化使得高层的外部使用者可以不加区分的处理所有接口兼容的对象集合——就好象linux的泛文件概念一样，所有东西都可以当文件处理，不必关心它是内存、磁盘、网络还是屏幕（当然，对底层设计者，当然也可以区分出“字符设备”和“块设备”，然后做出针对性的设计：细致到什么程度，视需求而定）。</p><p>归一化，让使用者无需关心对象的类是什么，只需要的知道这些对象都具备某些功能就可以了，这极大地降低了使用者的使用难度。</p></li></ul><h2 id="抽象类"><a class="header-anchor" href="#抽象类"></a>抽象类</h2><ul><li><p>抽象类，就像是类和接口的混合体，具有接口的特性，在python中利用第三方abc模块，实现抽象类。</p><p><strong>抽象类是一个特殊的类，它的特殊之处在于只能被继承，不能被实例化</strong></p></li><li><p>为什么要有抽象类？</p><p>如果说<strong>类是从</strong>一堆<strong>对象</strong>中抽取相同的内容而来的，那么<strong>抽象类</strong>就<strong>是从</strong>一堆<strong>类</strong>中抽取相同的内容而来的，内容包括数据属性和函数属性。</p><p>从实现角度来看，抽象类与普通类的不同之处在于：抽象类中只能有抽象方法（没有实现功能），该类不能被实例化，只能被继承，且子类必须实现抽象方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABCMeta, abstractmethod</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明这个类是一个抽象类，不能再创建这个类</span></span><br><span class="line"><span class="comment"># 员工类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Employee</span><span class="params">(metaclass=ABCMeta)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line"></span><br><span class="line"><span class="comment"># 声明一个抽象的静态方法，子类必须继承或重写这个工资结算方法    </span></span><br><span class="line"><span class="meta">    @abstractmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">salary</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">     </span><br><span class="line"><span class="comment"># 经理类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Manager</span><span class="params">(Employee)</span>:</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @property</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">salary</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">15000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 程序员</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Programmer</span><span class="params">(Employee)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.name = name</span><br><span class="line">        self.working_hour = <span class="number">0</span></span><br><span class="line">        </span><br><span class="line"><span class="comment"># 将方法变为属性可以直接调用</span></span><br><span class="line"><span class="meta">    @property   </span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">salary</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> <span class="number">200</span> * self.working_hour</span><br><span class="line">      </span><br><span class="line"><span class="comment"># 销售员</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Saleman</span><span class="params">(Employee)</span>:</span></span><br><span class="line">    </span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">         self.name = name</span><br><span class="line">         self.sales = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="meta">     @property</span></span><br><span class="line">     <span class="function"><span class="keyword">def</span> <span class="title">salary</span><span class="params">(self)</span>:</span></span><br><span class="line">         <span class="keyword">return</span> <span class="number">1800</span> + self.sales * <span class="number">0.05</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 实例化多个对象存储到列表</span></span><br><span class="line">    emps = [</span><br><span class="line">        Manager(<span class="string">'刘备'</span>), Manager(<span class="string">'曹操'</span>),</span><br><span class="line">        Programmer(<span class="string">'诸葛亮'</span>), Programmer(<span class="string">'司马懿'</span>),</span><br><span class="line">        Saleman(<span class="string">'貂蝉'</span>)</span><br><span class="line">    ]</span><br><span class="line">    <span class="comment"># 将所有对象遍历出来</span></span><br><span class="line">    <span class="keyword">for</span> emp <span class="keyword">in</span> emps:</span><br><span class="line">        <span class="comment"># 针对不同的类的对象进行不同的处理</span></span><br><span class="line">        <span class="keyword">if</span> isinstance(emp, Programmer):</span><br><span class="line">            hour = int(input(<span class="string">'请输入&#123;emp.name&#125;工作小时数：'</span>))</span><br><span class="line">            emp.working_hour = hour</span><br><span class="line">        <span class="keyword">if</span> isinstance(emp, Saleman):</span><br><span class="line">            sales = int(input(<span class="string">'请输入&#123;emp.name&#125;销售业绩：'</span>))</span><br><span class="line">            emp.sales = sales  </span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;emp.name&#125;</span>的月薪为<span class="subst">&#123;emp.salary&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python抽象类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python装饰器</title>
      <link href="/post/2018-10-13-python%E8%A3%85%E9%A5%B0%E5%99%A8.html"/>
      <url>/post/2018-10-13-python%E8%A3%85%E9%A5%B0%E5%99%A8.html</url>
      
        <content type="html"><![CDATA[<p>python的终极原则：高内聚，低耦合</p><p>在python中函数是一等公民</p><p>函数可以赋值给变量，可以作为函数达到参数和返回值</p><p>装饰器是一个很好的例子</p><a id="more"></a><h2 id="python的参数"><a class="header-anchor" href="#python的参数"></a>python的参数</h2><ul><li><p>在讲装饰器之前先先说一下python的可变参数、关键字参数、命名关键字参数</p></li><li><p>可变参数和关键字参数</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">    print(args, kwargs)</span><br></pre></td></tr></table></figure><ol><li>*args： 在参数前面加一个*号，函数内部接收的是一个tuple，可变参数允许你传0个或者任意个参数，这些参数在函数调用时会自己组装成一个tuple</li><li>*<em>kwargs：参数前面添加两个</em>*号，关键字参数允许你传入0个或任意个含参数名的参数，这些关键字参数在函数内部自动组装为一个dict</li><li>当然这些函数的参数名可以自己定义，只是一般用args,kwargs</li></ol></li><li><p>命名关键字参数</p><ol><li>对于定义了关键字参数的函数，函数的调用者可以传入任意不受限制的关键字参数，如果要限制关键字参数的名字，就可以用命名关键字参数，和关键字参数**kw不同，命名关键字参数需要一个特殊分隔符：*号，*号后面的参数被视为命名关键字参数，*后面的参数必须是关键字参数</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, *, city, job)</span>:</span></span><br><span class="line">    print(name, age, city, job)</span><br></pre></td></tr></table></figure><ol><li>如果函数定义中已经有了一个可变参数，后面跟着的命名关键字参数就不再需要一个特殊分隔符*号了：</li><li>与普通的位置参数不同，命名关键字参数*后面的参数必须传入参数名。如果没有传入参数名，调用将会报错</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">person</span><span class="params">(name, age, *args, city, job)</span>:</span></span><br><span class="line">    print(name, age, args, city, job)</span><br></pre></td></tr></table></figure></li></ul><h2 id="装饰器"><a class="header-anchor" href="#装饰器"></a>装饰器</h2><ul><li><p>装饰器函数：</p><p>用一个函数装饰另一个函数，给他增加额外的功能，装饰器的参数是被装饰的函数，返回的是附带装饰功能的函数，当调用被装饰的函数时，其实是执行了装饰器中返回的那个带装饰功能的函数。给函数加上装饰功能的好处是不需要写重复的代码</p></li><li><p>语法</p><p>在函数前面写上 @装饰器函数名</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">record</span><span class="params">(fn)</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 这里的fn就是被装饰的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">(*args, **kwargs)</span>:</span></span><br><span class="line">        <span class="comment"># 可以传入任意参数</span></span><br><span class="line">        start = time.time()</span><br><span class="line">        ret_value = fn(*args, **kwargs)</span><br><span class="line">        <span class="comment"># 如果函数有返回值，这里获取返回值</span></span><br><span class="line">        end = time.time()</span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;end - start&#125;</span>秒'</span>)</span><br><span class="line">        <span class="keyword">return</span> ret_value</span><br><span class="line">    <span class="comment"># 返回wrapper函数，实际上在调用被装饰函数时，返回这个函数，拥有被装饰函数的功能并且可以添加新功能</span></span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调用装饰器</span></span><br><span class="line"><span class="meta">@record</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fac</span><span class="params">(num)</span>:</span></span><br><span class="line">    result = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> n <span class="keyword">in</span> range(<span class="number">1</span>, num + <span class="number">1</span>):</span><br><span class="line">         result *= n</span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 装饰器的本质是执行了下面的代码</span></span><br><span class="line"><span class="comment"># foo1 = record(foo1)</span></span><br><span class="line"><span class="meta">@record</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">foo1</span><span class="params">(a, b, c=<span class="number">20</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> a + b + c</span><br></pre></td></tr></table></figure><p>这个装饰器的功能是可以获取每个函数的执行时间。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 装饰器 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>领扣刷题</title>
      <link href="/post/2018-10-12-%E7%BA%BD%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98.html"/>
      <url>/post/2018-10-12-%E7%BA%BD%E6%89%A3%E7%AE%97%E6%B3%95%E9%A2%98.html</url>
      
        <content type="html"><![CDATA[<p>多做一些算法题加强自己逻辑能力<br>好记性不如写一篇文章。<br>利用自己的碎片时间可以复习</p><a id="more"></a><p>领扣题目</p>]]></content>
      
      
      <categories>
          
          <category> 算法题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>多继承中的新式类和经典类</title>
      <link href="/post/2018-10-07-%E5%A4%9A%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E6%96%B0%E5%BC%8F%E7%B1%BB%E5%92%8C%E7%BB%8F%E5%85%B8%E7%B1%BB.html"/>
      <url>/post/2018-10-07-%E5%A4%9A%E7%BB%A7%E6%89%BF%E4%B8%AD%E7%9A%84%E6%96%B0%E5%BC%8F%E7%B1%BB%E5%92%8C%E7%BB%8F%E5%85%B8%E7%B1%BB.html</url>
      
        <content type="html"><![CDATA[<p>python中最难使用熟练莫过于类了。<br>总结一下关于python中类的多继承原理。<br>以及面试可能涵盖的知识点。</p><a id="more"></a><ol><li><h4 id="新式类和经典类的区别"><a class="header-anchor" href="#新式类和经典类的区别"></a>新式类和经典类的区别</h4></li></ol><p>Python 2.x中默认都是经典类，只有显式继承了object才是新式类<br>Python 3.x中默认都是新式类，不必显式的继承object</p><ol start="2"><li><h4 id="采用super-继承和不用super的区别"><a class="header-anchor" href="#采用super-继承和不用super的区别"></a>采用super()继承和不用super的区别</h4></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'Base show'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A1</span><span class="params">(Base)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">'A1 show'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A2</span><span class="params">(Base)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">'A2 show'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">show</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">'A2的show状态'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span><span class="params">(A1, A2)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        print(<span class="string">'B show'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self, num)</span>:</span></span><br><span class="line">        print(num)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">mydefault</span><span class="params">(self, *args)</span>:</span></span><br><span class="line">        print(<span class="string">'默认函数：'</span>+ str(args))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span><span class="params">(self, item)</span>:</span></span><br><span class="line">        print(<span class="string">'other fn:'</span>, item)</span><br><span class="line">        <span class="keyword">return</span> self.mydefault</span><br></pre></td></tr></table></figure><ol start="3"><li><h4 id="当多继承采用super-时可以保证公共父类仅被执行一次-关于父类的索引顺序可以通过一个方法："><a class="header-anchor" href="#当多继承采用super-时可以保证公共父类仅被执行一次-关于父类的索引顺序可以通过一个方法："></a>当多继承采用super()时可以保证公共父类仅被执行一次，关于父类的索引顺序可以通过一个方法：</h4>​super(A2) --&gt; 表示查找时从mro列表中的哪一个类开始查找</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">obj = B()</span><br><span class="line">print(obj.__class__)</span><br><span class="line">print(B.mro())</span><br></pre></td></tr></table></figure><p>​mro:返回当前类的所有父类，以及父类的父类<br>执行的结果</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Base show</span><br><span class="line">A2 show</span><br><span class="line">A1 show</span><br><span class="line">B show</span><br><span class="line">&lt;<span class="class"><span class="keyword">class</span> '<span class="title">__main__</span>.<span class="title">B</span>'&gt;</span></span><br><span class="line">[&lt;class '__main__.B'&gt;, &lt;class '__main__.A1'&gt;, &lt;class '__main__.A2'&gt;, &lt;class '__main__.Base'&gt;, &lt;class 'object'&gt;]</span><br></pre></td></tr></table></figure><ol start="4"><li><h4 id="如果想要下面的代码实现应该怎么写："><a class="header-anchor" href="#如果想要下面的代码实现应该怎么写："></a>如果想要下面的代码实现应该怎么写：</h4></li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">obj_a1 = A1()</span><br><span class="line">obj_a1.show()</span><br></pre></td></tr></table></figure><p>在类中，obj_a1.__class__代表当前类，使obj_a1.<strong>class</strong> = A2，就可以调用A2的方法</p><ol start="5"><li><h4 id="如何使一个对象能被直接调用"><a class="header-anchor" href="#如何使一个对象能被直接调用"></a>如何使一个对象能被直接调用</h4></li></ol> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># __call__方法可以使对象能被直接调用</span></span><br><span class="line">obj1 = B()</span><br><span class="line">print(obj1(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用__getattr__时使调用类中不存在的方法时会去调用自己写一个默认方法</span></span><br><span class="line">obj1.fn1(<span class="number">33</span>)</span><br><span class="line">obj1.fn2(<span class="string">'刘彦材'</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> 类 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>linux常用操作命令</title>
      <link href="/post/2018-09-28-linux%E5%91%BD%E4%BB%A4.html"/>
      <url>/post/2018-09-28-linux%E5%91%BD%E4%BB%A4.html</url>
      
        <content type="html"><![CDATA[<p>linux成长之路，共勉。<br>linux常用操作命令。<br>望多多交流。</p><a id="more"></a><h2 id="python解释器"><a class="header-anchor" href="#python解释器"></a>python解释器</h2><ul><li><p>python有不同语言的的解释器</p><p>Python解释器的C实现 - CPython</p><p>Python解释器的Java实现 - Jython</p><p>Python解释器的C#实现 - IronPython</p><p>Python解释器的Python实现 - PyPy</p></li></ul><h2 id="linux基础知识"><a class="header-anchor" href="#linux基础知识"></a>linux基础知识</h2><ol><li><p>shell —-&gt; 人机对话的交互式环境</p></li><li><p>~ —-&gt; 超级管理员的主目录root</p></li><li><p>在linux中文件名前面加点都是隐藏文件</p></li><li><p>shell会保存历史命令，可以点击上下箭头按键查看历史命令</p></li><li><p>制表键可以补全你输入的 命令、文件名…</p></li><li><p>linux系统安装软件 —&gt; 使用包管理工具进行安装 yum（黄狗更新器修改版）/rpm（红帽子）</p></li><li><p>压缩文件：<br>１、gz —gzip（压缩）/gunzip（解压）<br>２、xz —xz -z （压缩） / xz -d（解压）</p></li><li><p>所有命令接 –help 可以查看命令的参数</p></li><li><p>man 接命令 可以查看命令的详细作用和参数</p></li><li><p>info 接命令 一般用于程序员查看参数</p></li><li><p>归档和解归档：</p><p>１、归档 —&gt;把多个文件合并成一个文件</p><p>２、解归档 tar ----&gt;把一个文件拆成多个文件</p></li><li><p>ctl + c 终止进程/ ctrl + z 暂停进程并将进程置于后台</p></li><li><p>在执行文件时 文件+&amp; —&gt;（ ./fun.py &amp;） —&gt; 将进程置于后台运行</p></li><li><p>jobs 查看自己启动的后台进程(显示id)</p></li><li><p>bg  %id --&gt;让暂停的进程继续在后台运行 background</p></li><li><p>fg  %id --&gt; 让后台Inc拿到前台运行 foreground</p></li><li><p>.bash_profile 中配置一些命令可以让你登录时就会执行这个命令这个是root下面的，想要所有用户都配置，可以在/etc/profile中配置</p><p>例如配置环境变量 PATH=$PATH:/usr/local/python37/bin，一登录账号就会配置好环境变量了</p></li><li><p>ps -ef | grep 名称  — 查看进程</p></li><li><p>netstat -nap | grep 名称 – 查看当服务的ip和端口</p></li></ol><h2 id="linux常用命令"><a class="header-anchor" href="#linux常用命令"></a>linux常用命令</h2><ul><li><p>exit/logout —&gt; 退出</p></li><li><p>write 用户名 —&gt; 给某个用户发消息</p></li><li><p>type 命令 —&gt; 查看命令信息</p></li><li><p>wall --&gt; 给所有用户发消息</p></li><li><p>mesg n/y —&gt; 不接受/接受消息</p></li><li><p>clear —&gt; 清除屏幕</p></li><li><p>who —&gt; 查看所有登录用户名</p></li><li><p>whoami —&gt; 查看自己登录用户名</p></li><li><p>ps （processes） —-&gt; 查看当前所有进程</p></li><li><p>top – &gt;查看所有进程</p></li><li><p>kill 进程id —&gt; 杀死进程（后接进程id）</p></li><li><p>pkill -kill -t pts/0 --&gt; 注销其他用户</p></li><li><p>su —-&gt; 切换用户(后接用户名)</p></li><li><p>adduser —&gt; 添加用户账号</p></li><li><p>passwd —&gt; 修改密码(接用户名，如果不接就是修改超级管理员的密码)</p></li><li><p>whatis/man —-&gt; 查看当前命令介绍(后接命令)</p></li><li><p>pwd —&gt; 查看当前根目录</p></li><li><p>cd(change directory) —&gt; 改变根目录</p></li><li><p>ls —&gt; 查看当前目录下的所有文件</p></li><li><p>-l —&gt; 长格式显示当前目录下的文件，包含详细信息</p></li><li><p>-R —&gt; 递归遍历出文件</p></li><li><p>-a —&gt; 查看所有文件（包含隐藏文件）</p></li><li><p>-h —&gt;将文件大小以人类易读的方式显示(GB,KB)</p></li><li><p>-d —&gt; 列出目录本身</p></li><li><p>wget(web get) —&gt; 去网上下载文件(后面接url地址)</p></li><li><p>cat —&gt; 打开一个文件并查看文件内容(接文件名)</p></li><li><p>history —&gt; 查看你所有历史命令</p></li><li><p>! —&gt; 接history里历史命令的编号，可以执行编号对应的命令</p></li><li><p>history -c —&gt; 清除history的所有历史命令</p></li><li><p>mkdir —&gt; 创建一个空文件夹(目录)</p></li><li><p>mkdir -p  —&gt; 会自动创建父目录(如果父目录不存在)</p></li><li><p>rmdir —&gt; 删除一个空文件夹(目录)</p></li><li><p>touch —&gt; 新建一个空白文件</p></li><li><p>cp —&gt; 拷贝文件</p></li><li><p>rm —&gt; 删除文件（加上 -f 强制删除，不会询问你）</p></li><li><p>rm -r —&gt; 递归 删除非空文件夹</p></li><li><p>mv —&gt; move - 剪切文件</p></li><li><p>shutdown / init 0 - 关机</p></li><li><p>reboot / init 6 - 重启</p></li><li><p>head / tai   - 查看文件前面/后面部分(可以接行数)</p></li><li><p>less / more - 分屏查看文件</p></li><li><p>echo  - 回声，打印</p></li><li><p>echo 内容 &gt;文件名 —&gt; 将内容输入到文件中</p></li><li><p>date - 查看系统时间日期</p></li><li><p>cal - calendar - 查看日历</p></li><li><p>cal 2018 &gt; 文件名 —&gt;将日历输入到文件中</p></li><li><p>cal &gt;输出重定向</p></li><li><p>cal &gt;&gt; 追加输出重定向（将内容追加到文件末尾）</p></li><li><p>cal 2&gt; 错误输出重定向</p></li><li><p>alias  rmd=“rm -rf” —&gt; 别名rmd，给一些命令取一个别名</p></li><li><p>unalias rmd —&gt; 取消别名</p></li><li><p>| —&gt; 管道（进程间通信）- 把前一个进程的输出当成后一个进程的输入</p></li><li><p>grep 匹配的字符 —&gt;输出 匹配字符的结果</p></li><li><p>ls | grep centos —&gt; 查找含有centos的文件</p></li><li><p>wc （word count） —&gt; 统计行、单词、字节数量</p></li><li><p>ls | wc —&gt; 查看下面有多少个文件</p></li><li><p>uniq —&gt; 去重，只能去除相邻的重复元素 （不会影响原来的文件）</p></li><li><p>sort —&gt; 排序</p></li><li><p>sort 文件名 | uniq | wc ----&gt; 排序并且去除重复元素并统计个数（不会影响原来的文件）</p></li><li><p>yum / rpm install 文件名 —&gt; 安装软件</p></li><li><p>yum / rpm remove —&gt; 卸载软件</p></li><li><p>tar -x ----&gt; 解压（解归档）</p></li><li><p>ln -s  带完整路径的文件名 连接文件名----&gt; 创建软链接，相当于快捷方式</p></li><li><p>ln —&gt; 创建硬链接</p></li><li><p>chmod —&gt; 改变文件权限–&gt;r:4&gt;w:2&gt;x:1</p><p>-rwxrwxrwx —&gt;111 111 111(二进制) —&gt; <strong>777</strong></p><p>u +/-   (rwx) 拥有者</p><p>g +/-  (rwx) 群组</p><p>o +/-  (rwx) 其他人</p><p>a +/-  (rwx) all代表（ugo）</p></li><li><p>chgrp 群组 文件名 —&gt;改变文件所属群组</p></li><li><p>chown 账号名 文件名 ----&gt;改变文件的拥有者</p></li><li><p>chattr --&gt; 改变隐藏属性</p><p>(+ - =) —&gt; 增加，删除，设置隐藏属性</p></li><li><p>lsattr —&gt; 显示隐藏属性</p></li><li><p>linux使用包管理工具安装 --&gt; yum/rpm<br>yuum search 文件名   ----&gt; -搜索按照包<br>yum -y install 文件名 … -----&gt; 安装软件(可以同时安装多个)<br>yum -y remove 文件名… -----&gt; 卸载软件<br>yum info 文件名 ----&gt; 查看安装的软件的详细信息<br>yum update 软件名 —&gt; 更新(如果不跟文件名，就是更新全部软件)<br>yum list installed ----&gt; 查看所有安装的软件<br>systemctl start 服务名 – &gt; 启动一个服务</p></li><li><p>umount/mount(挂载) —&gt;插入优盘时会在dev里面，需要挂载目录到mnt下</p></li></ul><h2 id="linux-源代码安装如下"><a class="header-anchor" href="#linux-源代码安装如下"></a>linux 源代码安装如下</h2><ul><li>python3.7的安装过程</li><li>CentOS安装Python3.7</li></ul><p>1、下载源代码</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://www.python.org/ftp/python/<span class="number">3.7</span>.<span class="number">0</span>/Python-<span class="number">3.7</span>.<span class="number">0</span>.tgz</span><br></pre></td></tr></table></figure><p>2、解压缩</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gunzip Python-<span class="number">3.7</span>.<span class="number">0</span>.taz</span><br></pre></td></tr></table></figure><p>3、解归档 在加个-v查看安装过程</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xf Python-<span class="number">3.7</span>.<span class="number">0</span>.tar</span><br></pre></td></tr></table></figure><p>4、安装底层依赖库</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel  gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel</span><br></pre></td></tr></table></figure><p>5、安装前的配置</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">cd</span> Python-3.7.0</span><br><span class="line"><span class="string">./configure</span> <span class="params">--prefix=/usr/local/pyhton37</span> <span class="params">--enable-optimizations</span></span><br></pre></td></tr></table></figure><p>6、构建安装</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make &amp;&amp; make install</span><br></pre></td></tr></table></figure><p>7、配置PATH环境变量<br>仅仅是临时建立环境变量</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH = $PATH:/usr/local/python37/bin</span><br></pre></td></tr></table></figure><p>8、注册软连接（符号链接）</p><p>硬链接 - 文件的引用 只要引用数不为0 文件就会一直存在（建一个硬链接，引用就会加一，相当于建立了一个副本在这个硬链接处）<br>ln 带完整路径的文件名 链接文件名<br>软连接 - 相当于文件的快捷方式，如果文件被删除软链接失效</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/local/python37/bin/python3 /usr/bin/python3</span><br></pre></td></tr></table></figure><p>In -s 带完整路径的文件名 链接文件名</p><ul><li><p>vim - 文本编辑神奇</p><p>命令模式 i/a—&gt;编辑模式<br>编辑模式 esc—&gt;命令模式<br>命令模式 shift+:或/—&gt;末行模式</p></li><li><p>命令模式</p><p>hjkl/HML/0$/w/gg/G —&gt; 移动光标<br>ctrl+e / crtl+y / crtl+f / crtl+b —&gt;翻页<br>yy --复制<br>p --&gt;粘贴<br>dd --&gt;删除<br>u --&gt; 撤销<br>crtl+r–&gt;恢复<br>ctrl+x ctrl+o --&gt;代码提示</p><p>/正则表达式 --匹配搜索特定字符</p><p>搜索出来后 --&gt; n 向下搜 / N 向上搜</p></li><li><p>末行模式</p><p>:w – 保存<br>:map 快捷键 功能命令 —在命令模式映射一个快捷键<br>:inoremap _main if <strong>name</strong> == “<strong>main</strong>”: 在输入模式映射一个快捷键_main 并且不递归映射(nore)<br>:q – 退出<br>:set nu 开启行号<br>:set ts = 4 tab缩进为5</p></li><li><p>:1,$s/正则匹配被替换的内容1/替换的字符2/gice —&gt;替换，将正则匹配的字符替换为字符2，$代表文件末尾，也可以写行号</p></li><li><p>g:全局模式</p></li><li><p>i:忽略大小写</p></li><li><p>c:确认模式</p></li><li><p>e:忽略错误</p></li><li><p>vim -d 文件1 文件2<br>对两个文件进行版本比较</p></li><li><p>vim 文件1 文件2…</p></li><li><p>在末行模式</p><p>:ls 查看打开的文件以及对应的标号<br>:b 文件编号 —&gt;切换到编号对应的文件<br>:vs 垂直拆分两个窗口<br>:sp 水平拆分两个窗口<br>命令模式 ：crtl+w 两次就可以在两个窗口切换光标<br>:wqa 全部保存退出</p></li></ul><h2 id="linux-启动服务-：nginx"><a class="header-anchor" href="#linux-启动服务-：nginx"></a>linux 启动服务 ：nginx</h2><ul><li><p>systemctl 命令 +服务</p><p>ip地址可以确定网络上的一台主机，端口号可以用来区分主机上的不同的服务</p><p>systemctl start nginx<br>systemctl stop nginx<br>systemctl restart nginx<br>systemctl status nginx  查看服务状态<br>systemctl enable <name> 开机自启<br>systemctl disable <name>  关闭开机自启<br>journalctl -xe 查看保存日志</name></name></p></li></ul><h2 id="远程登录与文件传输"><a class="header-anchor" href="#远程登录与文件传输"></a>远程登录与文件传输</h2><ul><li><p>ifconfig --&gt; linux查看自己的网络地址ip</p></li><li><p>ping <a href="http://www.baidu.com" target="_blank" rel="noopener">www.baidu.com</a> 查看自己的延迟</p></li><li><p>ssh root(用户名)@对方的公网ip --&gt;远程连接别人的服务器，输入密码</p></li><li><p>scp 文件名(也可以是别服务器的文件) root(账户名)@101.231.23.21(ip地址):绝对路径 —&gt; 传输文件</p><ul><li>例如 scp <a href="mailto:root@101.200.57.142" target="_blank" rel="noopener">root@101.200.57.142</a>:/root/hello     <a href="mailto:root@119.23.202.138" target="_blank" rel="noopener">root@119.23.202.138</a>:/root/hellowuliang</li></ul></li><li><p>sftp root(用户名)@对方的公网ip —&gt;当你连接好时时,会出现  sftp&gt;，</p><ul><li>get/put 文件名 —&gt;下载/上传文件</li><li>lls —&gt;查看本地目录下所有文件</li><li>ls —&gt; 查对方账号目录下所有</li></ul></li><li><p>netstat  -nap | grep 80 —&gt; 查看所有开启的端口</p></li></ul><h2 id="配置防火墙"><a class="header-anchor" href="#配置防火墙"></a>配置防火墙</h2><ul><li>systemctl start firewalld 启动防火墙</li><li>firewall-cmd --permanent --add-port=80/tcp  开启80加端口</li><li>system restart firewalld 重启防火墙，设置才生效</li><li>firewall-cmd --query-port=80/tcp  查询80端口是否开启</li><li>firewall-cmd --remove-port=80/tcp 移除端口</li><li>firewall-cmd --list-port  显示当前开启的端口</li><li>firewall-cmd --query-service=ssh  查询ssh服务是否开启</li><li>system enable firewalld  设置开机自启动防火墙</li></ul>]]></content>
      
      
      <categories>
          
          <category> linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux命令 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>markdown语法</title>
      <link href="/post/2018-09-12-markdown%E8%AF%AD%E6%B3%95.html"/>
      <url>/post/2018-09-12-markdown%E8%AF%AD%E6%B3%95.html</url>
      
        <content type="html"><![CDATA[<p>先熟悉下markdown语法。</p><p>这是写好一篇博客的基本要求</p><p>加油！</p><a id="more"></a><h1>MarkDown学习</h1><h2 id="1-生成目录"><a class="header-anchor" href="#1-生成目录"></a>1. 生成目录</h2><p>输入[toc]，然后回车，就可以生成，目录列表</p><h2 id="2-列表"><a class="header-anchor" href="#2-列表"></a>2. 列表</h2><p>列表分为有序列表和无序列表</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="bullet">- </span>梨子</span><br><span class="line"><span class="bullet">+ </span>苹果</span><br><span class="line"><span class="bullet">* </span>桃子</span><br><span class="line"><span class="bullet">1. </span>鸭蛋</span><br><span class="line"><span class="bullet">2. </span>鹅蛋</span><br></pre></td></tr></table></figure><p>效果:</p><ul><li><p>梨子</p></li><li><p>苹果</p></li><li><p>桃子</p></li></ul><ol><li>鸭蛋</li><li>鹅蛋</li></ol><h2 id="3-表格"><a class="header-anchor" href="#3-表格"></a>3. 表格</h2><p>可以使用<code>Ctrl+T</code>快捷键来插入表格，按下快捷键之后就会出现一个表格设置，预先设定行数和列数，然后就出现表格了</p><table><thead><tr><th style="text-align:center">1</th><th>2</th><th>3</th><th>4</th></tr></thead><tbody><tr><td style="text-align:center">5</td><td>6</td><td>7</td><td>8</td></tr></tbody></table><h2 id="4-超链接"><a class="header-anchor" href="#4-超链接"></a>4. 超链接</h2><ul><li><p>语法1（行内式链接）</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">百度</span>][<span class="symbol">https://baidu.com</span>]</span><br></pre></td></tr></table></figure></li><li><p>效果1</p><p>[百度][<a href="https://baidu.com" target="_blank" rel="noopener">https://baidu.com</a>]</p></li><li><p>语法2</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">https:</span>//<span class="attr">github.com</span>/&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>效果2</p><p><a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></p></li></ul><h2 id="5-下划线"><a class="header-anchor" href="#5-下划线"></a>5. 下划线</h2><ul><li><p>语法</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">u</span>&gt;</span></span>下划线<span class="xml"><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span></span><br></pre></td></tr></table></figure></li><li><p>效果</p><p><u>下划线</u></p></li></ul><h2 id="6-删除线"><a class="header-anchor" href="#6-删除线"></a>6. 删除线</h2><ul><li><p>语法</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~~删除线~~</span><br></pre></td></tr></table></figure></li><li><p>效果</p><p><s>删除线</s></p></li></ul><h2 id="7-分割线与加粗"><a class="header-anchor" href="#7-分割线与加粗"></a>7. 分割线与加粗</h2><ul><li><p>语法</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="strong">__加粗1__</span></span><br><span class="line"><span class="emphasis">***</span></span><br><span class="line"><span class="strong">**加粗2**</span></span><br><span class="line">---</span><br></pre></td></tr></table></figure></li><li><p>效果</p><p><strong>加粗1</strong></p><hr><h2 id="加粗2"><a class="header-anchor" href="#加粗2"></a><strong>加粗2</strong></h2></li></ul><h2 id="8-符号的输入"><a class="header-anchor" href="#8-符号的输入"></a>8. 符号的输入</h2><ul><li><p>语法</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">\\   反斜线</span><br><span class="line">\`   反引号</span><br><span class="line">\*   星号</span><br><span class="line">\_   底线</span><br><span class="line">\&#123; \&#125;  花括号</span><br><span class="line">\[ \]  方括号</span><br><span class="line">\( \)  括弧</span><br><span class="line">\#   井字号</span><br><span class="line">\+   加号</span><br><span class="line">\-   减号</span><br><span class="line">\.   英文句点</span><br><span class="line">\!   惊叹号</span><br></pre></td></tr></table></figure></li></ul><h2 id="9-特殊字符"><a class="header-anchor" href="#9-特殊字符"></a>9. 特殊字符</h2><ul><li><p>语法</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&amp;copy;      版权      </span><br><span class="line">&amp;reg;       注册商标</span><br><span class="line">&amp;trade;     商标</span><br><span class="line">&amp;nbsp;      空格</span><br><span class="line">&amp;amp;       和号</span><br><span class="line">&amp;quot;      引号</span><br><span class="line">&amp;apos;      撇号</span><br><span class="line">&amp;lt;        小于号</span><br><span class="line">&amp;gt;        大于号</span><br><span class="line">&amp;ne;        不等号</span><br><span class="line">&amp;le;        小于等于</span><br><span class="line">&amp;ge;        大于等于</span><br><span class="line">&amp;cent;      分</span><br><span class="line">&amp;pound;     磅</span><br><span class="line">&amp;euro;      欧元</span><br><span class="line">&amp;yen;       元</span><br><span class="line">&amp;sect;      节</span><br><span class="line">&amp;times;     乘号</span><br><span class="line">&amp;divide;    除号</span><br><span class="line">&amp;plusmn;    正负号</span><br></pre></td></tr></table></figure></li><li><p>效果</p><p>©      版权<br>®       注册商标<br>™     商标<br>       空格<br>&amp;       和号<br>&quot;      引号<br>'      撇号<br>&lt;        小于号<br>&gt;        大于号<br>≠        不等号<br>≤        小于等于<br>≥        大于等于<br>¢      分<br>£     磅<br>€      欧元<br>¥       元<br>§      节<br>×     乘号<br>÷    除号<br>±    正负号</p></li></ul><h2 id="10-数学表达式"><a class="header-anchor" href="#10-数学表达式"></a>10. 数学表达式</h2><ul><li><p>行内公式可以用<code>$x=5$</code>来插入数学公式。（需要在<code>File</code>-&gt;<code>Preferences</code>中勾选“Inline math”）</p><p>$x=5$</p></li><li><p>行间公式<code>$$</code>后输入回车来插入数学公式。<br>$$<br>x=5<br>$$</p></li></ul><h2 id="11-图表"><a class="header-anchor" href="#11-图表"></a>11. 图表</h2><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[Hard edge] --&gt;B(Round edge)</span><br><span class="line">B --&gt; C&#123;Decision&#125;</span><br><span class="line">C --&gt;|One| D[Result one]</span><br><span class="line">C --&gt;|Two| E[Result two]</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[Hard edge] --&gt;B(Round edge)</span><br><span class="line">B --&gt; C&#123;Decision&#125;</span><br><span class="line">C --&gt;|One| D[Result one]</span><br><span class="line">C --&gt;|Two| E[Result two]</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> markdown </category>
          
      </categories>
      
      
        <tags>
            
            <tag> markdown语法 </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>python推荐书籍</title>
      <link href="/post/2018-08-30-Python%E9%98%85%E8%AF%BB.html"/>
      <url>/post/2018-08-30-Python%E9%98%85%E8%AF%BB.html</url>
      
        <content type="html"><![CDATA[python推荐书籍:<p>python成长之路的一些书籍，从易到难。</p><a id="more"></a><p>&lt;The rest of contents | 余下全文&gt;</p><h2 id="python参考书籍"><a class="header-anchor" href="#python参考书籍"></a>Python参考书籍</h2><h3 id="入门读物"><a class="header-anchor" href="#入门读物"></a>入门读物</h3><ol><li>《Python基础教程》（<em>Beginning Python From Novice to Professional</em>）</li><li>《Python学习手册》（<em>Learning Python</em>）</li><li>《Python编程》（<em>Programming Python</em>）</li><li>《Python Cookbook》</li><li>《Python程序设计》（<em>Python Programming: An Introduction to Computer Science</em>）</li><li>《Modern Python Cookbook》</li></ol><h3 id="进阶读物"><a class="header-anchor" href="#进阶读物"></a>进阶读物</h3><ol><li>《Python核心编程》（<em>Core Python Applications Programming</em>）</li><li>《流畅的Python》（<em>Fluent Python</em>）</li><li>《Effective Python：编写高质量Python代码的59个有效方法》（<em>Effective Python 59 Specific Ways to Write Better Python</em>）</li><li>《Python设计模式》（<em>Learning Python Design Patterns</em>）</li><li>《Python高级编程》（<em>Expert Python Programming</em>）</li><li>《Python性能分析与优化》（<em>Mastering Python High Performance</em>）</li></ol><h3 id="web框架"><a class="header-anchor" href="#web框架"></a>Web框架</h3><ol><li>《Django基础教程》（<em>Tango with Django</em>）</li><li>《轻量级Django》（<em>Lightweight Django</em>）</li><li>《Python Web开发：测试驱动方法》（<em>Test-Driven Development with Python</em>）</li><li>《Web Development with Django Cookbook》</li><li>《Test-Driven Development with Django》</li><li>《Django Project Blueprints 》</li><li>《Flask Web开发：基于Python的Web应用开发实战》（<em>Flask Web Development: Developing Web Applications with Python</em>）</li><li>《深入理解Flask》（<em>Mastering Flask</em>）</li></ol><h3 id="爬虫开发"><a class="header-anchor" href="#爬虫开发"></a>爬虫开发</h3><ol><li>《用Python写网络爬虫》（<em>Web Scraping with Python</em>）</li><li>《精通Python爬虫框架Scrapy》（<em>Learning Scrapy</em>）</li><li>《Python网络数据采集》（<em>Web Scraping with Python</em>）</li><li>《Python爬虫开发与项目实战》</li><li>《Python 3网络爬虫开发实战》</li></ol><h3 id="数据分析"><a class="header-anchor" href="#数据分析"></a>数据分析</h3><ol><li>《利用Python进行数据分析》（<em>Python for Data Analysis</em>）</li><li>《Python数据科学手册》（<em>Python Data Science Handbook</em>）</li><li>《Python金融大数据分析》（<em>Python for Finance</em>）</li><li>《Python数据可视化编程实战》（<em>Python Data Visualization Cookbook</em>）</li><li>《Python数据处理》（<em>Data Wrangling with Python</em>）</li></ol><h3 id="机器学习"><a class="header-anchor" href="#机器学习"></a>机器学习</h3><ol><li>《Python机器学习基础教程》（<em>Introduction to Machine Learning with Python</em>）</li><li>《Python机器学习实践指南》（<em>Python Machine Learning Blueprints</em>）</li><li>《Python Machine Learning Case Studies》</li><li>《Python机器学习实践：测试驱动的开发方法》（<em>Thoughtful Machine Learning with Python A Test Driven Approach</em>）</li><li>《Python机器学习经典实例》（<em>Python Machine Learning Cookbook</em>）</li><li>《TensorFlow：实战Google深度学习框架》</li></ol>]]></content>
      
      
      <categories>
          
          <category> python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阅读 </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
